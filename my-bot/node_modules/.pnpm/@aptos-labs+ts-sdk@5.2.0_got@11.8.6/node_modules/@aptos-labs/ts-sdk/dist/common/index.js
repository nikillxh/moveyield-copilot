"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { newObj[key] = obj[key]; } } } newObj.default = obj; return newObj; } } function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; } function _optionalChainDelete(ops) { const result = _optionalChain(ops); return result == null ? true : result; }var _chunkJQCMXTY7js = require('./chunk-JQCMXTY7.js');var C=class n{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}static fromHex(e){let t=_chunkJQCMXTY7js.v.hexInputToUint8Array(e);return new n(t)}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}remaining(){return this.buffer.byteLength-this.offset}assertFinished(){if(this.remaining()!==0)throw new Error("Buffer has remaining bytes")}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeOptionStr(){return this.deserializeOption("string")}deserializeOption(e,t){if(this.deserializeBool()){if(e==="string")return this.deserializeStr();if(e==="bytes")return this.deserializeBytes();if(e==="fixedBytes"){if(t===void 0)throw new Error("Fixed bytes length not provided");return this.deserializeFixedBytes(t)}return this.deserialize(e)}}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeI8(){return new DataView(this.read(1)).getInt8(0)}deserializeI16(){return new DataView(this.read(2)).getInt16(0,!0)}deserializeI32(){return new DataView(this.read(4)).getInt32(0,!0)}deserializeI64(){let e=this.deserializeU32(),t=this.deserializeU32(),r=BigInt(BigInt(t)<<BigInt(32)|BigInt(e)),i=BigInt(1)<<BigInt(63);return r>=i?r-(BigInt(1)<<BigInt(64)):r}deserializeI128(){let e=this.deserializeU64(),t=this.deserializeU64(),r=BigInt(t<<BigInt(64)|e),i=BigInt(1)<<BigInt(127);return r>=i?r-(BigInt(1)<<BigInt(128)):r}deserializeI256(){let e=this.deserializeU128(),t=this.deserializeU128(),r=BigInt(t<<BigInt(128)|e),i=BigInt(1)<<BigInt(255);return r>=i?r-(BigInt(1)<<BigInt(256)):r}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<_chunkJQCMXTY7js.d;){let r=this.deserializeU8();if(e|=BigInt(r&127)<<BigInt(t),(r&128)===0)break;t+=7}if(e>_chunkJQCMXTY7js.d)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}deserialize(e){return e.deserialize(this)}deserializeVector(e){let t=this.deserializeUleb128AsU32(),r=new Array;for(let i=0;i<t;i+=1)r.push(this.deserialize(e));return r}};var Re=class n extends _chunkJQCMXTY7js.x{constructor(e){super(),this.value=_chunkJQCMXTY7js.v.fromHexInput(e).toUint8Array()}serialize(e){e.serializeFixedBytes(this.value)}serializeForEntryFunction(e){e.serialize(this)}serializeForScriptFunction(e){e.serialize(this)}static deserialize(e,t){let r=e.deserializeFixedBytes(t);return new n(r)}};var gr=class n extends _chunkJQCMXTY7js.x{constructor(e){super(),this.value=new Re(e)}serialize(e){e.serialize(this.value)}serializeForEntryFunction(e){e.serializeU32AsUleb128(this.value.value.length),e.serialize(this)}static deserialize(e,t){let r=Re.deserialize(e,t);return new n(r.value)}};var F=class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.z.call(void 0, e),this.value=e}serialize(e){e.serializeBool(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(5),e.serialize(this)}deserialize(e){return new Se(e.deserializeU256())}static deserialize(e){return new n(e.deserializeBool())}},Z= exports.U8 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,0,_chunkJQCMXTY7js.b),this.value=e}serialize(e){e.serializeU8(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(0),e.serialize(this)}static deserialize(e){return new n(e.deserializeU8())}},Ue= exports.U16 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,0,_chunkJQCMXTY7js.c),this.value=e}serialize(e){e.serializeU16(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(6),e.serialize(this)}static deserialize(e){return new n(e.deserializeU16())}},ze= exports.U32 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,0,_chunkJQCMXTY7js.d),this.value=e}serialize(e){e.serializeU32(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(7),e.serialize(this)}static deserialize(e){return new n(e.deserializeU32())}},$= exports.U64 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,BigInt(0),_chunkJQCMXTY7js.e),this.value=BigInt(e)}serialize(e){e.serializeU64(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(1),e.serialize(this)}static deserialize(e){return new n(e.deserializeU64())}},ke= exports.U128 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,BigInt(0),_chunkJQCMXTY7js.f),this.value=BigInt(e)}serialize(e){e.serializeU128(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(2),e.serialize(this)}static deserialize(e){return new n(e.deserializeU128())}},Se= exports.U256 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,BigInt(0),_chunkJQCMXTY7js.g),this.value=BigInt(e)}serialize(e){e.serializeU256(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(8),e.serialize(this)}static deserialize(e){return new n(e.deserializeU256())}},Jo= exports.I8 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,_chunkJQCMXTY7js.h,_chunkJQCMXTY7js.i),this.value=e}serialize(e){e.serializeI8(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}static deserialize(e){return new n(e.deserializeI8())}},Xo= exports.I16 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,_chunkJQCMXTY7js.j,_chunkJQCMXTY7js.k),this.value=e}serialize(e){e.serializeI16(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}static deserialize(e){return new n(e.deserializeI16())}},Yo= exports.I32 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,_chunkJQCMXTY7js.l,_chunkJQCMXTY7js.m),this.value=e}serialize(e){e.serializeI32(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}static deserialize(e){return new n(e.deserializeI32())}},Zo= exports.I64 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,_chunkJQCMXTY7js.n,_chunkJQCMXTY7js.o),this.value=BigInt(e)}serialize(e){e.serializeI64(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}static deserialize(e){return new n(e.deserializeI64())}},es= exports.I128 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,_chunkJQCMXTY7js.p,_chunkJQCMXTY7js.q),this.value=BigInt(e)}serialize(e){e.serializeI128(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}static deserialize(e){return new n(e.deserializeI128())}},ts= exports.I256 =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),_chunkJQCMXTY7js.B.call(void 0, e,_chunkJQCMXTY7js.r,_chunkJQCMXTY7js.s),this.value=BigInt(e)}serialize(e){e.serializeI256(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}static deserialize(e){return new n(e.deserializeI256())}};var S=class n extends _chunkJQCMXTY7js.x{constructor(e){super(),this.values=e}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){if(this.values[0]!==void 0&&!(this.values[0]instanceof Z)){new Rn(this.bcsToBytes()).serializeForScriptFunction(e);return}e.serializeU32AsUleb128(4),e.serialize(this)}static U8(e){let t;if(Array.isArray(e)&&e.length===0)t=[];else if(Array.isArray(e)&&typeof e[0]=="number")t=e;else if(typeof e=="string"){let r=_chunkJQCMXTY7js.v.fromHexInput(e);t=Array.from(r.toUint8Array())}else if(e instanceof Uint8Array)t=Array.from(e);else throw new Error("Invalid input type, must be an number[], Uint8Array, or hex string");return new n(t.map(r=>new Z(r)))}static U16(e){return new n(e.map(t=>new Ue(t)))}static U32(e){return new n(e.map(t=>new ze(t)))}static U64(e){return new n(e.map(t=>new $(t)))}static U128(e){return new n(e.map(t=>new ke(t)))}static U256(e){return new n(e.map(t=>new Se(t)))}static Bool(e){return new n(e.map(t=>new F(t)))}static MoveString(e){return new n(e.map(t=>new v(t)))}serialize(e){e.serializeVector(this.values)}static deserialize(e,t){let r=e.deserializeUleb128AsU32(),i=new Array;for(let o=0;o<r;o+=1)i.push(t.deserialize(e));return new n(i)}},Rn= exports.Serialized =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),this.value=_chunkJQCMXTY7js.v.fromHexInput(e).toUint8Array()}serialize(e){e.serializeBytes(this.value)}serializeForEntryFunction(e){this.serialize(e)}serializeForScriptFunction(e){e.serializeU32AsUleb128(9),this.serialize(e)}static deserialize(e){return new n(e.deserializeBytes())}toMoveVector(e){let t=new C(this.bcsToBytes());t.deserializeUleb128AsU32();let r=t.deserializeVector(e);return new S(r)}},v= exports.MoveString =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),this.value=e}serialize(e){e.serializeStr(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let r=new TextEncoder().encode(this.value);S.U8(r).serializeForScriptFunction(e)}static deserialize(e){return new n(e.deserializeStr())}},ne= exports.MoveOption =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),typeof e<"u"&&e!==null?this.vec=new S([e]):this.vec=new S([]),[this.value]=this.vec.values}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}unwrap(){if(this.isSome())return this.vec.values[0];throw new Error("Called unwrap on a MoveOption with no value")}isSome(){return this.vec.values.length===1}serialize(e){this.vec.serialize(e)}static U8(e){return new n(e!=null?new Z(e):void 0)}static U16(e){return new n(e!=null?new Ue(e):void 0)}static U32(e){return new n(e!=null?new ze(e):void 0)}static U64(e){return new n(e!=null?new $(e):void 0)}static U128(e){return new n(e!=null?new ke(e):void 0)}static U256(e){return new n(e!=null?new Se(e):void 0)}static Bool(e){return new n(e!=null?new F(e):void 0)}static MoveString(e){return new n(e!=null?new v(e):void 0)}static deserialize(e,t){let r=S.deserialize(e,t);return new n(r.values[0])}};var _sha3 = require('@noble/hashes/sha3');var bt=class bt extends _chunkJQCMXTY7js.x{constructor(e){super();let{data:t}=e,r=_chunkJQCMXTY7js.v.fromHexInput(t);if(r.toUint8Array().length!==bt.LENGTH)throw new Error(`Authentication Key length should be ${bt.LENGTH}`);this.data=r}serialize(e){e.serializeFixedBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeFixedBytes(bt.LENGTH);return new bt({data:t})}toUint8Array(){return this.data.toUint8Array()}static fromSchemeAndBytes(e){let{scheme:t,input:r}=e,i=_chunkJQCMXTY7js.v.fromHexInput(r).toUint8Array(),o=new Uint8Array([...i,t]),s=_sha3.sha3_256.create();s.update(o);let a=s.digest();return new bt({data:a})}static fromPublicKeyAndScheme(e){let{publicKey:t}=e;return t.authKey()}static fromPublicKey(e){let{publicKey:t}=e;return t.authKey()}derivedAddress(){return new (0, _chunkJQCMXTY7js.na)(this.data.toUint8Array())}};bt.LENGTH=32;var V=bt;var et=class extends _chunkJQCMXTY7js.x{async verifySignatureAsync(e){return this.verifySignature(e)}toUint8Array(){return this.bcsToBytes()}toString(){let e=this.toUint8Array();return _chunkJQCMXTY7js.v.fromHexInput(e).toString()}},ae= exports.AccountPublicKey =class extends et{};var O=class extends _chunkJQCMXTY7js.x{toUint8Array(){return this.bcsToBytes()}toString(){let e=this.toUint8Array();return _chunkJQCMXTY7js.v.fromHexInput(e).toString()}};var Un=class n extends O{constructor(e){super(),this.value=_chunkJQCMXTY7js.v.fromHexInput(e).toUint8Array()}serialize(e){e.serializeBytes(this.value)}static deserialize(e){return new n(e.deserializeBytes())}},yr= exports.AbstractPublicKey =class extends ae{constructor(e){super(),this.accountAddress=e}authKey(){return new V({data:this.accountAddress.toUint8Array()})}verifySignature(e){throw new Error("This function is not implemented for AbstractPublicKey.")}async verifySignatureAsync(e){throw new Error("This function is not implemented for AbstractPublicKey.")}serialize(e){throw new Error("This function is not implemented for AbstractPublicKey.")}};var _ed25519 = require('@noble/curves/ed25519');var _hmac = require('@noble/hashes/hmac');var _sha512 = require('@noble/hashes/sha512');var _bip39 = require('@scure/bip39'); var ns = _interopRequireWildcard(_bip39);var au=/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'?$/,cu= exports.APTOS_BIP44_REGEX =/^m\/44'\/637'\/[0-9]+'\/[0-9]+\/[0-9]+$/,uu= exports.KeyType =(e=>(e.ED25519="ed25519 seed",e))(uu||{}),rs= exports.HARDENED_OFFSET =2147483648;function is(n){return cu.test(n)}function os(n){return au.test(n)}var bi=(n,e)=>{let t=_hmac.hmac.create(_sha512.sha512,n).update(e).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}},ss= exports.CKDPriv =({key:n,chainCode:e},t)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,t);let i=new Uint8Array(r),o=new Uint8Array([0]),s=new Uint8Array([...o,...n,...i]);return bi(e,s)},du=n=>n.replace(/'/g,""),as= exports.splitPath =n=>n.split("/").slice(1).map(du),mr= exports.mnemonicToSeed =n=>{let e=n.trim().split(/\s+/).map(t=>t.toLowerCase()).join(" ");return ns.mnemonicToSeedSync(e)};var zn=class zn{static formatPrivateKey(e,t){let r=zn.AIP80_PREFIXES[t],i=e;return typeof i=="string"&&i.startsWith(r)&&(i=i.split("-")[2]),`${r}${_chunkJQCMXTY7js.v.fromHexInput(i).toString()}`}static parseHexInput(e,t,r){let i,o=zn.AIP80_PREFIXES[t];if(typeof e=="string")if(!r&&!e.startsWith(o))i=_chunkJQCMXTY7js.v.fromHexInput(e),r!==!1&&console.warn("[Aptos SDK] It is recommended that private keys are AIP-80 compliant (https://github.com/aptos-foundation/AIPs/blob/main/aips/aip-80.md). You can fix the private key by formatting it with `PrivateKey.formatPrivateKey(privateKey: string, type: 'ed25519' | 'secp256k1'): string`.");else if(e.startsWith(o))i=_chunkJQCMXTY7js.v.fromHexString(e.split("-")[2]);else throw r?new Error("Invalid HexString input while parsing private key. Must AIP-80 compliant string."):new Error("Invalid HexString input while parsing private key.");else i=_chunkJQCMXTY7js.v.fromHexInput(e);return i}};zn.AIP80_PREFIXES={ed25519:"ed25519-priv-",secp256k1:"secp256k1-priv-",secp256r1:"secp256r1-priv-"};var Pe=zn;var _jwtdecode = require('jwt-decode');var Tt=class n extends et{constructor(e){super();let t=e.constructor.name;switch(t){case E.name:this.publicKey=e,this.variant=0;break;default:throw new Error(`Unsupported key for EphemeralPublicKey - ${t}`)}}verifySignature(e){let{message:t,signature:r}=e;return this.publicKey.verifySignature({message:t,signature:r.signature})}async verifySignatureAsync(e){return this.verifySignature(e)}serialize(e){if(this.publicKey instanceof E)e.serializeU32AsUleb128(0),this.publicKey.serialize(e);else throw new Error("Unknown public key type")}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return new n(E.deserialize(e));default:throw new Error(`Unknown variant index for EphemeralPublicKey: ${t}`)}}static isPublicKey(e){return e instanceof n}},Le= exports.EphemeralSignature =class n extends O{constructor(e){super();let t=e.constructor.name;switch(t){case R.name:this.signature=e;break;default:throw new Error(`Unsupported signature for EphemeralSignature - ${t}`)}}static fromHex(e){let t=_chunkJQCMXTY7js.v.fromHexInput(e),r=new C(t.toUint8Array());return n.deserialize(r)}serialize(e){if(this.signature instanceof R)e.serializeU32AsUleb128(0),this.signature.serialize(e);else throw new Error("Unknown signature type")}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return new n(R.deserialize(e));default:throw new Error(`Unknown variant index for EphemeralSignature: ${t}`)}}};var _poseidonlite = require('poseidon-lite');var Ti=[_poseidonlite.poseidon1,_poseidonlite.poseidon2,_poseidonlite.poseidon3,_poseidonlite.poseidon4,_poseidonlite.poseidon5,_poseidonlite.poseidon6,_poseidonlite.poseidon7,_poseidonlite.poseidon8,_poseidonlite.poseidon9,_poseidonlite.poseidon10,_poseidonlite.poseidon11,_poseidonlite.poseidon12,_poseidonlite.poseidon13,_poseidonlite.poseidon14,_poseidonlite.poseidon15,_poseidonlite.poseidon16],us=31,xu=16,cs=(xu-1)*us;function qe(n,e){let r=new TextEncoder().encode(n);return vu(r,e)}function vu(n,e){if(n.length>e)throw new Error(`Inputted bytes of length ${n} is longer than ${e}`);let t=kn(n,e);return Kt(t)}function Cu(n,e){if(n.length>e)throw new Error(`Input bytes of length ${n} is longer than ${e}`);let t=Uu(n,e);return Ku(t)}function kn(n,e){if(n.length>e)throw new Error(`Input bytes of length ${n} is longer than ${e}`);return Cu(n,e).concat([BigInt(n.length)])}function Ku(n){if(n.length>cs)throw new Error(`Can't pack more than ${cs}.  Was given ${n.length} bytes`);return Ru(n,us).map(e=>Ct(e))}function Ru(n,e){let t=[];for(let r=0;r<n.length;r+=e)t.push(n.subarray(r,r+e));return t}function Ct(n){let e=BigInt(0);for(let t=n.length-1;t>=0;t-=1)e=e<<BigInt(8)|BigInt(n[t]);return e}function wi(n,e){let t=BigInt(n),r=new Uint8Array(e);for(let i=0;i<e;i+=1)r[i]=Number(t&BigInt(255)),t>>=BigInt(8);return r}function Uu(n,e){if(e<n.length)throw new Error("Padded size must be greater than or equal to the input array size.");let t=new Uint8Array(e);t.set(n);for(let r=n.length;r<e;r+=1)t[r]=0;return t}function Kt(n){if(n.length>Ti.length)throw new Error(`Unable to hash input of length ${n.length}.  Max input length is ${Ti.length}`);return Ti[n.length-1](n)}var fr=class extends _chunkJQCMXTY7js.x{};var ds="5.2.0";var ps={mainnet:"https://api.mainnet.aptoslabs.com/v1/graphql",testnet:"https://api.testnet.aptoslabs.com/v1/graphql",devnet:"https://api.devnet.aptoslabs.com/v1/graphql",shelbynet:"https://api.shelbynet.shelby.xyz/v1/graphql",netna:"https://api.netna.staging.aptoslabs.com/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},ls= exports.NetworkToNodeAPI ={mainnet:"https://api.mainnet.aptoslabs.com/v1",testnet:"https://api.testnet.aptoslabs.com/v1",devnet:"https://api.devnet.aptoslabs.com/v1",shelbynet:"https://api.shelbynet.shelby.xyz/v1",netna:"https://api.netna.staging.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},gs= exports.NetworkToFaucetAPI ={devnet:"https://faucet.devnet.aptoslabs.com",shelbynet:"https://faucet.shelbynet.shelby.xyz",netna:"https://faucet-dev-netna-us-central1-410192433417.us-central1.run.app",local:"http://127.0.0.1:8081"},Si= exports.NetworkToPepperAPI ={mainnet:"https://api.mainnet.aptoslabs.com/keyless/pepper/v0",testnet:"https://api.testnet.aptoslabs.com/keyless/pepper/v0",devnet:"https://api.devnet.aptoslabs.com/keyless/pepper/v0",shelbynet:"https://api.shelbynet.aptoslabs.com/keyless/pepper/v0",netna:"https://api.devnet.aptoslabs.com/keyless/pepper/v0",local:"https://api.devnet.aptoslabs.com/keyless/pepper/v0"},Pi= exports.NetworkToProverAPI ={mainnet:"https://api.mainnet.aptoslabs.com/keyless/prover/v0",testnet:"https://api.testnet.aptoslabs.com/keyless/prover/v0",devnet:"https://api.devnet.aptoslabs.com/keyless/prover/v0",shelbynet:"https://api.shelbynet.aptoslabs.com/keyless/prover/v0",netna:"https://api.devnet.aptoslabs.com/keyless/prover/v0",local:"https://api.devnet.aptoslabs.com/keyless/prover/v0"},Ei= exports.Network =(a=>(a.MAINNET="mainnet",a.TESTNET="testnet",a.DEVNET="devnet",a.SHELBYNET="shelbynet",a.NETNA="netna",a.LOCAL="local",a.CUSTOM="custom",a))(Ei||{}),_i= exports.NetworkToChainId ={mainnet:1,testnet:2,local:4},lg= exports.NetworkToNetworkName ={mainnet:"mainnet",testnet:"testnet",devnet:"devnet",shelbynet:"shelbynet",netna:"netna",local:"local",custom:"custom"};var en=(o=>(o.FULLNODE="Fullnode",o.INDEXER="Indexer",o.FAUCET="Faucet",o.PEPPER="Pepper",o.PROVER="Prover",o))(en||{}),ys= exports.DEFAULT_MAX_GAS_AMOUNT =2e5,ms= exports.DEFAULT_TXN_EXP_SEC_FROM_NOW =20,Ar= exports.DEFAULT_TXN_TIMEOUT_SEC =20,Rt= exports.APTOS_COIN ="0x1::aptos_coin::AptosCoin",fs= exports.APTOS_FA ="0x000000000000000000000000000000000000000000000000000000000000000a",As= exports.RAW_TRANSACTION_SALT ="APTOS::RawTransaction",Ii= exports.RAW_TRANSACTION_WITH_DATA_SALT ="APTOS::RawTransactionWithData",hs= exports.ACCOUNT_ABSTRACTION_SIGNING_DATA_SALT ="APTOS::AASigningData",wt= exports.ProcessorType =(d=>(d.ACCOUNT_RESTORATION_PROCESSOR="account_restoration_processor",d.ACCOUNT_TRANSACTION_PROCESSOR="account_transactions_processor",d.DEFAULT="default_processor",d.EVENTS_PROCESSOR="events_processor",d.FUNGIBLE_ASSET_PROCESSOR="fungible_asset_processor",d.STAKE_PROCESSOR="stake_processor",d.TOKEN_V2_PROCESSOR="token_v2_processor",d.USER_TRANSACTION_PROCESSOR="user_transaction_processor",d.OBJECT_PROCESSOR="objects_processor",d))(wt||{}),bs= exports.FIREBASE_AUTH_ISS_PATTERN =/^https:\/\/securetoken\.google\.com\/[a-zA-Z0-9-_]+$/;function Ts(n,e){let t=e.bcsToBytes(),r=new C(t);return n.deserialize(r)}var zu=(s=>(s[s.API_ERROR=0]="API_ERROR",s[s.EXTERNAL_API_ERROR=1]="EXTERNAL_API_ERROR",s[s.SESSION_EXPIRED=2]="SESSION_EXPIRED",s[s.INVALID_STATE=3]="INVALID_STATE",s[s.INVALID_SIGNATURE=4]="INVALID_SIGNATURE",s[s.UNKNOWN=5]="UNKNOWN",s))(zu||{}),ku= exports.KeylessErrorResolutionTip =(d=>(d.REAUTHENTICATE="Re-authentiate to continue using your keyless account",d.REAUTHENTICATE_UNSURE="Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support",d.UPDATE_REQUEST_PARAMS="Update the invalid request parameters and reauthenticate.",d.RATE_LIMIT_EXCEEDED="Cache the keyless account and reuse it to avoid making too many requests.  Keyless accounts are valid until either the EphemeralKeyPair expires, when the JWK is rotated, or when the proof verifying key is changed, whichever comes soonest.",d.SERVER_ERROR="Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",d.CALL_PRECHECK="Call `await account.checkKeylessAccountValidity()` to wait for asyncronous changes and check for account validity before signing or serializing.",d.REINSTANTIATE="Try instantiating the account again.  Avoid manipulating the account object directly",d.JOIN_SUPPORT_GROUP="For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",d.UNKNOWN="Error unknown. For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",d))(ku||{}),hr= exports.KeylessErrorType =(f=>(f[f.EPHEMERAL_KEY_PAIR_EXPIRED=0]="EPHEMERAL_KEY_PAIR_EXPIRED",f[f.PROOF_NOT_FOUND=1]="PROOF_NOT_FOUND",f[f.ASYNC_PROOF_FETCH_FAILED=2]="ASYNC_PROOF_FETCH_FAILED",f[f.INVALID_PROOF_VERIFICATION_FAILED=3]="INVALID_PROOF_VERIFICATION_FAILED",f[f.INVALID_PROOF_VERIFICATION_KEY_NOT_FOUND=4]="INVALID_PROOF_VERIFICATION_KEY_NOT_FOUND",f[f.INVALID_JWT_SIG=5]="INVALID_JWT_SIG",f[f.INVALID_JWT_JWK_NOT_FOUND=6]="INVALID_JWT_JWK_NOT_FOUND",f[f.INVALID_JWT_ISS_NOT_RECOGNIZED=7]="INVALID_JWT_ISS_NOT_RECOGNIZED",f[f.INVALID_JWT_FEDERATED_ISS_NOT_SUPPORTED=8]="INVALID_JWT_FEDERATED_ISS_NOT_SUPPORTED",f[f.INVALID_TW_SIG_VERIFICATION_FAILED=9]="INVALID_TW_SIG_VERIFICATION_FAILED",f[f.INVALID_TW_SIG_PUBLIC_KEY_NOT_FOUND=10]="INVALID_TW_SIG_PUBLIC_KEY_NOT_FOUND",f[f.INVALID_EXPIRY_HORIZON=11]="INVALID_EXPIRY_HORIZON",f[f.JWT_PARSING_ERROR=12]="JWT_PARSING_ERROR",f[f.JWK_FETCH_FAILED=13]="JWK_FETCH_FAILED",f[f.JWK_FETCH_FAILED_FEDERATED=14]="JWK_FETCH_FAILED_FEDERATED",f[f.RATE_LIMIT_EXCEEDED=15]="RATE_LIMIT_EXCEEDED",f[f.PEPPER_SERVICE_INTERNAL_ERROR=16]="PEPPER_SERVICE_INTERNAL_ERROR",f[f.PEPPER_SERVICE_BAD_REQUEST=17]="PEPPER_SERVICE_BAD_REQUEST",f[f.PEPPER_SERVICE_OTHER=18]="PEPPER_SERVICE_OTHER",f[f.PROVER_SERVICE_INTERNAL_ERROR=19]="PROVER_SERVICE_INTERNAL_ERROR",f[f.PROVER_SERVICE_BAD_REQUEST=20]="PROVER_SERVICE_BAD_REQUEST",f[f.PROVER_SERVICE_OTHER=21]="PROVER_SERVICE_OTHER",f[f.FULL_NODE_CONFIG_LOOKUP_ERROR=22]="FULL_NODE_CONFIG_LOOKUP_ERROR",f[f.FULL_NODE_VERIFICATION_KEY_LOOKUP_ERROR=23]="FULL_NODE_VERIFICATION_KEY_LOOKUP_ERROR",f[f.FULL_NODE_JWKS_LOOKUP_ERROR=24]="FULL_NODE_JWKS_LOOKUP_ERROR",f[f.FULL_NODE_OTHER=25]="FULL_NODE_OTHER",f[f.SIGNATURE_TYPE_INVALID=26]="SIGNATURE_TYPE_INVALID",f[f.SIGNATURE_EXPIRED=27]="SIGNATURE_EXPIRED",f[f.MAX_EXPIRY_HORIZON_EXCEEDED=28]="MAX_EXPIRY_HORIZON_EXCEEDED",f[f.EPHEMERAL_SIGNATURE_VERIFICATION_FAILED=29]="EPHEMERAL_SIGNATURE_VERIFICATION_FAILED",f[f.TRAINING_WHEELS_SIGNATURE_MISSING=30]="TRAINING_WHEELS_SIGNATURE_MISSING",f[f.TRAINING_WHEELS_SIGNATURE_VERIFICATION_FAILED=31]="TRAINING_WHEELS_SIGNATURE_VERIFICATION_FAILED",f[f.PROOF_VERIFICATION_FAILED=32]="PROOF_VERIFICATION_FAILED",f[f.UNKNOWN=33]="UNKNOWN",f))(hr||{}),ws={0:["The ephemeral keypair has expired.",2,"Re-authentiate to continue using your keyless account"],1:["The required proof could not be found.",3,"Call `await account.checkKeylessAccountValidity()` to wait for asyncronous changes and check for account validity before signing or serializing."],2:["The required proof failed to fetch.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],3:["The provided proof is invalid.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],4:["The verification key used to authenticate was updated.",2,"Re-authentiate to continue using your keyless account"],5:["The JWK was found, but JWT failed verification",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],6:["The JWK required to verify the JWT could not be found. The JWK may have been rotated out.",2,"Re-authentiate to continue using your keyless account"],7:["The JWT issuer is not recognized.",3,"Update the invalid request parameters and reauthenticate."],8:["The JWT issuer is not supported by the Federated Keyless ",0,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],9:["The training wheels signature is invalid.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],10:["The public key used to verify the training wheels signature was not found.",2,"Re-authentiate to continue using your keyless account"],11:["The expiry horizon is invalid.",2,"Re-authentiate to continue using your keyless account"],13:["Failed to fetch JWKS.",1,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],14:["Failed to fetch JWKS for Federated Keyless provider.",1,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],15:["Rate limit exceeded. Too many requests in a short period.",0,"Cache the keyless account and reuse it to avoid making too many requests.  Keyless accounts are valid until either the EphemeralKeyPair expires, when the JWK is rotated, or when the proof verifying key is changed, whichever comes soonest."],16:["Internal error from Pepper service.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],17:["Bad request sent to Pepper service.",0,"Update the invalid request parameters and reauthenticate."],18:["Unknown error from Pepper service.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],19:["Internal error from Prover service.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],20:["Bad request sent to Prover service.",0,"Update the invalid request parameters and reauthenticate."],21:["Unknown error from Prover service.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],12:["Error when parsing JWT. This should never happen. Join https://t.me/+h5CN-W35yUFiYzkx for support",3,"Try instantiating the account again.  Avoid manipulating the account object directly"],22:["Error when looking up on-chain keyless configuration.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],23:["Error when looking up on-chain verification key.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],24:["Error when looking up on-chain JWKS.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],25:["Unknown error from full node.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],26:["The signature is not a valid Keyless signature.",4,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],27:["The ephemeral key pair used to sign the message has expired.",4,"Re-authentiate to continue using your keyless account"],28:["The expiry horizon on the signature exceeds the maximum allowed value.",4,"Re-authentiate to continue using your keyless account"],29:["Failed to verify the ephemeral signature with the ephemeral public key.",4,"Re-authentiate to continue using your keyless account"],30:["The training wheels signature is missing but is required by the Keyless configuration.",4,"Re-authentiate to continue using your keyless account"],31:["Failed to verify the training wheels signature with the training wheels public key.",4,"Re-authentiate to continue using your keyless account"],32:["The proof verification failed.",4,"Re-authentiate to continue using your keyless account"],33:["An unknown error has occurred.",5,"Error unknown. For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"]},_= exports.KeylessError =class n extends Error{constructor(e){let{innerError:t,category:r,resolutionTip:i,type:o,message:s=ws[o][0],details:a}=e;super(s),this.name="KeylessError",this.innerError=t,this.category=r,this.resolutionTip=i,this.type=o,this.details=a,this.message=n.constructMessage(s,i,t,a)}static constructMessage(e,t,r,i){let o=`
Message: ${e}`;return i&&(o+=`
Details: ${i}`),r instanceof Ee?o+=`
AptosApiError: ${r.message}`:r!==void 0&&(o+=`
Error: ${_chunkJQCMXTY7js.ta.call(void 0, r)}`),o+=`
KeylessErrorResolutionTip: ${t}`,o}static fromErrorType(e){let{error:t,type:r,details:i}=e,[o,s,a]=ws[r];return new n({message:o,details:i,innerError:t,category:s,resolutionTip:a,type:r})}},Ee= exports.AptosApiError =class extends Error{constructor({apiType:e,aptosRequest:t,aptosResponse:r}){super(Nu({apiType:e,aptosRequest:t,aptosResponse:r})),this.name="AptosApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.data=r.data,this.request=t}};function Nu({apiType:n,aptosRequest:e,aptosResponse:t}){let r=_optionalChain([t, 'access', _2 => _2.headers, 'optionalAccess', _3 => _3.traceparent, 'optionalAccess', _4 => _4.split, 'call', _5 => _5("-"), 'access', _6 => _6[1]]),i=r?`(trace_id:${r}) `:"",o=`Request to [${n}]: ${e.method} ${_nullishCoalesce(t.url, () => (e.url))} ${i}failed with`;return n==="Indexer"&&_optionalChain([t, 'access', _7 => _7.data, 'optionalAccess', _8 => _8.errors, 'optionalAccess', _9 => _9[0], 'optionalAccess', _10 => _10.message])!=null?`${o}: ${t.data.errors[0].message}`:_optionalChain([t, 'access', _11 => _11.data, 'optionalAccess', _12 => _12.message])!=null&&_optionalChain([t, 'access', _13 => _13.data, 'optionalAccess', _14 => _14.error_code])!=null?`${o}: ${JSON.stringify(t.data)}`:`${o} status: ${t.statusText}(code:${t.status}) and response body: ${Du(t.data)}`}var xi=400;function Du(n){let e=JSON.stringify(n);return e.length<=xi?e:`truncated(original_size:${e.length}): ${e.slice(0,xi/2)}...${e.slice(-xi/2)}`}async function Fu(n,e){let{url:t,method:r,body:i,contentType:o,params:s,overrides:a,originMethod:c}=n,d={..._optionalChain([a, 'optionalAccess', _15 => _15.HEADERS]),"x-aptos-client":`aptos-typescript-sdk/${ds}`,"content-type":_nullishCoalesce(o, () => ("application/json")),"x-aptos-typescript-sdk-origin-method":c};return _optionalChain([a, 'optionalAccess', _16 => _16.AUTH_TOKEN])&&(d.Authorization=`Bearer ${_optionalChain([a, 'optionalAccess', _17 => _17.AUTH_TOKEN])}`),_optionalChain([a, 'optionalAccess', _18 => _18.API_KEY])&&(d.Authorization=`Bearer ${_optionalChain([a, 'optionalAccess', _19 => _19.API_KEY])}`),e.provider({url:t,method:r,body:i,params:s,headers:d,overrides:a,http2:_optionalChain([a, 'optionalAccess', _20 => _20.http2])})}async function br(n,e,t){let{url:r,path:i}=n,o=i?`${r}/${i}`:r,s=await Fu({...n,url:o},e.client),a={status:s.status,statusText:_nullishCoalesce(s.statusText, () => ("No status text provided")),data:s.data,headers:s.headers,config:s.config,request:s.request,url:o};if(a.status===401)throw new Ee({apiType:t,aptosRequest:n,aptosResponse:a});if(t==="Indexer"){let c=a.data;if(c.errors)throw new Ee({apiType:t,aptosRequest:n,aptosResponse:a});a.data=c.data}else if((t==="Pepper"||t==="Prover")&&a.status>=400)throw new Ee({apiType:t,aptosRequest:n,aptosResponse:a});if(a.status>=200&&a.status<300)return a;throw new Ee({apiType:t,aptosRequest:n,aptosResponse:a})}async function Tr(n){let{aptosConfig:e,overrides:t,params:r,contentType:i,acceptType:o,path:s,originMethod:a,type:c}=n,d=e.getRequestUrl(c);return br({url:d,method:"GET",originMethod:a,path:s,contentType:i,acceptType:o,params:r,overrides:{...e.clientConfig,...t}},e,n.type)}async function H(n){let{aptosConfig:e}=n;return Tr({...n,type:"Fullnode",overrides:{...e.clientConfig,...e.fullnodeConfig,...n.overrides,HEADERS:{..._optionalChain([e, 'access', _21 => _21.clientConfig, 'optionalAccess', _22 => _22.HEADERS]),..._optionalChain([e, 'access', _23 => _23.fullnodeConfig, 'optionalAccess', _24 => _24.HEADERS])}}})}async function Bg(n){return Tr({...n,type:"Pepper"})}async function wr(n){let e=new Array(0),t,r=n.params;do{let i=await Tr({type:"Fullnode",aptosConfig:n.aptosConfig,originMethod:n.originMethod,path:n.path,params:r,overrides:n.overrides});t=i.headers["x-aptos-cursor"],delete i.headers,e.push(...i.data),r.start=t}while(t!=null);return e}async function vi(n){let e=new Array(0),t,r=n.params,i=r.limit;do{let{response:o,cursor:s}=await Sr({...n});if(t=s,e.push(...o.data),_optionalChain([n, 'optionalAccess', _25 => _25.params])&&(n.params.start=t),i!==void 0){let a=i-e.length;if(a<=0)break;r.limit=a}}while(t!=null);return e}async function Sr(n){let e,t={};typeof _optionalChain([n, 'access', _26 => _26.params, 'optionalAccess', _27 => _27.cursor])=="string"&&(t.start=n.params.cursor),typeof _optionalChain([n, 'access', _28 => _28.params, 'optionalAccess', _29 => _29.limit])=="number"&&(t.limit=n.params.limit);let r=await Tr({type:"Fullnode",aptosConfig:n.aptosConfig,originMethod:n.originMethod,path:n.path,params:t,overrides:n.overrides});return e=r.headers["x-aptos-cursor"],{response:r,cursor:e}}async function Nn(n){let{type:e,originMethod:t,path:r,body:i,acceptType:o,contentType:s,params:a,aptosConfig:c,overrides:d}=n,m=c.getRequestUrl(e);return br({url:m,method:"POST",originMethod:t,path:r,body:i,contentType:s,acceptType:o,params:a,overrides:d},c,n.type)}async function St(n){let{aptosConfig:e}=n;return Nn({...n,type:"Fullnode",overrides:{...e.clientConfig,...e.fullnodeConfig,...n.overrides,HEADERS:{..._optionalChain([e, 'access', _30 => _30.clientConfig, 'optionalAccess', _31 => _31.HEADERS]),..._optionalChain([e, 'access', _32 => _32.fullnodeConfig, 'optionalAccess', _33 => _33.HEADERS])}}})}async function Ss(n){let{aptosConfig:e}=n;return Nn({...n,type:"Indexer",overrides:{...e.clientConfig,...e.indexerConfig,...n.overrides,HEADERS:{..._optionalChain([e, 'access', _34 => _34.clientConfig, 'optionalAccess', _35 => _35.HEADERS]),..._optionalChain([e, 'access', _36 => _36.indexerConfig, 'optionalAccess', _37 => _37.HEADERS])}}})}async function Ps(n){let{aptosConfig:e}=n,t={...e,clientConfig:{...e.clientConfig}};return  _optionalChainDelete([t, 'optionalAccess', _38 => _38.clientConfig, 'optionalAccess', _39 => delete _39.API_KEY]),Nn({...n,type:"Faucet",overrides:{...t.clientConfig,...t.faucetConfig,...n.overrides,HEADERS:{..._optionalChain([t, 'access', _40 => _40.clientConfig, 'optionalAccess', _41 => _41.HEADERS]),..._optionalChain([t, 'access', _42 => _42.faucetConfig, 'optionalAccess', _43 => _43.HEADERS])}}})}async function Es(n){return Nn({...n,type:"Pepper"})}async function _s(n){return Nn({...n,type:"Prover"})}var Ci=new Map;function $e(n,e,t){return async(...r)=>{if(Ci.has(e)){let{value:o,timestamp:s}=Ci.get(e);if(t===void 0||Date.now()-s<=t)return o}let i=await n(...r);return Ci.set(e,{value:i,timestamp:Date.now()}),i}}var _bn254 = require('@noble/curves/bn254');var _utils = require('@noble/curves/abstract/utils');var _jsbase64 = require('js-base64');var Mu=1e7,Ki= exports.MAX_AUD_VAL_BYTES =120,Vu= exports.MAX_UID_KEY_BYTES =30,Hu= exports.MAX_UID_VAL_BYTES =330,Lu= exports.MAX_ISS_VAL_BYTES =120,qu= exports.MAX_EXTRA_FIELD_BYTES =350,$u= exports.MAX_JWT_HEADER_B64_BYTES =300,Wu= exports.MAX_COMMITED_EPK_BYTES =93,We=class We extends ae{constructor(e,t){super();let r=_chunkJQCMXTY7js.v.fromHexInput(t).toUint8Array();if(r.length!==We.ID_COMMITMENT_LENGTH)throw new Error(`Id Commitment length in bytes should be ${We.ID_COMMITMENT_LENGTH}`);this.iss=e,this.idCommitment=r}authKey(){let e=new _chunkJQCMXTY7js.y;return e.serializeU32AsUleb128(3),e.serializeFixedBytes(this.bcsToBytes()),V.fromSchemeAndBytes({scheme:2,input:e.toUint8Array()})}verifySignature(e){try{return Pr({...e,publicKey:this}),!0}catch(t){if(t instanceof _)return!1;throw t}}async verifySignatureAsync(e){return Di({...e,publicKey:this})}serialize(e){e.serializeStr(this.iss),e.serializeBytes(this.idCommitment)}static deserialize(e){let t=e.deserializeStr(),r=e.deserializeBytes();return new We(t,r)}static load(e){let t=e.deserializeStr(),r=e.deserializeBytes();return new We(t,r)}static isPublicKey(e){return e instanceof We}static create(e){return Is(e),new We(e.iss,Is(e))}static fromJwtAndPepper(e){let{jwt:t,pepper:r,uidKey:i="sub"}=e,o=_jwtdecode.jwtDecode.call(void 0, t);if(typeof o.iss!="string")throw new Error("iss was not found");if(typeof o.aud!="string")throw new Error("aud was not found or an array of values");let s=o[i];return We.create({iss:o.iss,uidKey:i,uidVal:s,aud:o.aud,pepper:r})}static isInstance(e){return"iss"in e&&typeof e.iss=="string"&&"idCommitment"in e&&e.idCommitment instanceof Uint8Array}};We.ID_COMMITMENT_LENGTH=32;var K=We;async function Di(n){let{aptosConfig:e,publicKey:t,message:r,signature:i,jwk:o,keylessConfig:s=await rn({aptosConfig:e}),options:a}=n;try{if(!(i instanceof ce))throw _.fromErrorType({type:26,details:"Not a keyless signature"});return Pr({message:r,publicKey:t,signature:i,jwk:o||await Fi({aptosConfig:e,publicKey:t,kid:i.getJwkKid()}),keylessConfig:s}),!0}catch(c){if(_optionalChain([a, 'optionalAccess', _44 => _44.throwErrorWithReason]))throw c;return!1}}function Pr(n){let{publicKey:e,message:t,signature:r,keylessConfig:i,jwk:o}=n,{verificationKey:s,maxExpHorizonSecs:a,trainingWheelsPubkey:c}=i;if(!(r instanceof ce))throw _.fromErrorType({type:26,details:"Not a keyless signature"});if(!(r.ephemeralCertificate.signature instanceof me))throw _.fromErrorType({type:26,details:"Unsupported ephemeral certificate variant"});let d=r.ephemeralCertificate.signature;if(!(d.proof.proof instanceof Pt))throw _.fromErrorType({type:26,details:"Unsupported proof variant for ZeroKnowledgeSig"});let m=d.proof.proof;if(r.expiryDateSecs<_chunkJQCMXTY7js.ua.call(void 0, ))throw _.fromErrorType({type:27,details:"The expiryDateSecs is in the past"});if(d.expHorizonSecs>a)throw _.fromErrorType({type:28});if(!r.ephemeralPublicKey.verifySignature({message:t,signature:r.ephemeralSignature}))throw _.fromErrorType({type:29});let A=Qu({publicKey:e,signature:r,jwk:o,keylessConfig:i});if(!s.verifyProof({publicInputsHash:A,groth16Proof:m}))throw _.fromErrorType({type:32});if(c){if(!d.trainingWheelsSignature)throw _.fromErrorType({type:30});let p=new Ui(m,A);if(!c.verifySignature({message:p.hash(),signature:d.trainingWheelsSignature}))throw _.fromErrorType({type:31})}}function Qu(n){let{publicKey:e,signature:t,jwk:r,keylessConfig:i}=n,o=e instanceof K?e:e.keylessPublicKey;if(!(t.ephemeralCertificate.signature instanceof me))throw new Error("Signature is not a ZeroKnowledgeSig");let s=t.ephemeralCertificate.signature,a=[];return a.push(...kn(t.ephemeralPublicKey.toUint8Array(),i.maxCommitedEpkBytes)),a.push(Ct(o.idCommitment)),a.push(t.expiryDateSecs),a.push(s.expHorizonSecs),a.push(qe(o.iss,i.maxIssValBytes)),s.extraField?(a.push(1n),a.push(qe(s.extraField,i.maxExtraFieldBytes))):(a.push(0n),a.push(qe(" ",i.maxExtraFieldBytes))),a.push(qe(_jsbase64.encode.call(void 0, t.jwtHeader,!0)+".",i.maxJwtHeaderB64Bytes)),a.push(r.toScalar()),s.overrideAudVal?(a.push(qe(s.overrideAudVal,Ki)),a.push(1n)):(a.push(qe("",Ki)),a.push(0n)),Kt(a)}async function Fi(n){let{aptosConfig:e,publicKey:t,kid:r}=n,i=t instanceof K?t:t.keylessPublicKey,{iss:o}=i,s,a=t instanceof L?t.jwkAddress:void 0;try{s=await Xu({aptosConfig:e,jwkAddr:a})}catch(m){throw _.fromErrorType({type:24,error:m,details:`Failed to fetch ${a?"Federated":"Patched"}JWKs ${a?`for address ${a}`:"0x1"}`})}let c=s.get(o);if(c===void 0)throw _.fromErrorType({type:7,details:`JWKs for issuer ${o} not found.`});let d=c.find(m=>m.kid===r);if(d===void 0)throw _.fromErrorType({type:6,details:`JWK with kid '${r}' for issuer '${o}' not found.`});return d}function Is(n){let{uidKey:e,uidVal:t,aud:r,pepper:i}=n,o=[Ct(_chunkJQCMXTY7js.v.fromHexInput(i).toUint8Array()),qe(r,Ki),qe(t,Hu),qe(e,Vu)];return wi(Kt(o),K.ID_COMMITMENT_LENGTH)}var ce=class n extends O{constructor(e){super();let{jwtHeader:t,ephemeralCertificate:r,expiryDateSecs:i,ephemeralPublicKey:o,ephemeralSignature:s}=e;this.jwtHeader=t,this.ephemeralCertificate=r,this.expiryDateSecs=i,this.ephemeralPublicKey=o,this.ephemeralSignature=s}getJwkKid(){return Zu(this.jwtHeader).kid}serialize(e){this.ephemeralCertificate.serialize(e),e.serializeStr(this.jwtHeader),e.serializeU64(this.expiryDateSecs),this.ephemeralPublicKey.serialize(e),this.ephemeralSignature.serialize(e)}static deserialize(e){let t=tn.deserialize(e),r=e.deserializeStr(),i=e.deserializeU64(),o=Tt.deserialize(e),s=Le.deserialize(e);return new n({jwtHeader:r,expiryDateSecs:Number(i),ephemeralCertificate:t,ephemeralPublicKey:o,ephemeralSignature:s})}static getSimulationSignature(){return new n({jwtHeader:"{}",ephemeralCertificate:new tn(new me({proof:new nn(new Pt({a:new Uint8Array(32),b:new Uint8Array(64),c:new Uint8Array(32)}),0),expHorizonSecs:0}),0),expiryDateSecs:0,ephemeralPublicKey:new Tt(new E(new Uint8Array(32))),ephemeralSignature:new Le(new R(new Uint8Array(64)))})}static isSignature(e){return e instanceof n}},tn= exports.EphemeralCertificate =class n extends O{constructor(e,t){super(),this.signature=e,this.variant=t}toUint8Array(){return this.signature.toUint8Array()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return new n(me.deserialize(e),t);default:throw new Error(`Unknown variant index for EphemeralCertificate: ${t}`)}}},Dn=class Dn extends _chunkJQCMXTY7js.x{constructor(e){if(super(),this.data=_chunkJQCMXTY7js.v.fromHexInput(e).toUint8Array(),this.data.length!==32)throw new Error("Input needs to be 32 bytes")}serialize(e){e.serializeFixedBytes(this.data)}static deserialize(e){let t=e.deserializeFixedBytes(32);return new Dn(t)}toArray(){let e=this.toProjectivePoint();return[e.x.toString(),e.y.toString(),e.pz.toString()]}toProjectivePoint(){let e=new Uint8Array(this.data);e.reverse();let t=(e[0]&128)>>7,{Fp:r}=_bn254.bn254.fields,i=r.create(Ri(e)),o=r.sqrt(r.add(r.pow(i,3n),Dn.B)),s=r.neg(o),a=o>s==(t===1)?o:s;return _bn254.bn254.G1.ProjectivePoint.fromAffine({x:i,y:a})}};Dn.B=_bn254.bn254.fields.Fp.create(3n);var tt=Dn;function Ri(n){if(n.length!==32)throw new Error("Input should be 32 bytes");let e=new Uint8Array(n);return e[0]=e[0]&63,_utils.bytesToNumberBE.call(void 0, e)}var Fn=class Fn extends _chunkJQCMXTY7js.x{constructor(e){if(super(),this.data=_chunkJQCMXTY7js.v.fromHexInput(e).toUint8Array(),this.data.length!==64)throw new Error("Input needs to be 64 bytes")}serialize(e){e.serializeFixedBytes(this.data)}static deserialize(e){let t=e.deserializeFixedBytes(64);return new Fn(t)}toArray(){let e=this.toProjectivePoint();return[[e.x.c0.toString(),e.x.c1.toString()],[e.y.c0.toString(),e.y.c1.toString()],[e.pz.c0.toString(),e.pz.c1.toString()]]}toProjectivePoint(){let e=new Uint8Array(this.data),t=e.slice(0,32).reverse(),r=e.slice(32,64).reverse(),i=(r[0]&128)>>7,{Fp2:o}=_bn254.bn254.fields,s=o.fromBigTuple([Ri(t),Ri(r)]),a=o.sqrt(o.add(o.pow(s,3n),Fn.B)),c=o.neg(a),m=(a.c1>c.c1||a.c1===c.c1&&a.c0>c.c0)===(i===1)?a:c;return _bn254.bn254.G2.ProjectivePoint.fromAffine({x:s,y:m})}};Fn.B=_bn254.bn254.fields.Fp2.fromBigTuple([19485874751759354771024239261021720505790618469301721065564631296452457478373n,266929791119991161246907387137283842545076965332900288569378510910307636690n]);var Ut=Fn,Pt= exports.Groth16Zkp =class n extends fr{constructor(e){super();let{a:t,b:r,c:i}=e;this.a=new tt(t),this.b=new Ut(r),this.c=new tt(i)}serialize(e){this.a.serialize(e),this.b.serialize(e),this.c.serialize(e)}static deserialize(e){let t=tt.deserialize(e).bcsToBytes(),r=Ut.deserialize(e).bcsToBytes(),i=tt.deserialize(e).bcsToBytes();return new n({a:t,b:r,c:i})}toSnarkJsJson(){return{protocol:"groth16",curve:"bn128",pi_a:this.a.toArray(),pi_b:this.b.toArray(),pi_c:this.c.toArray()}}},Ui= exports.Groth16ProofAndStatement =class n extends _chunkJQCMXTY7js.x{constructor(t,r){super();this.domainSeparator="APTOS::Groth16ProofAndStatement";if(this.proof=t,this.publicInputsHash=typeof r=="bigint"?wi(r,32):_chunkJQCMXTY7js.v.fromHexInput(r).toUint8Array(),this.publicInputsHash.length!==32)throw new Error("Invalid public inputs hash")}serialize(t){this.proof.serialize(t),t.serializeFixedBytes(this.publicInputsHash)}static deserialize(t){return new n(Pt.deserialize(t),t.deserializeFixedBytes(32))}hash(){return Qe(this.bcsToBytes(),this.domainSeparator)}},nn= exports.ZkProof =class n extends _chunkJQCMXTY7js.x{constructor(e,t){super(),this.proof=e,this.variant=t}serialize(e){e.serializeU32AsUleb128(this.variant),this.proof.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return new n(Pt.deserialize(e),t);default:throw new Error(`Unknown variant index for ZkProof: ${t}`)}}},me= exports.ZeroKnowledgeSig =class n extends O{constructor(e){super();let{proof:t,expHorizonSecs:r,trainingWheelsSignature:i,extraField:o,overrideAudVal:s}=e;this.proof=t,this.expHorizonSecs=r,this.trainingWheelsSignature=i,this.extraField=o,this.overrideAudVal=s}static fromBytes(e){return n.deserialize(new C(e))}serialize(e){this.proof.serialize(e),e.serializeU64(this.expHorizonSecs),e.serializeOption(this.extraField),e.serializeOption(this.overrideAudVal),e.serializeOption(this.trainingWheelsSignature)}static deserialize(e){let t=nn.deserialize(e),r=Number(e.deserializeU64()),i=e.deserializeOption("string"),o=e.deserializeOption("string"),s=e.deserializeOption(Le);return new n({proof:t,expHorizonSecs:r,trainingWheelsSignature:s,extraField:i,overrideAudVal:o})}},zi= exports.KeylessConfiguration =class n{constructor(e){let{verificationKey:t,trainingWheelsPubkey:r,maxExpHorizonSecs:i=Mu,maxExtraFieldBytes:o=qu,maxJwtHeaderB64Bytes:s=$u,maxIssValBytes:a=Lu,maxCommitedEpkBytes:c=Wu}=e;this.verificationKey=t,this.maxExpHorizonSecs=i,r&&(this.trainingWheelsPubkey=new Tt(new E(r))),this.maxExtraFieldBytes=o,this.maxJwtHeaderB64Bytes=s,this.maxIssValBytes=a,this.maxCommitedEpkBytes=c}static create(e,t){return new n({verificationKey:new ki({alphaG1:e.alpha_g1,betaG2:e.beta_g2,deltaG2:e.delta_g2,gammaAbcG1:e.gamma_abc_g1,gammaG2:e.gamma_g2}),maxExpHorizonSecs:Number(t.max_exp_horizon_secs),trainingWheelsPubkey:t.training_wheels_pubkey.vec[0],maxExtraFieldBytes:t.max_extra_field_bytes,maxJwtHeaderB64Bytes:t.max_jwt_header_b64_bytes,maxIssValBytes:t.max_iss_val_bytes,maxCommitedEpkBytes:t.max_commited_epk_bytes})}},ki= exports.Groth16VerificationKey =class n{constructor(e){let{alphaG1:t,betaG2:r,deltaG2:i,gammaAbcG1:o,gammaG2:s}=e;this.alphaG1=new tt(t),this.betaG2=new Ut(r),this.deltaG2=new Ut(i),this.gammaAbcG1=[new tt(o[0]),new tt(o[1])],this.gammaG2=new Ut(s)}hash(){let e=new _chunkJQCMXTY7js.y;return this.serialize(e),_sha3.sha3_256.create().update(e.toUint8Array()).digest()}serialize(e){this.alphaG1.serialize(e),this.betaG2.serialize(e),this.deltaG2.serialize(e),this.gammaAbcG1[0].serialize(e),this.gammaAbcG1[1].serialize(e),this.gammaG2.serialize(e)}static fromGroth16VerificationKeyResponse(e){return new n({alphaG1:e.alpha_g1,betaG2:e.beta_g2,deltaG2:e.delta_g2,gammaAbcG1:e.gamma_abc_g1,gammaG2:e.gamma_g2})}verifyProof(e){let{publicInputsHash:t,groth16Proof:r}=e;try{let i=r.a.toProjectivePoint(),o=r.b.toProjectivePoint(),s=r.c.toProjectivePoint(),a=this.alphaG1.toProjectivePoint(),c=this.betaG2.toProjectivePoint(),d=this.gammaG2.toProjectivePoint(),m=this.deltaG2.toProjectivePoint(),A=this.gammaAbcG1.map(At=>At.toProjectivePoint()),{Fp12:p}=_bn254.bn254.fields,g=A[0].add(A[1].multiply(t)),b=_bn254.bn254.pairing(g,d),D=_bn254.bn254.pairing(i,o),q=_bn254.bn254.pairing(a,c),se=_bn254.bn254.pairing(s,m),Ye=p.mul(q,p.mul(b,se));return p.eql(D,Ye)}catch(i){throw _.fromErrorType({type:32,error:i,details:"Error encountered when checking zero knowledge relation"})}}toSnarkJsJson(){return{protocol:"groth16",curve:"bn128",nPublic:1,vk_alpha_1:this.alphaG1.toArray(),vk_beta_2:this.betaG2.toArray(),vk_gamma_2:this.gammaG2.toArray(),vk_delta_2:this.deltaG2.toArray(),IC:this.gammaAbcG1.map(e=>e.toArray())}}};async function rn(n){let{aptosConfig:e}=n;try{return await $e(async()=>{let[t,r]=await Promise.all([ju(n),Ju(n)]);return zi.create(r,t)},`keyless-configuration-${e.network}`,1e3*60*5)()}catch(t){throw t instanceof _?t:_.fromErrorType({type:25,error:t})}}function nt(n){let{jwt:e,uidKey:t="sub"}=n,r;try{r=_jwtdecode.jwtDecode.call(void 0, e)}catch(o){throw _.fromErrorType({type:12,details:`Failed to parse JWT - ${_chunkJQCMXTY7js.ta.call(void 0, o)}`})}if(typeof r.iss!="string")throw _.fromErrorType({type:12,details:"JWT is missing 'iss' in the payload. This should never happen."});if(typeof r.aud!="string")throw _.fromErrorType({type:12,details:"JWT is missing 'aud' in the payload or 'aud' is an array of values."});let i=r[t];return{iss:r.iss,aud:r.aud,uidVal:i}}async function ju(n){let{aptosConfig:e,options:t}=n,r="0x1::keyless_account::Configuration";try{let{data:i}=await H({aptosConfig:e,originMethod:"getKeylessConfigurationResource",path:`accounts/${_chunkJQCMXTY7js.na.from("0x1").toString()}/resource/${r}`,params:{ledger_version:_optionalChain([t, 'optionalAccess', _45 => _45.ledgerVersion])}});return i.data}catch(i){throw _.fromErrorType({type:22,error:i})}}async function Ju(n){let{aptosConfig:e,options:t}=n,r="0x1::keyless_account::Groth16VerificationKey";try{let{data:i}=await H({aptosConfig:e,originMethod:"getGroth16VerificationKeyResource",path:`accounts/${_chunkJQCMXTY7js.na.from("0x1").toString()}/resource/${r}`,params:{ledger_version:_optionalChain([t, 'optionalAccess', _46 => _46.ledgerVersion])}});return i.data}catch(i){throw _.fromErrorType({type:23,error:i})}}async function Xu(n){let{aptosConfig:e,jwkAddr:t,options:r}=n,i;if(t){let s="0x1::jwks::FederatedJWKs",{data:a}=await H({aptosConfig:e,originMethod:"getKeylessJWKs",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}/resource/${s}`,params:{ledger_version:_optionalChain([r, 'optionalAccess', _47 => _47.ledgerVersion])}});i=a}else{let s="0x1::jwks::PatchedJWKs",{data:a}=await H({aptosConfig:e,originMethod:"getKeylessJWKs",path:`accounts/0x1/resource/${s}`,params:{ledger_version:_optionalChain([r, 'optionalAccess', _48 => _48.ledgerVersion])}});i=a}let o=new Map;for(let s of i.data.jwks.entries){let a=[];for(let c of s.jwks){let{data:d}=c.variant,m=new C(_chunkJQCMXTY7js.v.fromHexInput(d).toUint8Array()),A=Ni.deserialize(m);a.push(A)}o.set(_chunkJQCMXTY7js.w.call(void 0, s.issuer),a)}return o}var Ni=class n extends _chunkJQCMXTY7js.x{constructor(e){super();let{kid:t,kty:r,alg:i,e:o,n:s}=e;this.kid=t,this.kty=r,this.alg=i,this.e=o,this.n=s}serialize(e){e.serializeStr(this.kid),e.serializeStr(this.kty),e.serializeStr(this.alg),e.serializeStr(this.e),e.serializeStr(this.n)}static fromMoveStruct(e){let{data:t}=e.variant,r=new C(_chunkJQCMXTY7js.v.fromHexInput(t).toUint8Array());return n.deserialize(r)}toScalar(){if(this.alg!=="RS256")throw _.fromErrorType({type:32,details:"Failed to convert JWK to scalar when calculating the public inputs hash. Only RSA 256 is supported currently"});let e=_chunkJQCMXTY7js.xa.call(void 0, this.n),r=Yu(e.reverse()).map(i=>Ct(i));return r.push(256n),Kt(r)}static deserialize(e){let t=e.deserializeStr(),r=e.deserializeStr(),i=e.deserializeStr(),o=e.deserializeStr(),s=e.deserializeStr();return new n({kid:t,kty:r,alg:i,n:s,e:o})}};function Yu(n){let e=[];for(let t=0;t<n.length;t+=24){let r=n.slice(t,Math.min(t+24,n.length));if(r.length<24){let i=new Uint8Array(24);i.set(r),e.push(i)}else e.push(r)}return e}function Zu(n){try{let e=JSON.parse(n);if(e.kid===void 0)throw new Error("JWT header missing kid");return e}catch (e2){throw new Error("Failed to parse JWT header.")}}var L=class n extends ae{constructor(e,t){super(),this.jwkAddress=_chunkJQCMXTY7js.na.from(e),this.keylessPublicKey=t}authKey(){let e=new _chunkJQCMXTY7js.y;return e.serializeU32AsUleb128(4),e.serializeFixedBytes(this.bcsToBytes()),V.fromSchemeAndBytes({scheme:2,input:e.toUint8Array()})}verifySignature(e){try{return Pr({...e,publicKey:this}),!0}catch (e3){return!1}}serialize(e){this.jwkAddress.serialize(e),this.keylessPublicKey.serialize(e)}static deserialize(e){let t=_chunkJQCMXTY7js.na.deserialize(e),r=K.deserialize(e);return new n(t,r)}static isPublicKey(e){return e instanceof n}async verifySignatureAsync(e){return Di({...e,publicKey:this})}static create(e){return new n(e.jwkAddress,K.create(e))}static fromJwtAndPepper(e){return new n(e.jwkAddress,K.fromJwtAndPepper(e))}static isInstance(e){return"jwkAddress"in e&&e.jwkAddress instanceof _chunkJQCMXTY7js.na&&"keylessPublicKey"in e&&e.keylessPublicKey instanceof K}};var _secp256k1 = require('@noble/curves/secp256k1');var _bip32 = require('@scure/bip32');var De=class De extends et{constructor(t){super();this.keyType="secp256k1";let r=_chunkJQCMXTY7js.v.fromHexInput(t),{length:i}=r.toUint8Array();if(i===De.LENGTH)this.key=r;else if(i===De.COMPRESSED_LENGTH){let o=_secp256k1.secp256k1.ProjectivePoint.fromHex(r.toUint8Array());this.key=_chunkJQCMXTY7js.v.fromHexInput(o.toRawBytes(!1))}else throw new Error(`PublicKey length should be ${De.LENGTH} or ${De.COMPRESSED_LENGTH}, received ${i}`)}verifySignature(t){let{message:r,signature:i}=t,o=sn(r),s=_chunkJQCMXTY7js.v.fromHexInput(o).toUint8Array(),a=_sha3.sha3_256.call(void 0, s),c=i.toUint8Array();return _secp256k1.secp256k1.verify(c,a,this.key.toUint8Array(),{lowS:!0})}async verifySignatureAsync(t){return this.verifySignature(t)}toUint8Array(){return this.key.toUint8Array()}serialize(t){t.serializeBytes(this.key.toUint8Array())}deserialize(t){let r=t.deserializeBytes();return new it(r)}static deserialize(t){let r=t.deserializeBytes();return new De(r)}static isPublicKey(t){return t instanceof De}static isInstance(t){return"key"in t&&_optionalChain([t, 'access', _49 => _49.key, 'optionalAccess', _50 => _50.data, 'optionalAccess', _51 => _51.length])===De.LENGTH&&"keyType"in t&&t.keyType==="secp256k1"}};De.LENGTH=65,De.COMPRESSED_LENGTH=33;var Fe=De,je=class je extends _chunkJQCMXTY7js.x{constructor(e,t){super();let r=Pe.parseHexInput(e,"secp256k1",t);if(r.toUint8Array().length!==je.LENGTH)throw new Error(`PrivateKey length should be ${je.LENGTH}`);this.key=r}static generate(){let e=_secp256k1.secp256k1.utils.randomPrivateKey();return new je(e,!1)}static fromDerivationPath(e,t){if(!is(e))throw new Error(`Invalid derivation path ${e}`);return je.fromDerivationPathInner(e,mr(t))}static fromDerivationPathInner(e,t){let{privateKey:r}=_bip32.HDKey.fromMasterSeed(t).derive(e);if(r===null)throw new Error("Invalid key");return new je(r,!1)}sign(e){let t=sn(e),r=_chunkJQCMXTY7js.v.fromHexInput(t),i=_sha3.sha3_256.call(void 0, r.toUint8Array()),o=_secp256k1.secp256k1.sign(i,this.key.toUint8Array(),{lowS:!0});return new it(o.toCompactRawBytes())}publicKey(){let e=_secp256k1.secp256k1.getPublicKey(this.key.toUint8Array(),!1);return new Fe(e)}toUint8Array(){return this.key.toUint8Array()}toString(){return this.toAIP80String()}toHexString(){return this.key.toString()}toAIP80String(){return Pe.formatPrivateKey(this.key.toString(),"secp256k1")}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new je(t,!1)}static isPrivateKey(e){return e instanceof je}};je.LENGTH=32;var rt=je,on=class on extends O{constructor(e){super();let t=_chunkJQCMXTY7js.v.fromHexInput(e);if(t.toUint8Array().length!==on.LENGTH)throw new Error(`Signature length should be ${on.LENGTH}, received ${t.toUint8Array().length}`);this.data=t}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new on(t)}};on.LENGTH=64;var it=on;var _nistjs = require('@noble/curves/nist.js');var _e=class _e extends et{constructor(t){super();this.keyType="secp256r1";let r=_chunkJQCMXTY7js.v.fromHexInput(t),i=r.toUint8Array().length;if(i!==_e.LENGTH&&i!==_e.COMPRESSED_LENGTH)throw new Error(`PublicKey length should be ${_e.LENGTH} or ${_e.COMPRESSED_LENGTH}, received ${i}`);if(i===_e.COMPRESSED_LENGTH){let o=_nistjs.p256.ProjectivePoint.fromHex(r.toUint8Array());this.key=_chunkJQCMXTY7js.v.fromHexInput(o.toRawBytes(!1))}else this.key=r}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}bcsToBytes(){let t=new _chunkJQCMXTY7js.y;return this.serialize(t),t.toUint8Array()}verifySignature(t){let{message:r,signature:i}=t,o=_chunkJQCMXTY7js.v.fromHexInput(r).toUint8Array(),s=_sha3.sha3_256.call(void 0, o),a=i.toUint8Array();return _nistjs.p256.verify(a,s,this.toUint8Array())}async verifySignatureAsync(t){return this.verifySignature({message:t.message,signature:t.signature})}serialize(t){t.serializeBytes(this.key.toUint8Array())}static deserialize(t){let r=t.deserializeBytes();return new _e(r)}static load(t){let r=t.deserializeBytes();return new _e(r)}static isInstance(t){return"key"in t&&_optionalChain([t, 'access', _52 => _52.key, 'optionalAccess', _53 => _53.data, 'optionalAccess', _54 => _54.length])===_e.LENGTH&&"keyType"in t&&t.keyType==="secp256r1"}authKey(){let t=new _chunkJQCMXTY7js.y;return t.serializeU32AsUleb128(2),t.serializeFixedBytes(this.bcsToBytes()),V.fromSchemeAndBytes({scheme:2,input:t.toUint8Array()})}};_e.LENGTH=65,_e.COMPRESSED_LENGTH=33;var un=_e,zt=class zt extends Pe{constructor(e,t){super();let r=Pe.parseHexInput(e,"secp256r1",t),i=r.toUint8Array().length;if(i!==zt.LENGTH)throw new Error(`PrivateKey length should be ${zt.LENGTH}, received ${i}`);this.key=r}toUint8Array(){return this.key.toUint8Array()}toString(){return Pe.formatPrivateKey(this.key.toString(),"secp256r1")}toHexString(){return this.key.toString()}sign(e){let t=_chunkJQCMXTY7js.v.fromHexInput(e),r=_sha3.sha3_256.call(void 0, t.toUint8Array()),i=_nistjs.p256.sign(r,this.key.toUint8Array());return new Oi(i.toCompactRawBytes())}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new zt(t)}static generate(){let e=_nistjs.p256.utils.randomPrivateKey();return new zt(e)}publicKey(){let e=_nistjs.p256.getPublicKey(this.key.toUint8Array(),!1);return new un(e)}};zt.LENGTH=32;var Cs=zt,Bn= exports.WebAuthnSignature =class n extends O{constructor(e,t,r){super(),this.signature=_chunkJQCMXTY7js.v.fromHexInput(e),this.authenticatorData=_chunkJQCMXTY7js.v.fromHexInput(t),this.clientDataJSON=_chunkJQCMXTY7js.v.fromHexInput(r)}toUint8Array(){return this.signature.toUint8Array()}serialize(e){e.serializeU32AsUleb128(0),e.serializeBytes(this.signature.toUint8Array()),e.serializeBytes(this.authenticatorData.toUint8Array()),e.serializeBytes(this.clientDataJSON.toUint8Array())}bcsToBytes(){let e=new _chunkJQCMXTY7js.y;return this.serialize(e),e.toUint8Array()}bcsToHex(){return _chunkJQCMXTY7js.v.fromHexInput(this.bcsToBytes())}toStringWithoutPrefix(){return _chunkJQCMXTY7js.v.fromHexInput(this.bcsToBytes()).toString()}static deserialize(e){let t=e.deserializeUleb128AsU32();if(t!==0)throw new Error(`Invalid id for WebAuthnSignature: ${t}`);let r=e.deserializeBytes(),i=e.deserializeBytes(),o=e.deserializeBytes();return new n(r,i,o)}},an=class an extends O{constructor(e){super();let t=_chunkJQCMXTY7js.v.fromHexInput(e),r=t.toUint8Array().length;if(r!==an.LENGTH)throw new Error(`Signature length should be ${an.LENGTH}, received ${r}`);let i=_nistjs.p256.Signature.fromCompact(t.toUint8Array()).normalizeS().toCompactRawBytes();this.data=_chunkJQCMXTY7js.v.fromHexInput(i)}toUint8Array(){return this.data.toUint8Array()}toString(){return this.data.toString()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new an(t)}};an.LENGTH=64;var Oi=an;var I=class n extends ae{constructor(e){if(super(),this.publicKey=e,e instanceof E)this.variant=0;else if(e instanceof Fe)this.variant=1;else if(e instanceof un)this.variant=2;else if(e instanceof K)this.variant=3;else if(e instanceof L)this.variant=4;else throw new Error("Unsupported public key type")}verifySignature(e){let{message:t,signature:r}=e;if(this.publicKey instanceof K)throw new Error("Use verifySignatureAsync to verify Keyless signatures");return this.publicKey.verifySignature({message:t,signature:r.signature})}async verifySignatureAsync(e){if(!(e.signature instanceof B)){if(_optionalChain([e, 'access', _55 => _55.options, 'optionalAccess', _56 => _56.throwErrorWithReason]))throw new Error("Signature must be an instance of AnySignature");return!1}return await this.publicKey.verifySignatureAsync({...e,signature:e.signature.signature})}authKey(){return V.fromSchemeAndBytes({scheme:2,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.publicKey.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32(),r;switch(t){case 0:r=E.deserialize(e);break;case 1:r=Fe.deserialize(e);break;case 2:r=un.deserialize(e);break;case 3:r=K.deserialize(e);break;case 4:r=L.deserialize(e);break;default:throw new Error(`Unknown variant index for AnyPublicKey: ${t}`)}return new n(r)}static isPublicKey(e){return e instanceof n}isEd25519(){return this.publicKey instanceof E}isSecp256k1PublicKey(){return this.publicKey instanceof Fe}static isInstance(e){return"publicKey"in e&&"variant"in e}},B= exports.AnySignature =class n extends O{constructor(e){if(super(),this.signature=e,e instanceof R)this.variant=0;else if(e instanceof it)this.variant=1;else if(e instanceof Bn)this.variant=2;else if(e instanceof ce)this.variant=3;else throw new Error("Unsupported signature type")}toUint8Array(){return console.warn("[Aptos SDK] Calls to AnySignature.toUint8Array() will soon return the underlying signature bytes. Use AnySignature.bcsToBytes() instead."),this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32(),r;switch(t){case 0:r=R.deserialize(e);break;case 1:r=it.deserialize(e);break;case 2:r=Bn.deserialize(e);break;case 3:r=ce.deserialize(e);break;default:throw new Error(`Unknown variant index for AnySignature: ${t}`)}return new n(r)}static isInstance(e){return"signature"in e&&typeof e.signature=="object"&&e.signature!==null&&"toUint8Array"in e.signature}};function td(n){let e=n;return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}var Er=3,Oe= exports.AbstractMultiKey =class extends ae{constructor(e){super(),this.publicKeys=e.publicKeys}createBitmap(e){let{bits:t}=e,r=128,i=new Uint8Array([0,0,0,0]),o=new Set;return t.forEach((s,a)=>{if(a+1>this.publicKeys.length)throw new Error(`Signature index ${a+1} is out of public keys range, ${this.publicKeys.length}.`);if(o.has(s))throw new Error(`Duplicate bit ${s} detected.`);o.add(s);let c=Math.floor(s/8),d=i[c];d|=r>>s%8,i[c]=d}),i}getIndex(e){let t=this.publicKeys.findIndex(r=>r.toString()===e.toString());if(t!==-1)return t;throw new Error(`Public key ${e} not found in multi key set ${this.publicKeys}`)}},W= exports.MultiKey =class n extends Oe{constructor(e){let{publicKeys:t,signaturesRequired:r}=e;if(super({publicKeys:t}),r<1)throw new Error("The number of required signatures needs to be greater than 0");if(t.length<r)throw new Error(`Provided ${t.length} public keys is smaller than the ${r} required signatures`);if(this.publicKeys=t.map(i=>i instanceof I?i:new I(i)),r>Er&&this.publicKeys.filter(o=>o.variant===3||o.variant===4).length>Er)throw new Error(`Construction of MultiKey with more than ${Er} keyless public keys is not allowed when signaturesRequired 
          is greater than ${Er}. This is because a maximum of 3 keyless signatures are supported for a 
          K-of-N MultiKey transaction.`);this.signaturesRequired=r}getSignaturesRequired(){return this.signaturesRequired}verifySignature(e){let{message:t,signature:r}=e;if(r.signatures.length!==this.signaturesRequired)throw new Error("The number of signatures does not match the number of required signatures");let i=r.bitMapToSignerIndices();for(let o=0;o<r.signatures.length;o+=1){let s=r.signatures[o];if(!this.publicKeys[i[o]].verifySignature({message:t,signature:s}))return!1}return!0}async verifySignatureAsync(e){let{signature:t}=e;try{if(!(t instanceof Ie))throw new Error("Signature is not a MultiKeySignature");if(t.signatures.length!==this.signaturesRequired)throw new Error("The number of signatures does not match the number of required signatures");let r=t.bitMapToSignerIndices();for(let i=0;i<t.signatures.length;i+=1){let o=t.signatures[i];if(!await this.publicKeys[r[i]].verifySignatureAsync({...e,signature:o}))return!1}return!0}catch(r){if(_optionalChain([e, 'access', _57 => _57.options, 'optionalAccess', _58 => _58.throwErrorWithReason]))throw r;return!1}}authKey(){return V.fromSchemeAndBytes({scheme:3,input:this.toUint8Array()})}serialize(e){e.serializeVector(this.publicKeys),e.serializeU8(this.signaturesRequired)}static deserialize(e){let t=e.deserializeVector(I),r=e.deserializeU8();return new n({publicKeys:t,signaturesRequired:r})}getIndex(e){let t=e instanceof I?e:new I(e);return super.getIndex(t)}static isInstance(e){return"publicKeys"in e&&"signaturesRequired"in e}},fe=class fe extends O{constructor(e){super();let{signatures:t,bitmap:r}=e;if(t.length>fe.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${fe.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=t.map(o=>o instanceof B?o:new B(o)),!(r instanceof Uint8Array))this.bitmap=fe.createBitmap({bits:r});else{if(r.length!==fe.BITMAP_LEN)throw new Error(`"bitmap" length should be ${fe.BITMAP_LEN}`);this.bitmap=r}let i=this.bitmap.reduce((o,s)=>o+td(s),0);if(i!==this.signatures.length)throw new Error(`Expecting ${i} signatures from the bitmap, but got ${this.signatures.length}`)}static createBitmap(e){let{bits:t}=e,r=128,i=new Uint8Array([0,0,0,0]),o=new Set;return t.forEach(s=>{if(s>=fe.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${fe.MAX_SIGNATURES_SUPPORTED-1}.`);if(o.has(s))throw new Error("Duplicate bits detected.");o.add(s);let a=Math.floor(s/8),c=i[a];c|=r>>s%8,i[a]=c}),i}bitMapToSignerIndices(){let e=[];for(let t=0;t<this.bitmap.length;t+=1){let r=this.bitmap[t];for(let i=0;i<8;i+=1)(r&128>>i)!==0&&e.push(t*8+i)}return e}serialize(e){e.serializeVector(this.signatures),e.serializeBytes(this.bitmap)}static deserialize(e){let t=e.deserializeVector(B),r=e.deserializeBytes();return new fe({signatures:t,bitmap:r})}};fe.BITMAP_LEN=4,fe.MAX_SIGNATURES_SUPPORTED=fe.BITMAP_LEN*8;var Ie=fe;var Ae=class Ae extends Oe{constructor(e){let{publicKeys:t,threshold:r}=e;if(super({publicKeys:t}),t.length>Ae.MAX_KEYS||t.length<Ae.MIN_KEYS)throw new Error(`Must have between ${Ae.MIN_KEYS} and ${Ae.MAX_KEYS} public keys, inclusive`);if(r<Ae.MIN_THRESHOLD||r>t.length)throw new Error(`Threshold must be between ${Ae.MIN_THRESHOLD} and ${t.length}, inclusive`);this.publicKeys=t,this.threshold=r}getSignaturesRequired(){return this.threshold}verifySignature(e){let{message:t,signature:r}=e;if(!(r instanceof Be))return!1;let i=[];for(let o=0;o<4;o+=1)for(let s=0;s<8;s+=1)if((r.bitmap[o]&1<<7-s)!==0){let c=o*8+s;i.push(c)}if(i.length!==r.signatures.length)throw new Error("Bitmap and signatures length mismatch");if(i.length<this.threshold)throw new Error("Not enough signatures");for(let o=0;o<i.length;o+=1)if(!this.publicKeys[i[o]].verifySignature({message:t,signature:r.signatures[o]}))return!1;return!0}async verifySignatureAsync(e){return this.verifySignature(e)}authKey(){return V.fromSchemeAndBytes({scheme:1,input:this.toUint8Array()})}toUint8Array(){let e=new Uint8Array(this.publicKeys.length*E.LENGTH+1);return this.publicKeys.forEach((t,r)=>{e.set(t.toUint8Array(),r*E.LENGTH)}),e[this.publicKeys.length*E.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes(),r=t[t.length-1],i=[];for(let o=0;o<t.length-1;o+=E.LENGTH){let s=o;i.push(new E(t.subarray(s,s+E.LENGTH)))}return new Ae({publicKeys:i,threshold:r})}static deserializeWithoutLength(e){let t=e.remaining(),r=e.deserializeFixedBytes(t),i=r[r.length-1],o=[];for(let s=0;s<r.length-1;s+=E.LENGTH){let a=s;o.push(new E(r.subarray(a,a+E.LENGTH)))}return new Ae({publicKeys:o,threshold:i})}getIndex(e){return super.getIndex(e)}};Ae.MAX_KEYS=32,Ae.MIN_KEYS=2,Ae.MIN_THRESHOLD=1;var re=Ae,he=class he extends O{constructor(e){super();let{signatures:t,bitmap:r}=e;if(t.length>he.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${he.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=t,!(r instanceof Uint8Array))this.bitmap=he.createBitmap({bits:r});else{if(r.length!==he.BITMAP_LEN)throw new Error(`"bitmap" length should be ${he.BITMAP_LEN}`);this.bitmap=r}}toUint8Array(){let e=new Uint8Array(this.signatures.length*R.LENGTH+he.BITMAP_LEN);return this.signatures.forEach((t,r)=>{e.set(t.toUint8Array(),r*R.LENGTH)}),e.set(this.bitmap,this.signatures.length*R.LENGTH),e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes(),r=t.subarray(t.length-4),i=[];for(let o=0;o<t.length-r.length;o+=R.LENGTH){let s=o;i.push(new R(t.subarray(s,s+R.LENGTH)))}return new he({signatures:i,bitmap:r})}static createBitmap(e){let{bits:t}=e,r=128,i=new Uint8Array([0,0,0,0]),o=new Set;return t.forEach((s,a)=>{if(s>=he.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${he.MAX_SIGNATURES_SUPPORTED-1}.`);if(o.has(s))throw new Error("Duplicate bits detected.");if(a>0&&s<=t[a-1])throw new Error("The bits need to be sorted in ascending order.");o.add(s);let c=Math.floor(s/8),d=i[c];d|=r>>s%8,i[c]=d}),i}};he.MAX_SIGNATURES_SUPPORTED=32,he.BITMAP_LEN=4;var Be=he;var sn=n=>typeof n=="string"?_chunkJQCMXTY7js.v.isValid(n).valid?n:new TextEncoder().encode(n):n,Bi=n=>{if(n instanceof E||n instanceof I||n instanceof re||n instanceof W)return n;if(n instanceof K||n instanceof L)return new I(n);throw new Error(`Unknown account public key: ${n}`)},Rs=n=>{let e=Bi(n);if(e instanceof E)return 0;if(e instanceof I)return 2;if(e instanceof re)return 1;if(e instanceof W)return 3;throw new Error(`Unknown signing scheme: ${e}`)};var Gi=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16];function nd(n){let e=n.toUint8Array().slice(32);for(let t=Gi.length-1;t>=0;t-=1){if(e[t]<Gi[t])return!0;if(e[t]>Gi[t])return!1}return!1}var Et=class Et extends ae{constructor(e){super();let t=_chunkJQCMXTY7js.v.fromHexInput(e);if(t.toUint8Array().length!==Et.LENGTH)throw new Error(`PublicKey length should be ${Et.LENGTH}`);this.key=t}verifySignature(e){let{message:t,signature:r}=e;if(!nd(r))return!1;let i=sn(t),o=_chunkJQCMXTY7js.v.fromHexInput(i).toUint8Array(),s=r.toUint8Array(),a=this.key.toUint8Array();return _ed25519.ed25519.verify(s,o,a)}async verifySignatureAsync(e){return this.verifySignature(e)}authKey(){return V.fromSchemeAndBytes({scheme:0,input:this.toUint8Array()})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Et(t)}static isPublicKey(e){return e instanceof Et}static isInstance(e){return"key"in e&&_optionalChain([e, 'access', _59 => _59.key, 'optionalAccess', _60 => _60.data, 'optionalAccess', _61 => _61.length])===Et.LENGTH}};Et.LENGTH=32;var E=Et,xe=class xe extends _chunkJQCMXTY7js.x{constructor(e,t){super();let r=Pe.parseHexInput(e,"ed25519",t);if(r.toUint8Array().length!==xe.LENGTH)throw new Error(`PrivateKey length should be ${xe.LENGTH}`);this.signingKey=r}static generate(){let e=_ed25519.ed25519.utils.randomPrivateKey();return new xe(e,!1)}static fromDerivationPath(e,t){if(!os(e))throw new Error(`Invalid derivation path ${e}`);return xe.fromDerivationPathInner(e,mr(t))}static fromDerivationPathInner(e,t,r=rs){let{key:i,chainCode:o}=bi(xe.SLIP_0010_SEED,t),s=as(e).map(c=>parseInt(c,10)),{key:a}=s.reduce((c,d)=>ss(c,d+r),{key:i,chainCode:o});return new xe(a,!1)}publicKey(){let e=_ed25519.ed25519.getPublicKey(this.signingKey.toUint8Array());return new E(e)}sign(e){let t=sn(e),r=_chunkJQCMXTY7js.v.fromHexInput(t).toUint8Array(),i=_ed25519.ed25519.sign(r,this.signingKey.toUint8Array());return new R(i)}toUint8Array(){return this.signingKey.toUint8Array()}toString(){return this.toAIP80String()}toHexString(){return this.signingKey.toString()}toAIP80String(){return Pe.formatPrivateKey(this.signingKey.toString(),"ed25519")}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new xe(t,!1)}static isPrivateKey(e){return e instanceof xe}};xe.LENGTH=32,xe.SLIP_0010_SEED="ed25519 seed";var J=xe,dn=class dn extends O{constructor(e){super();let t=_chunkJQCMXTY7js.v.fromHexInput(e);if(t.toUint8Array().length!==dn.LENGTH)throw new Error(`Signature length should be ${dn.LENGTH}`);this.data=t}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new dn(t)}};dn.LENGTH=64;var R=dn;var Ir="Multiple possible deserializations found";function Kf(n){let e=[E,I,re,W,K,L,Fe],t;for(let r of e)try{let i=C.fromHex(n),o=r.deserialize(i);if(i.assertFinished(),t)throw new Error(`${Ir}: ${n}`);t=o}catch(i){if(i instanceof Error&&i.message.includes(Ir))throw i}if(!t)throw new Error(`Failed to deserialize public key: ${n}`);return t}function Rf(n){let e=[R,B,Be,Ie,ce,it],t;for(let r of e)try{let i=C.fromHex(n),o=r.deserialize(i);if(i.assertFinished(),t)throw new Error(`${Ir}: ${n}`);t=o}catch(i){if(i instanceof Error&&i.message.includes(Ir))throw i}if(!t)throw new Error(`Failed to deserialize signature: ${n}`);return t}var ee=class extends _chunkJQCMXTY7js.x{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Ge.load(e);case 1:return ot.load(e);case 2:return ue.load(e);case 3:return Je.load(e);case 4:return pn.load(e);case 5:return kt.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}isEd25519(){return this instanceof Ge}isMultiEd25519(){return this instanceof ot}isSingleKey(){return this instanceof ue}isMultiKey(){return this instanceof Je}},Ge= exports.AccountAuthenticatorEd25519 =class n extends ee{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=E.deserialize(e),r=R.deserialize(e);return new n(t,r)}},ot= exports.AccountAuthenticatorMultiEd25519 =class n extends ee{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=re.deserialize(e),r=Be.deserialize(e);return new n(t,r)}},ue= exports.AccountAuthenticatorSingleKey =class n extends ee{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(2),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=I.deserialize(e),r=B.deserialize(e);return new n(t,r)}},Je= exports.AccountAuthenticatorMultiKey =class n extends ee{constructor(e,t){super(),this.public_keys=e,this.signatures=t}serialize(e){e.serializeU32AsUleb128(3),this.public_keys.serialize(e),this.signatures.serialize(e)}static load(e){let t=W.deserialize(e),r=Ie.deserialize(e);return new n(t,r)}},pn= exports.AccountAuthenticatorNoAccountAuthenticator =class n extends ee{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new n}},kt= exports.AccountAuthenticatorAbstraction =class n extends ee{constructor(e,t,r,i){if(super(),!_chunkJQCMXTY7js.Da.call(void 0, e))throw new Error(`Invalid function info ${e} passed into AccountAuthenticatorAbstraction`);this.functionInfo=e,this.abstractionSignature=r,this.signingMessageDigest=_chunkJQCMXTY7js.v.fromHexInput(_chunkJQCMXTY7js.v.fromHexInput(t).toUint8Array()),this.accountIdentity=i}serialize(e){e.serializeU32AsUleb128(5);let{moduleAddress:t,moduleName:r,functionName:i}=_chunkJQCMXTY7js.Ca.call(void 0, this.functionInfo);_chunkJQCMXTY7js.na.fromString(t).serialize(e),e.serializeStr(r),e.serializeStr(i),this.accountIdentity?e.serializeU32AsUleb128(1):e.serializeU32AsUleb128(0),e.serializeBytes(this.signingMessageDigest.toUint8Array()),this.accountIdentity?e.serializeBytes(this.abstractionSignature):e.serializeFixedBytes(this.abstractionSignature),this.accountIdentity&&e.serializeBytes(this.accountIdentity)}static load(e){let t=_chunkJQCMXTY7js.na.deserialize(e),r=e.deserializeStr(),i=e.deserializeStr(),o=e.deserializeUleb128AsU32(),s=e.deserializeBytes();if(o===0){let a=e.deserializeFixedBytes(e.remaining());return new n(`${t}::${r}::${i}`,s,a)}if(o===1){let a=e.deserializeBytes(),c=e.deserializeBytes();return new n(`${t}::${r}::${i}`,s,a,c)}throw new Error(`Unknown variant index for AccountAuthenticatorAbstraction: ${o}`)}},xr= exports.AccountAbstractionMessage =class n extends _chunkJQCMXTY7js.x{constructor(e,t){super(),this.originalSigningMessage=_chunkJQCMXTY7js.v.fromHexInput(_chunkJQCMXTY7js.v.fromHexInput(e).toUint8Array()),this.functionInfo=t}serialize(e){e.serializeU32AsUleb128(0),e.serializeBytes(this.originalSigningMessage.toUint8Array());let{moduleAddress:t,moduleName:r,functionName:i}=_chunkJQCMXTY7js.Ca.call(void 0, this.functionInfo);_chunkJQCMXTY7js.na.fromString(t).serialize(e),e.serializeStr(r),e.serializeStr(i)}static deserialize(e){let t=e.deserializeUleb128AsU32();if(t!==0)throw new Error(`Unknown variant index for AccountAbstractionMessage: ${t}`);let r=e.deserializeBytes(),i=_chunkJQCMXTY7js.na.deserialize(e),o=e.deserializeStr(),s=e.deserializeStr(),a=`${i}::${o}::${s}`;return new n(r,a)}};var ln=class n extends _chunkJQCMXTY7js.x{constructor(e){super(),this.chainId=e}serialize(e){e.serializeU8(this.chainId)}static deserialize(e){let t=e.deserializeU8();return new n(t)}};var k=class n extends _chunkJQCMXTY7js.x{constructor(e){super(),this.identifier=e}serialize(e){e.serializeStr(this.identifier)}static deserialize(e){let t=e.deserializeStr();return new n(t)}};var Gn=class n extends _chunkJQCMXTY7js.x{constructor(e,t){super(),this.address=e,this.name=t}static fromStr(e){let t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new n(_chunkJQCMXTY7js.na.fromString(t[0]),new k(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let t=_chunkJQCMXTY7js.na.deserialize(e),r=k.deserialize(e);return new n(t,r)}};var U=class n extends _chunkJQCMXTY7js.x{deserialize(e){let t=_chunkJQCMXTY7js.na.deserialize(e),r=k.deserialize(e),i=k.deserialize(e),o=e.deserializeVector(n);return new Xe(t,r,i,o)}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Q.load(e);case 1:return de.load(e);case 2:return te.load(e);case 3:return ct.load(e);case 4:return G.load(e);case 5:return Mt.load(e);case 6:return z.load(e);case 7:return h.load(e);case 8:return st.load(e);case 9:return at.load(e);case 10:return ut.load(e);case 11:return Nt.load(e);case 12:return Dt.load(e);case 13:return Ft.load(e);case 14:return Ot.load(e);case 15:return Bt.load(e);case 16:return Gt.load(e);case 255:return M.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}isBool(){return this instanceof Q}isAddress(){return this instanceof G}isGeneric(){return this instanceof M}isSigner(){return this instanceof Mt}isVector(){return this instanceof z}isStruct(){return this instanceof h}isU8(){return this instanceof de}isU16(){return this instanceof st}isU32(){return this instanceof at}isU64(){return this instanceof te}isU128(){return this instanceof ct}isU256(){return this instanceof ut}isI8(){return this instanceof Nt}isI16(){return this instanceof Dt}isI32(){return this instanceof Ft}isI64(){return this instanceof Ot}isI128(){return this instanceof Bt}isI256(){return this instanceof Gt}isPrimitive(){return this instanceof Mt||this instanceof G||this instanceof Q||this instanceof de||this instanceof st||this instanceof at||this instanceof te||this instanceof ct||this instanceof ut||this instanceof Nt||this instanceof Dt||this instanceof Ft||this instanceof Ot||this instanceof Bt||this instanceof Gt}},Q= exports.TypeTagBool =class n extends U{toString(){return"bool"}serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new n}},de= exports.TypeTagU8 =class n extends U{toString(){return"u8"}serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new n}},Nt= exports.TypeTagI8 =class n extends U{toString(){return"i8"}serialize(e){e.serializeU32AsUleb128(11)}static load(e){return new n}},st= exports.TypeTagU16 =class n extends U{toString(){return"u16"}serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new n}},Dt= exports.TypeTagI16 =class n extends U{toString(){return"i16"}serialize(e){e.serializeU32AsUleb128(12)}static load(e){return new n}},at= exports.TypeTagU32 =class n extends U{toString(){return"u32"}serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new n}},Ft= exports.TypeTagI32 =class n extends U{toString(){return"i32"}serialize(e){e.serializeU32AsUleb128(13)}static load(e){return new n}},te= exports.TypeTagU64 =class n extends U{toString(){return"u64"}serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new n}},Ot= exports.TypeTagI64 =class n extends U{toString(){return"i64"}serialize(e){e.serializeU32AsUleb128(14)}static load(e){return new n}},ct= exports.TypeTagU128 =class n extends U{toString(){return"u128"}serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new n}},Bt= exports.TypeTagI128 =class n extends U{toString(){return"i128"}serialize(e){e.serializeU32AsUleb128(15)}static load(e){return new n}},ut= exports.TypeTagU256 =class n extends U{toString(){return"u256"}serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new n}},Gt= exports.TypeTagI256 =class n extends U{toString(){return"i256"}serialize(e){e.serializeU32AsUleb128(16)}static load(e){return new n}},G= exports.TypeTagAddress =class n extends U{toString(){return"address"}serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new n}},Mt= exports.TypeTagSigner =class n extends U{toString(){return"signer"}serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new n}},vr= exports.TypeTagReference =class n extends U{constructor(t){super();this.value=t}toString(){return`&${this.value.toString()}`}serialize(t){t.serializeU32AsUleb128(254)}static load(t){let r=U.deserialize(t);return new n(r)}},M= exports.TypeTagGeneric =class n extends U{constructor(t){super();this.value=t;if(t<0)throw new Error("Generic type parameter index cannot be negative")}toString(){return`T${this.value}`}serialize(t){t.serializeU32AsUleb128(255),t.serializeU32(this.value)}static load(t){let r=t.deserializeU32();return new n(r)}},z= exports.TypeTagVector =class n extends U{constructor(t){super();this.value=t}toString(){return`vector<${this.value.toString()}>`}static u8(){return new n(new de)}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){let r=U.deserialize(t);return new n(r)}},h= exports.TypeTagStruct =class n extends U{constructor(t){super();this.value=t}toString(){let t="";return this.value.typeArgs.length>0&&(t=`<${this.value.typeArgs.map(r=>r.toString()).join(", ")}>`),`${this.value.address.toString()}::${this.value.moduleName.identifier}::${this.value.name.identifier}${t}`}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){let r=Xe.deserialize(t);return new n(r)}isTypeTag(t,r,i){return this.value.moduleName.identifier===r&&this.value.name.identifier===i&&this.value.address.equals(t)}isString(){return this.isTypeTag(_chunkJQCMXTY7js.na.ONE,"string","String")}isOption(){return this.isTypeTag(_chunkJQCMXTY7js.na.ONE,"option","Option")}isObject(){return this.isTypeTag(_chunkJQCMXTY7js.na.ONE,"object","Object")}isDelegationKey(){return this.isTypeTag(_chunkJQCMXTY7js.na.ONE,"permissioned_delegation","DelegationKey")}isRateLimiter(){return this.isTypeTag(_chunkJQCMXTY7js.na.ONE,"rate_limiter","RateLimiter")}},Xe= exports.StructTag =class n extends _chunkJQCMXTY7js.x{constructor(e,t,r,i){super(),this.address=e,this.moduleName=t,this.name=r,this.typeArgs=i}serialize(e){e.serialize(this.address),e.serialize(this.moduleName),e.serialize(this.name),e.serializeVector(this.typeArgs)}static deserialize(e){let t=_chunkJQCMXTY7js.na.deserialize(e),r=k.deserialize(e),i=k.deserialize(e),o=e.deserializeVector(U);return new n(t,r,i,o)}};function KA(){return new Xe(_chunkJQCMXTY7js.na.ONE,new k("aptos_coin"),new k("AptosCoin"),[])}function x(){return new Xe(_chunkJQCMXTY7js.na.ONE,new k("string"),new k("String"),[])}function RA(n){return new Xe(_chunkJQCMXTY7js.na.ONE,new k("option"),new k("Option"),[n])}function be(n){return new Xe(_chunkJQCMXTY7js.na.ONE,new k("object"),new k("Object"),[n])}function rd(n){let e=n.deserializeUleb128AsU32();switch(e){case 0:return Z.deserialize(n);case 1:return $.deserialize(n);case 2:return ke.deserialize(n);case 3:return _chunkJQCMXTY7js.na.deserialize(n);case 4:return S.deserialize(n,Z);case 5:return F.deserialize(n);case 6:return Ue.deserialize(n);case 7:return ze.deserialize(n);case 8:return Se.deserialize(n);case 9:return Rn.deserialize(n);default:throw new Error(`Unknown variant index for ScriptTransactionArgument: ${e}`)}}var _t=class extends _chunkJQCMXTY7js.x{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return gn.load(e);case 2:return yn.load(e);case 3:return mn.load(e);case 4:return Cr.deserialize(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},gn= exports.TransactionPayloadScript =class n extends _t{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(0),this.script.serialize(e)}static load(e){let t=fn.deserialize(e);return new n(t)}},yn= exports.TransactionPayloadEntryFunction =class n extends _t{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(2),this.entryFunction.serialize(e)}static load(e){let t=dt.deserialize(e);return new n(t)}},mn= exports.TransactionPayloadMultiSig =class n extends _t{constructor(e){super(),this.multiSig=e}serialize(e){e.serializeU32AsUleb128(3),this.multiSig.serialize(e)}static load(e){let t=Mn.deserialize(e);return new n(t)}},dt= exports.EntryFunction =class n{constructor(e,t,r,i){this.module_name=e,this.function_name=t,this.type_args=r,this.args=i}static build(e,t,r,i){return new n(Gn.fromStr(e),new k(t),r,i)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{t.serializeForEntryFunction(e)})}static deserialize(e){let t=Gn.deserialize(e),r=k.deserialize(e),i=e.deserializeVector(U),o=e.deserializeUleb128AsU32(),s=new Array;for(let a=0;a<o;a+=1){let c=e.deserializeUleb128AsU32(),d=gr.deserialize(e,c);s.push(d)}return new n(t,r,i,s)}},fn= exports.Script =class n{constructor(e,t,r){this.bytecode=e,this.type_args=t,this.args=r}serialize(e){e.serializeBytes(this.bytecode),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{t.serializeForScriptFunction(e)})}static deserialize(e){let t=e.deserializeBytes(),r=e.deserializeVector(U),i=e.deserializeUleb128AsU32(),o=new Array;for(let s=0;s<i;s+=1){let a=rd(e);o.push(a)}return new n(t,r,o)}},Mn= exports.MultiSig =class n{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let t=_chunkJQCMXTY7js.na.deserialize(e),r=e.deserializeBool(),i;return r&&(i=Vn.deserialize(e)),new n(t,i)}},Vn= exports.MultiSigTransactionPayload =class n extends _chunkJQCMXTY7js.x{constructor(e){super(),this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new n(dt.deserialize(e))}},Cr= exports.TransactionInnerPayload =class extends _t{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Vt.load(e);default:throw new Error(`Unknown variant index for TransactionInnerPayload: ${t}`)}}},Vt= exports.TransactionInnerPayloadV1 =class n extends Cr{constructor(e,t){super(),this.executable=e,this.extra_config=t}serialize(e){e.serializeU32AsUleb128(4),e.serializeU32AsUleb128(0),this.executable.serialize(e),this.extra_config.serialize(e)}static load(e){let t=An.deserialize(e),r=Kr.deserialize(e);return new n(t,r)}},An= exports.TransactionExecutable =class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Hn.load(e);case 1:return hn.load(e);case 2:return Ln.load(e);default:throw new Error(`Unknown variant index for TransactionExecutable: ${t}`)}}},Hn= exports.TransactionExecutableScript =class n extends An{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(0),this.script.serialize(e)}static load(e){let t=fn.deserialize(e);return new n(t)}},hn= exports.TransactionExecutableEntryFunction =class n extends An{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(1),this.entryFunction.serialize(e)}static load(e){let t=dt.deserialize(e);return new n(t)}},Ln= exports.TransactionExecutableEmpty =class n extends An{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new n}},Kr= exports.TransactionExtraConfig =class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Ht.load(e);default:throw new Error(`Unknown variant index for TransactionExtraConfig: ${t}`)}}},Ht= exports.TransactionExtraConfigV1 =class n extends Kr{constructor(e,t){super(),this.multisigAddress=e,this.replayProtectionNonce=t!==void 0?BigInt(t):void 0}serialize(e){e.serializeU32AsUleb128(0),e.serializeOption(this.multisigAddress),e.serializeOption(this.replayProtectionNonce!==void 0?new $(this.replayProtectionNonce):void 0)}static load(e){let t=e.deserializeOption(_chunkJQCMXTY7js.na),r=e.deserializeOption($);return new n(t,_optionalChain([r, 'optionalAccess', _62 => _62.value]))}};var ve=class n extends _chunkJQCMXTY7js.x{constructor(e,t,r,i,o,s,a){super(),this.sender=e,this.sequence_number=t,this.payload=r,this.max_gas_amount=i,this.gas_unit_price=o,this.expiration_timestamp_secs=s,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let t=_chunkJQCMXTY7js.na.deserialize(e),r=e.deserializeU64(),i=_t.deserialize(e),o=e.deserializeU64(),s=e.deserializeU64(),a=e.deserializeU64(),c=ln.deserialize(e);return new n(t,r,i,o,s,a,c)}},Rr= exports.RawTransactionWithData =class extends _chunkJQCMXTY7js.x{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Lt.load(e);case 1:return qt.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},Lt= exports.MultiAgentRawTransaction =class n extends Rr{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses)}static load(e){let t=ve.deserialize(e),r=e.deserializeVector(_chunkJQCMXTY7js.na);return new n(t,r)}},qt= exports.FeePayerRawTransaction =class n extends Rr{constructor(e,t,r){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=r}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses),this.fee_payer_address.serialize(e)}static load(e){let t=ve.deserialize(e),r=e.deserializeVector(_chunkJQCMXTY7js.na),i=_chunkJQCMXTY7js.na.deserialize(e);return new n(t,r,i)}};var Ur=class extends _chunkJQCMXTY7js.x{constructor(t){super();this.accountAddress=_chunkJQCMXTY7js.na.ONE;this.moduleName=new v("account");this.structName=new v("RotationProofChallenge");this.sequenceNumber=new $(t.sequenceNumber),this.originator=t.originator,this.currentAuthKey=t.currentAuthKey,this.newPublicKey=S.U8(t.newPublicKey.toUint8Array())}serialize(t){t.serialize(this.accountAddress),t.serialize(this.moduleName),t.serialize(this.structName),t.serialize(this.sequenceNumber),t.serialize(this.originator),t.serialize(this.currentAuthKey),t.serialize(this.newPublicKey)}};var pt=class extends _chunkJQCMXTY7js.x{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return $t.load(e);case 1:return bn.load(e);case 2:return Wt.load(e);case 3:return Qt.load(e);case 4:return It.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}isEd25519(){return this instanceof $t}isMultiEd25519(){return this instanceof bn}isMultiAgent(){return this instanceof Wt}isFeePayer(){return this instanceof Qt}isSingleSender(){return this instanceof It}},$t= exports.TransactionAuthenticatorEd25519 =class n extends pt{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=E.deserialize(e),r=R.deserialize(e);return new n(t,r)}},bn= exports.TransactionAuthenticatorMultiEd25519 =class n extends pt{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=re.deserialize(e),r=Be.deserialize(e);return new n(t,r)}},Wt= exports.TransactionAuthenticatorMultiAgent =class n extends pt{constructor(e,t,r){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers)}static load(e){let t=ee.deserialize(e),r=e.deserializeVector(_chunkJQCMXTY7js.na),i=e.deserializeVector(ee);return new n(t,r,i)}},Qt= exports.TransactionAuthenticatorFeePayer =class n extends pt{constructor(e,t,r,i){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let t=ee.deserialize(e),r=e.deserializeVector(_chunkJQCMXTY7js.na),i=e.deserializeVector(ee),o=_chunkJQCMXTY7js.na.deserialize(e),s=ee.deserialize(e),a={address:o,authenticator:s};return new n(t,r,i,a)}},It= exports.TransactionAuthenticatorSingleSender =class n extends pt{constructor(e){super(),this.sender=e}serialize(e){e.serializeU32AsUleb128(4),this.sender.serialize(e)}static load(e){let t=ee.deserialize(e);return new n(t)}};var lt=class n extends _chunkJQCMXTY7js.x{constructor(e,t){super(),this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let t=ve.deserialize(e),r=pt.deserialize(e);return new n(t,r)}};var zr=class n extends _chunkJQCMXTY7js.x{constructor(e,t){super(),this.rawTransaction=e,this.feePayerAddress=t}serialize(e){this.rawTransaction.serialize(e),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let t=ve.deserialize(e),r=e.deserializeBool(),i;return r&&(i=_chunkJQCMXTY7js.na.deserialize(e)),new n(t,i)}};var kr=class n extends _chunkJQCMXTY7js.x{constructor(e,t,r){super(),this.rawTransaction=e,this.feePayerAddress=r,this.secondarySignerAddresses=t}serialize(e){this.rawTransaction.serialize(e),e.serializeVector(this.secondarySignerAddresses),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let t=ve.deserialize(e),r=e.deserializeVector(_chunkJQCMXTY7js.na),i=e.deserializeBool(),o;return i&&(o=_chunkJQCMXTY7js.na.deserialize(e)),new n(t,r,o)}};function Nr(n){return n.feePayerAddress?new qt(n.rawTransaction,_nullishCoalesce(n.secondarySignerAddresses, () => ([])),n.feePayerAddress):n.secondarySignerAddresses?new Lt(n.rawTransaction,n.secondarySignerAddresses):n.rawTransaction}function Qe(n,e){let t=_sha3.sha3_256.create();if(!e.startsWith("APTOS::"))throw new Error(`Domain separator needs to start with 'APTOS::'.  Provided - ${e}`);t.update(e);let r=t.digest(),i=n,o=new Uint8Array(r.length+i.length);return o.set(r),o.set(i,r.length),o}function Lh(n){return Qe(n.bcsToBytes(),`APTOS::${n.constructor.name}`)}function Me(n){let e=Nr(n);return n.feePayerAddress?Qe(e.bcsToBytes(),Ii):n.secondarySignerAddresses?Qe(e.bcsToBytes(),Ii):Qe(e.bcsToBytes(),As)}var ie=class n{constructor(e){this.signingScheme=0;let{privateKey:t,address:r}=e;this.privateKey=t,this.publicKey=t.publicKey(),this.accountAddress=r?_chunkJQCMXTY7js.na.from(r):this.publicKey.authKey().derivedAddress()}static generate(){let e=J.generate();return new n({privateKey:e})}static fromDerivationPath(e){let{path:t,mnemonic:r}=e,i=J.fromDerivationPath(t,r);return new n({privateKey:i})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e,signature:e.signature})}signWithAuthenticator(e){return new Ge(this.publicKey,this.privateKey.sign(e))}signTransactionWithAuthenticator(e){return new Ge(this.publicKey,this.signTransaction(e))}sign(e){return this.privateKey.sign(e)}signTransaction(e){return this.sign(Me(e))}};function Mi(n){return typeof n=="object"&&n!==null&&"getAnyPublicKey"in n&&typeof n.getAnyPublicKey=="function"}var pe=class n{constructor(e){this.signingScheme=2;let{privateKey:t,address:r}=e;this.privateKey=t,this.publicKey=new I(t.publicKey()),this.accountAddress=r?_chunkJQCMXTY7js.na.from(r):this.publicKey.authKey().derivedAddress()}getAnyPublicKey(){return this.publicKey}static generate(e={}){let{scheme:t=0}=e,r;switch(t){case 0:r=J.generate();break;case 2:r=rt.generate();break;default:throw new Error(`Unsupported signature scheme ${t}`)}return new n({privateKey:r})}static fromDerivationPath(e){let{scheme:t=0,path:r,mnemonic:i}=e,o;switch(t){case 0:o=J.fromDerivationPath(r,i);break;case 2:o=rt.fromDerivationPath(r,i);break;default:throw new Error(`Unsupported signature scheme ${t}`)}return new n({privateKey:o})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e,signature:e.signature})}signWithAuthenticator(e){return new ue(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new ue(this.publicKey,this.signTransaction(e))}sign(e){return new B(this.privateKey.sign(e))}signTransaction(e){return this.sign(Me(e))}static fromEd25519Account(e){return new n({privateKey:e.privateKey,address:e.accountAddress})}};var gt=class{static generate(e={}){let{scheme:t=0,legacy:r=!0}=e;return t===0&&r?ie.generate():pe.generate({scheme:t})}static fromPrivateKey(e){let{privateKey:t,address:r,legacy:i=!0}=e;return t instanceof J&&i?new ie({privateKey:t,address:r}):new pe({privateKey:t,address:r})}static fromPrivateKeyAndAddress(e){return this.fromPrivateKey(e)}static fromDerivationPath(e){let{scheme:t=0,mnemonic:r,path:i,legacy:o=!0}=e;return t===0&&o?ie.fromDerivationPath({mnemonic:r,path:i}):pe.fromDerivationPath({scheme:t,mnemonic:r,path:i})}static authKey(e){let{publicKey:t}=e;return t.authKey()}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync(e)}};var _utils3 = require('@noble/hashes/utils');var sd=1209600,Tn=class Tn extends _chunkJQCMXTY7js.x{constructor(e){super();let{privateKey:t,expiryDateSecs:r,blinder:i}=e;this.privateKey=t,this.publicKey=new Tt(t.publicKey()),this.expiryDateSecs=r||_chunkJQCMXTY7js.va.call(void 0, _chunkJQCMXTY7js.ua.call(void 0, )+sd),this.blinder=i!==void 0?_chunkJQCMXTY7js.v.fromHexInput(i).toUint8Array():ad();let o=kn(this.publicKey.bcsToBytes(),93);o.push(BigInt(this.expiryDateSecs)),o.push(Ct(this.blinder));let s=Kt(o);this.nonce=s.toString()}getPublicKey(){return this.publicKey}isExpired(){return Math.floor(Date.now()/1e3)>this.expiryDateSecs}serialize(e){e.serializeU32AsUleb128(this.publicKey.variant),e.serializeBytes(this.privateKey.toUint8Array()),e.serializeU64(this.expiryDateSecs),e.serializeFixedBytes(this.blinder)}static deserialize(e){let t=e.deserializeUleb128AsU32(),r;switch(t){case 0:r=J.deserialize(e);break;default:throw new Error(`Unknown variant index for EphemeralPublicKey: ${t}`)}let i=e.deserializeU64(),o=e.deserializeFixedBytes(31);return new Tn({privateKey:r,expiryDateSecs:Number(i),blinder:o})}static fromBytes(e){return Tn.deserialize(new C(e))}static generate(e){let t;switch(_optionalChain([e, 'optionalAccess', _63 => _63.scheme])){case 0:default:t=J.generate()}return new Tn({privateKey:t,expiryDateSecs:_optionalChain([e, 'optionalAccess', _64 => _64.expiryDateSecs])})}sign(e){if(this.isExpired())throw new Error("EphemeralKeyPair has expired");return new Le(this.privateKey.sign(e))}};Tn.BLINDER_LENGTH=31;var jt=Tn;function ad(){return _utils3.randomBytes.call(void 0, jt.BLINDER_LENGTH)}var _eventemitter3 = require('eventemitter3'); var _eventemitter32 = _interopRequireDefault(_eventemitter3);function Fr(n){return n!=null&&typeof n.checkKeylessAccountValidity=="function"}var wn=class wn extends _chunkJQCMXTY7js.x{constructor(t){super();this.signingScheme=2;let{address:r,ephemeralKeyPair:i,publicKey:o,uidKey:s,uidVal:a,aud:c,pepper:d,proof:m,proofFetchCallback:A,jwt:p,verificationKeyHash:g}=t;if(this.ephemeralKeyPair=i,this.publicKey=o,this.accountAddress=r?_chunkJQCMXTY7js.na.from(r):this.publicKey.authKey().derivedAddress(),this.uidKey=s,this.uidVal=a,this.aud=c,this.jwt=p,this.emitter=new _eventemitter32.default,this.proofOrPromise=m,m instanceof me)this.proof=m;else{if(A===void 0)throw new Error("Must provide callback for async proof fetch");this.emitter.on("proofFetchFinish",async D=>{await A(D),this.emitter.removeAllListeners()}),this.init(m)}let b=_chunkJQCMXTY7js.v.fromHexInput(d).toUint8Array();if(b.length!==wn.PEPPER_LENGTH)throw new Error(`Pepper length in bytes should be ${wn.PEPPER_LENGTH}`);if(this.pepper=b,g!==void 0){if(_chunkJQCMXTY7js.v.hexInputToUint8Array(g).length!==32)throw new Error("verificationKeyHash must be 32 bytes");this.verificationKeyHash=_chunkJQCMXTY7js.v.hexInputToUint8Array(g)}}getAnyPublicKey(){return new I(this.publicKey)}async init(t){try{this.proof=await t,this.emitter.emit("proofFetchFinish",{status:"Success"})}catch(r){r instanceof Error?this.emitter.emit("proofFetchFinish",{status:"Failed",error:r.toString()}):this.emitter.emit("proofFetchFinish",{status:"Failed",error:"Unknown"})}}serialize(t){if(this.accountAddress.serialize(t),t.serializeStr(this.jwt),t.serializeStr(this.uidKey),t.serializeFixedBytes(this.pepper),this.ephemeralKeyPair.serialize(t),this.proof===void 0)throw new Error("Cannot serialize - proof undefined");this.proof.serialize(t),t.serializeOption(this.verificationKeyHash,32)}static partialDeserialize(t){let r=_chunkJQCMXTY7js.na.deserialize(t),i=t.deserializeStr(),o=t.deserializeStr(),s=t.deserializeFixedBytes(31),a=jt.deserialize(t),c=me.deserialize(t),d=t.deserializeOption("fixedBytes",32);return{address:r,jwt:i,uidKey:o,pepper:s,ephemeralKeyPair:a,proof:c,verificationKeyHash:d}}isExpired(){return this.ephemeralKeyPair.isExpired()}signWithAuthenticator(t){let r=new B(this.sign(t)),i=new I(this.publicKey);return new ue(i,r)}signTransactionWithAuthenticator(t){let r=new B(this.signTransaction(t)),i=new I(this.publicKey);return new ue(i,r)}async waitForProofFetch(){this.proofOrPromise instanceof Promise&&await this.proofOrPromise}async checkKeylessAccountValidity(t){if(this.isExpired())throw _.fromErrorType({type:0});if(await this.waitForProofFetch(),this.proof===void 0)throw _.fromErrorType({type:2});let r=_jwtdecode.jwtDecode.call(void 0, this.jwt,{header:!0});if(r.kid===void 0)throw _.fromErrorType({type:12,details:"checkKeylessAccountValidity failed. JWT is missing 'kid' in header. This should never happen."});if(this.verificationKeyHash!==void 0){let{verificationKey:i}=await rn({aptosConfig:t});if(_chunkJQCMXTY7js.v.hexInputToString(i.hash())!==_chunkJQCMXTY7js.v.hexInputToString(this.verificationKeyHash))throw _.fromErrorType({type:4})}else console.warn("[Aptos SDK] The verification key hash was not set. Proof may be invalid if the verification key has rotated.");await wn.fetchJWK({aptosConfig:t,publicKey:this.publicKey,kid:r.kid})}sign(t){let{expiryDateSecs:r}=this.ephemeralKeyPair;if(this.isExpired())throw _.fromErrorType({type:0});if(this.proof===void 0)throw _.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let i=this.ephemeralKeyPair.getPublicKey(),o=this.ephemeralKeyPair.sign(t);return new ce({jwtHeader:_chunkJQCMXTY7js.wa.call(void 0, this.jwt.split(".")[0]),ephemeralCertificate:new tn(this.proof,0),expiryDateSecs:r,ephemeralPublicKey:i,ephemeralSignature:o})}signTransaction(t){if(this.proof===void 0)throw _.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let r=Nr(t),o=new Dr(r,this.proof.proof).hash();return this.sign(o)}getSigningMessage(t){if(this.proof===void 0)throw _.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let r=Nr(t);return new Dr(r,this.proof.proof).hash()}verifySignature(t){return this.publicKey.verifySignature(t)}async verifySignatureAsync(t){return this.publicKey.verifySignatureAsync({...t})}static async fetchJWK(t){return Fi(t)}};wn.PEPPER_LENGTH=31;var Te=wn,Dr= exports.TransactionAndProof =class extends _chunkJQCMXTY7js.x{constructor(t,r){super();this.domainSeparator="APTOS::TransactionAndProof";this.transaction=t,this.proof=r}serialize(t){t.serializeFixedBytes(this.transaction.bcsToBytes()),t.serializeOption(this.proof)}hash(){return Qe(this.bcsToBytes(),this.domainSeparator)}};var Ce=class n extends Te{constructor(e){let t=K.create(e);super({publicKey:t,...e}),this.publicKey=t}serialize(e){super.serialize(e)}static deserialize(e){let{address:t,proof:r,ephemeralKeyPair:i,jwt:o,uidKey:s,pepper:a,verificationKeyHash:c}=Te.partialDeserialize(e),{iss:d,aud:m,uidVal:A}=nt({jwt:o,uidKey:s});return new n({address:t,proof:r,ephemeralKeyPair:i,iss:d,uidKey:s,uidVal:A,aud:m,pepper:a,jwt:o,verificationKeyHash:c})}static fromBytes(e){return n.deserialize(new C(_chunkJQCMXTY7js.v.hexInputToUint8Array(e)))}static create(e){let{address:t,proof:r,jwt:i,ephemeralKeyPair:o,pepper:s,uidKey:a="sub",proofFetchCallback:c,verificationKey:d,verificationKeyHash:m}=e;if(m&&d)throw new Error("Cannot provide both verificationKey and verificationKeyHash");let{iss:A,aud:p,uidVal:g}=nt({jwt:i,uidKey:a});return new n({address:t,proof:r,ephemeralKeyPair:o,iss:A,uidKey:a,uidVal:g,aud:p,pepper:s,jwt:i,proofFetchCallback:c,verificationKeyHash:_nullishCoalesce(m, () => ((d?d.hash():void 0)))})}};var Ve=class n extends Te{constructor(e){let t=L.create(e);super({publicKey:t,...e}),this.publicKey=t,this.audless=_nullishCoalesce(e.audless, () => (!1))}serialize(e){super.serialize(e),this.publicKey.jwkAddress.serialize(e)}static deserialize(e){let{address:t,proof:r,ephemeralKeyPair:i,jwt:o,uidKey:s,pepper:a,verificationKeyHash:c}=Te.partialDeserialize(e),d=_chunkJQCMXTY7js.na.deserialize(e),{iss:m,aud:A,uidVal:p}=nt({jwt:o,uidKey:s});return new n({address:t,proof:r,ephemeralKeyPair:i,iss:m,uidKey:s,uidVal:p,aud:A,pepper:a,jwt:o,verificationKeyHash:c,jwkAddress:d})}static fromBytes(e){return n.deserialize(C.fromHex(e))}static create(e){let{address:t,proof:r,jwt:i,ephemeralKeyPair:o,pepper:s,jwkAddress:a,uidKey:c="sub",proofFetchCallback:d,verificationKey:m,verificationKeyHash:A}=e;if(A&&m)throw new Error("Cannot provide both verificationKey and verificationKeyHash");let{iss:p,aud:g,uidVal:b}=nt({jwt:i,uidKey:c});return new n({address:t,proof:r,ephemeralKeyPair:o,iss:p,uidKey:c,uidVal:b,aud:g,pepper:s,jwkAddress:_chunkJQCMXTY7js.na.from(a),jwt:i,proofFetchCallback:d,verificationKeyHash:_nullishCoalesce(A, () => ((m?m.hash():void 0)))})}};var yt=class n{constructor(e){this.signingScheme=3;let{multiKey:t,address:r}=e,i=e.signers.map(a=>a instanceof ie?pe.fromEd25519Account(a):a);if(t.signaturesRequired>i.length)throw new Error(`Not enough signers provided to satisfy the required signatures. Need ${t.signaturesRequired} signers, but only ${i.length} provided`);if(t.signaturesRequired<i.length)throw new Error(`More signers provided than required. Need ${t.signaturesRequired} signers, but ${i.length} provided`);this.publicKey=t,this.accountAddress=r?_chunkJQCMXTY7js.na.from(r):this.publicKey.authKey().derivedAddress();let o=[];for(let a of i)o.push(this.publicKey.getIndex(a.getAnyPublicKey()));let s=i.map((a,c)=>[a,o[c]]);s.sort((a,c)=>a[1]-c[1]),this.signers=s.map(a=>a[0]),this.signerIndicies=s.map(a=>a[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:o})}static fromPublicKeysAndSigners(e){let{address:t,publicKeys:r,signaturesRequired:i,signers:o}=e,s=new W({publicKeys:r,signaturesRequired:i});return new n({multiKey:s,signers:o,address:t})}static isMultiKeySigner(e){return e instanceof n}signWithAuthenticator(e){return new Je(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new Je(this.publicKey,this.signTransaction(e))}async waitForProofFetch(){let t=this.signers.filter(r=>r instanceof Te).map(async r=>r.waitForProofFetch());await Promise.all(t)}async checkKeylessAccountValidity(e){let r=this.signers.filter(i=>i instanceof Te).map(i=>i.checkKeylessAccountValidity(e));await Promise.all(r)}sign(e){let t=[];for(let r of this.signers)t.push(r.sign(e));return new Ie({signatures:t,bitmap:this.signaturesBitmap})}signTransaction(e){let t=[];for(let r of this.signers)t.push(r.signTransaction(e));return new Ie({signatures:t,bitmap:this.signaturesBitmap})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return await this.publicKey.verifySignatureAsync(e)}};var qn=class{constructor(e){this.signingScheme=1;let{signers:t,publicKey:r,address:i}=e;if(this.publicKey=r,this.accountAddress=i?_chunkJQCMXTY7js.na.from(i):this.publicKey.authKey().derivedAddress(),r.threshold>t.length)throw new Error(`Not enough signers provided to satisfy the required signatures. Need ${r.threshold} signers, but only ${t.length} provided`);if(r.threshold<t.length)throw new Error(`More signers provided than required. Need ${r.threshold} signers, but ${t.length} provided`);let o=[];for(let a of t)o.push(this.publicKey.getIndex(a.publicKey()));let s=t.map((a,c)=>[a,o[c]]);s.sort((a,c)=>a[1]-c[1]),this.signers=s.map(a=>a[0]),this.signerIndices=s.map(a=>a[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:o})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e,signature:e.signature})}signWithAuthenticator(e){return new ot(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new ot(this.publicKey,this.signTransaction(e))}sign(e){let t=[];for(let r of this.signers)t.push(r.sign(e));return new Be({signatures:t,bitmap:this.signaturesBitmap})}signTransaction(e){return this.sign(Me(e))}};function Us(n){let e=n.deserializeUleb128AsU32();if(!Object.values(_chunkJQCMXTY7js.ja).includes(e))throw new Error(`Deserialization of Account failed: SigningScheme variant ${e} is invalid`);return{address:_chunkJQCMXTY7js.na.deserialize(n),signingScheme:e}}function zs(n,e){if(e.serializeStr(n.jwt),e.serializeStr(n.uidKey),e.serializeFixedBytes(n.pepper),n.ephemeralKeyPair.serialize(e),n.proof===void 0)throw new Error("Cannot serialize - proof undefined");n.proof.serialize(e),e.serializeOption(n.verificationKeyHash,32)}function ks(n){let e=n.deserializeStr(),t=n.deserializeStr(),r=n.deserializeFixedBytes(31),i=jt.deserialize(n),o=me.deserialize(n),s=n.deserializeOption("fixedBytes",32);return{jwt:e,uidKey:t,pepper:r,ephemeralKeyPair:i,proof:o,verificationKeyHash:s}}var Ns;(A=>{function n(p){let g=new _chunkJQCMXTY7js.y;switch(g.serializeU32AsUleb128(p.signingScheme),p.accountAddress.serialize(g),p.signingScheme){case 0:return p.privateKey.serialize(g),g.toUint8Array();case 2:{if(!Mi(p))throw new Error("Account is not a SingleKeySigner");let b=p.getAnyPublicKey();switch(g.serializeU32AsUleb128(b.variant),b.variant){case 3:return zs(p,g),g.toUint8Array();case 4:{let D=p;return zs(D,g),D.publicKey.jwkAddress.serialize(g),g.serializeBool(D.audless),g.toUint8Array()}case 1:case 0:return p.privateKey.serialize(g),g.toUint8Array();default:throw new Error(`Invalid public key variant: ${b.variant}`)}}case 3:{let b=p;return b.publicKey.serialize(g),g.serializeU32AsUleb128(b.signers.length),b.signers.forEach(D=>{g.serializeFixedBytes(n(D))}),g.toUint8Array()}default:throw new Error(`Deserialization of Account failed: invalid signingScheme value ${p.signingScheme}`)}}A.toBytes=n;function e(p){return _chunkJQCMXTY7js.v.hexInputToStringWithoutPrefix(n(p))}A.toHexStringWithoutPrefix=e;function t(p){return _chunkJQCMXTY7js.v.hexInputToString(n(p))}A.toHexString=t;function r(p){let{address:g,signingScheme:b}=Us(p);switch(b){case 0:{let D=J.deserialize(p);return new ie({privateKey:D,address:g})}case 2:{let D=p.deserializeUleb128AsU32();switch(D){case 0:{let q=J.deserialize(p);return new pe({privateKey:q,address:g})}case 1:{let q=rt.deserialize(p);return new pe({privateKey:q,address:g})}case 3:{let q=ks(p),se=nt(q);return new Ce({...q,...se})}case 4:{let q=ks(p),se=_chunkJQCMXTY7js.na.deserialize(p),Ye=p.deserializeBool(),At=nt(q);return new Ve({...q,...At,jwkAddress:se,audless:Ye})}default:throw new Error(`Unsupported public key variant ${D}`)}}case 3:{let D=W.deserialize(p),q=p.deserializeUleb128AsU32(),se=new Array;for(let Ye=0;Ye<q;Ye+=1){let At=r(p);if(!Mi(At)&&!(At instanceof ie))throw new Error("Deserialization of MultiKeyAccount failed. Signer is not a SingleKeySigner or Ed25519Account");se.push(At)}return new yt({multiKey:D,signers:se,address:g})}default:throw new Error(`Deserialization of Account failed: invalid signingScheme value ${b}`)}}A.deserialize=r;function i(p){let g=d(p);if(!(g instanceof Ce))throw new Error("Deserialization of KeylessAccount failed");return g}A.keylessAccountFromHex=i;function o(p){let g=d(p);if(!(g instanceof Ve))throw new Error("Deserialization of FederatedKeylessAccount failed");return g}A.federatedKeylessAccountFromHex=o;function s(p){let g=d(p);if(!(g instanceof yt))throw new Error("Deserialization of MultiKeyAccount failed");return g}A.multiKeyAccountFromHex=s;function a(p){let g=d(p);if(!(g instanceof pe))throw new Error("Deserialization of SingleKeyAccount failed");return g}A.singleKeyAccountFromHex=a;function c(p){let g=d(p);if(!(g instanceof ie))throw new Error("Deserialization of Ed25519Account failed");return g}A.ed25519AccountFromHex=c;function d(p){return r(C.fromHex(p))}A.fromHex=d;function m(p){return d(p)}A.fromBytes=m})(Ns||(Ns= exports.AccountUtils ={}));var Or=class n extends gt{constructor({signer:t,accountAddress:r,authenticationFunction:i}){super();this.signingScheme=2;if(!_chunkJQCMXTY7js.Da.call(void 0, i))throw new Error(`Invalid authentication function ${i} passed into AbstractedAccount`);this.authenticationFunction=i,this.accountAddress=r,this.publicKey=new yr(this.accountAddress),this.sign=o=>new Un(t(o))}static fromPermissionedSigner({signer:t,accountAddress:r}){return new n({signer:i=>{let o=new _chunkJQCMXTY7js.y;return t.publicKey.serialize(o),t.sign(i).serialize(o),o.toUint8Array()},accountAddress:_nullishCoalesce(r, () => (t.accountAddress)),authenticationFunction:"0x1::permissioned_delegation::authenticate"})}static generateAccountAbstractionMessage(t,r){let i=new xr(t,r);return Qe(i.bcsToBytes(),hs)}signWithAuthenticator(t){return new kt(this.authenticationFunction,_sha3.sha3_256.call(void 0, t),this.sign(_sha3.sha3_256.call(void 0, t)).toUint8Array())}signTransactionWithAuthenticator(t){let r=n.generateAccountAbstractionMessage(Me(t),this.authenticationFunction);return this.signWithAuthenticator(r)}signTransaction(t){return this.sign(Me(t))}setSigner(t){this.sign=r=>new Un(t(r))}};var $n=class $n extends Or{constructor({signer:e,authenticationFunction:t,abstractPublicKey:r}){let i=new (0, _chunkJQCMXTY7js.na)($n.computeAccountAddress(t,r));super({accountAddress:i,signer:e,authenticationFunction:t}),this.abstractPublicKey=r}static computeAccountAddress(e,t){if(!_chunkJQCMXTY7js.Da.call(void 0, e))throw new Error(`Invalid authentication function ${e} passed into DerivableAbstractedAccount`);let[r,i,o]=e.split("::"),s=_sha3.sha3_256.create(),a=new _chunkJQCMXTY7js.y;_chunkJQCMXTY7js.na.fromString(r).serialize(a),a.serializeStr(i),a.serializeStr(o),s.update(a.toUint8Array());let c=new _chunkJQCMXTY7js.y;return c.serializeBytes(t),s.update(c.toUint8Array()),s.update(new Uint8Array([$n.ADDRESS_DOMAIN_SEPERATOR])),s.digest()}signWithAuthenticator(e){return new kt(this.authenticationFunction,_sha3.sha3_256.call(void 0, e),this.sign(_sha3.sha3_256.call(void 0, e)).value,this.abstractPublicKey)}};$n.ADDRESS_DOMAIN_SEPERATOR=5;var Fs=$n;var dd=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,pd=`
    fragment AnsTokenFragment on current_aptos_names {
  domain
  expiration_timestamp
  registered_address
  subdomain
  token_standard
  is_primary
  owner_address
  subdomain_expiration_policy
  domain_expiration_timestamp
}
    `,Br=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    decimals
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Os=`
    query getAccountAddressesForAuthKey($where_condition: auth_key_account_addresses_bool_exp, $order_by: [auth_key_account_addresses_order_by!]) {
  auth_key_account_addresses(where: $where_condition, order_by: $order_by) {
    auth_key
    account_address
    last_transaction_version
    is_auth_key_used
  }
}
    `,Bs=`
    query getAccountCoinsCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,Gs=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,Ms=`
    query getAccountCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,Vs=`
    query getAccountOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Br}`,Fw=`
    query getAccountOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Br}`,Hs=`
    query getAccountOwnedTokensFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Br}`,Ls=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,qs=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,$s=`
    query getAuthKeysForPublicKey($where_condition: public_key_auth_keys_bool_exp, $order_by: [public_key_auth_keys_order_by!]) {
  public_key_auth_keys(where: $where_condition, order_by: $order_by) {
    public_key
    public_key_type
    auth_key
    account_public_key
    last_transaction_version
    is_public_key_used
    signature_type
  }
}
    `,Ws=`
    query getChainTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,Qs=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!) {
  current_collections_v2(where: $where_condition) {
    uri
    total_minted_v2
    token_standard
    table_handle_v1
    mutable_uri
    mutable_description
    max_supply
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    cdn_asset_uris {
      cdn_image_uri
      asset_uri
      animation_optimizer_retry_count
      cdn_animation_uri
      cdn_json_uri
      image_optimizer_retry_count
      json_parser_retry_count
      raw_animation_uri
      raw_image_uri
    }
  }
}
    `,js=`
    query getCurrentFungibleAssetBalances($where_condition: current_fungible_asset_balances_bool_exp, $offset: Int, $limit: Int) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
  }
}
    `,Js=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `;var Xs=`
    query getFungibleAssetActivities($where_condition: fungible_asset_activities_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_activities(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    block_height
    entry_function_id_str
    event_index
    gas_fee_payer_address
    is_frozen
    is_gas_fee
    is_transaction_success
    owner_address
    storage_id
    storage_refund_amount
    token_standard
    transaction_timestamp
    transaction_version
    type
  }
}
    `,Ys=`
    query getFungibleAssetMetadata($where_condition: fungible_asset_metadata_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_metadata(where: $where_condition, offset: $offset, limit: $limit) {
    icon_uri
    project_uri
    supply_aggregator_table_handle_v1
    supply_aggregator_table_key_v1
    creator_address
    asset_type
    decimals
    last_transaction_timestamp
    last_transaction_version
    name
    symbol
    token_standard
    supply_v2
    maximum_v2
  }
}
    `,Sn=`
    query getNames($offset: Int, $limit: Int, $where_condition: current_aptos_names_bool_exp, $order_by: [current_aptos_names_order_by!]) {
  current_aptos_names(
    limit: $limit
    where: $where_condition
    order_by: $order_by
    offset: $offset
  ) {
    ...AnsTokenFragment
  }
}
    ${pd}`,Hi=`
    query getNumberOfDelegators($where_condition: num_active_delegator_per_pool_bool_exp, $order_by: [num_active_delegator_per_pool_order_by!]) {
  num_active_delegator_per_pool(where: $where_condition, order_by: $order_by) {
    num_active_delegator
    pool_address
  }
}
    `,Gr=`
    query getObjectData($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,Li=`
    query getProcessorStatus($where_condition: processor_status_bool_exp) {
  processor_status(where: $where_condition) {
    last_success_version
    processor
    last_updated
  }
}
    `,Zs=`
    query getTableItemsData($where_condition: table_items_bool_exp!, $offset: Int, $limit: Int, $order_by: [table_items_order_by!]) {
  table_items(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    decoded_key
    decoded_value
    key
    table_handle
    transaction_version
    write_set_change_index
  }
}
    `,ea=`
    query getTableItemsMetadata($where_condition: table_metadatas_bool_exp!, $offset: Int, $limit: Int, $order_by: [table_metadatas_order_by!]) {
  table_metadatas(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    handle
    key_type
    value_type
  }
}
    `,ta=`
    query getTokenActivity($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${dd}`,qi=`
    query getCurrentTokenOwnership($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Br}`,na=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    decimals
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `;async function Mr(n){let{aptosConfig:e}=n,{data:t}=await H({aptosConfig:e,originMethod:"getLedgerInfo",path:""});return t}async function ra(n){let{aptosConfig:e,limit:t}=n;return(await w({aptosConfig:e,query:{query:Ws,variables:{limit:t}},originMethod:"getChainTopUserTransactions"})).user_transactions}async function w(n){let{aptosConfig:e,query:t,originMethod:r}=n,{data:i}=await Ss({aptosConfig:e,originMethod:_nullishCoalesce(r, () => ("queryIndexer")),path:"",body:t,overrides:{WITH_CREDENTIALS:!1}});return i}async function ld(n){let{aptosConfig:e}=n;return(await w({aptosConfig:e,query:{query:Li},originMethod:"getProcessorStatuses"})).processor_status}async function Vr(n){let e=await ld({aptosConfig:n.aptosConfig});return BigInt(e[0].last_success_version)}async function Hr(n){let{aptosConfig:e,processorType:t}=n;return(await w({aptosConfig:e,query:{query:Li,variables:{where_condition:{processor:{_eq:t}}}},originMethod:"getProcessorStatus"})).processor_status[0]}async function Lr(n){let{aptosConfig:e,accountAddress:t}=n,{data:r}=await H({aptosConfig:e,originMethod:"getInfo",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}`});return r}async function oa(n){return _optionalChain([n, 'access', _65 => _65.options, 'optionalAccess', _66 => _66.ledgerVersion])!==void 0?ia(n):$e(async()=>ia(n),`module-${n.accountAddress}-${n.moduleName}`,1e3*60*5)()}async function ia(n){let{aptosConfig:e,accountAddress:t,moduleName:r,options:i}=n,{data:o}=await H({aptosConfig:e,originMethod:"getModule",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}/module/${r}`,params:{ledger_version:_optionalChain([i, 'optionalAccess', _67 => _67.ledgerVersion])}});return o}async function qr(n){let{aptosConfig:e,handle:t,data:r,options:i}=n;return(await St({aptosConfig:e,originMethod:"getTableItem",path:`tables/${t}/item`,params:{ledger_version:_optionalChain([i, 'optionalAccess', _68 => _68.ledgerVersion])},body:r})).data}async function sa(n){let{aptosConfig:e,options:t}=n,r={query:Zs,variables:{where_condition:_optionalChain([t, 'optionalAccess', _69 => _69.where]),offset:_optionalChain([t, 'optionalAccess', _70 => _70.offset]),limit:_optionalChain([t, 'optionalAccess', _71 => _71.limit]),order_by:_optionalChain([t, 'optionalAccess', _72 => _72.orderBy])}};return(await w({aptosConfig:e,query:r,originMethod:"getTableItemsData"})).table_items}async function aa(n){let{aptosConfig:e,options:t}=n,r={query:ea,variables:{where_condition:_optionalChain([t, 'optionalAccess', _73 => _73.where]),offset:_optionalChain([t, 'optionalAccess', _74 => _74.offset]),limit:_optionalChain([t, 'optionalAccess', _75 => _75.limit]),order_by:_optionalChain([t, 'optionalAccess', _76 => _76.orderBy])}};return(await w({aptosConfig:e,query:r,originMethod:"getTableItemsMetadata"})).table_metadatas}async function Wi(n){let{aptosConfig:e,options:t}=n;return wr({aptosConfig:e,originMethod:"getTransactions",path:"transactions",params:{start:_optionalChain([t, 'optionalAccess', _77 => _77.offset]),limit:_optionalChain([t, 'optionalAccess', _78 => _78.limit])}})}async function Wr(n){let{aptosConfig:e}=n;return $e(async()=>{let{data:t}=await H({aptosConfig:e,originMethod:"getGasPriceEstimation",path:"estimate_gas_price"});return t},`gas-price-${e.network}`,1e3*60*5)()}async function ca(n){let{aptosConfig:e,ledgerVersion:t}=n,{data:r}=await H({aptosConfig:e,originMethod:"getTransactionByVersion",path:`transactions/by_version/${t}`});return r}async function Wn(n){let{aptosConfig:e,transactionHash:t}=n,{data:r}=await H({aptosConfig:e,path:`transactions/by_hash/${t}`,originMethod:"getTransactionByHash"});return r}async function ua(n){let{aptosConfig:e,transactionHash:t}=n;try{return(await Wn({aptosConfig:e,transactionHash:t})).type==="pending_transaction"}catch(r){if(_optionalChain([r, 'optionalAccess', _79 => _79.status])===404)return!0;throw r}}async function gd(n){let{aptosConfig:e,transactionHash:t}=n,{data:r}=await H({aptosConfig:e,path:`transactions/wait_by_hash/${t}`,originMethod:"longWaitForTransaction"});return r}async function Pn(n){let{aptosConfig:e,transactionHash:t,options:r}=n,i=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _80 => _80.timeoutSecs]), () => (20)),o=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _81 => _81.checkSuccess]), () => (!0)),s=!0,a=0,c,d,m=200,A=1.5;function p(g){if(!(g instanceof Ee)||(d=g,g.status!==404&&g.status>=400&&g.status<500))throw g}try{c=await Wn({aptosConfig:e,transactionHash:t}),s=c.type==="pending_transaction"}catch(g){p(g)}if(s){let g=Date.now();try{c=await gd({aptosConfig:e,transactionHash:t}),s=c.type==="pending_transaction"}catch(b){p(b)}a=(Date.now()-g)/1e3}for(;s&&!(a>=i);){try{if(c=await Wn({aptosConfig:e,transactionHash:t}),s=c.type==="pending_transaction",!s)break}catch(g){p(g)}await _chunkJQCMXTY7js.sa.call(void 0, m),a+=m/1e3,m*=A}if(c===void 0)throw d||new $r(`Fetching transaction ${t} failed and timed out after ${i} seconds`,c);if(c.type==="pending_transaction")throw new $r(`Transaction ${t} timed out in pending state after ${i} seconds`,c);if(!o)return c;if(!c.success)throw new $i(`Transaction ${t} failed with an error: ${c.vm_status}`,c);return c}async function Qr(n){let{aptosConfig:e,processorType:t}=n,r=BigInt(n.minimumLedgerVersion),i=3e3,o=new Date().getTime(),s=BigInt(-1);for(;s<r;){if(new Date().getTime()-o>i)throw new Error("waitForLastSuccessIndexerVersionSync timeout");if(t===void 0?s=await Vr({aptosConfig:e}):s=(await Hr({aptosConfig:e,processorType:t})).last_success_version,s>=r)break;await _chunkJQCMXTY7js.sa.call(void 0, 200)}}var $r=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},$i=class extends Error{constructor(e,t){super(e),this.transaction=t}};async function da(n){let{aptosConfig:e,ledgerVersion:t,options:r}=n,{data:i}=await H({aptosConfig:e,originMethod:"getBlockByVersion",path:`blocks/by_version/${t}`,params:{with_transactions:_optionalChain([r, 'optionalAccess', _82 => _82.withTransactions])}});return la({block:i,...n})}async function pa(n){let{aptosConfig:e,blockHeight:t,options:r}=n,{data:i}=await H({aptosConfig:e,originMethod:"getBlockByHeight",path:`blocks/by_height/${t}`,params:{with_transactions:_optionalChain([r, 'optionalAccess', _83 => _83.withTransactions])}});return la({block:i,...n})}async function la(n){let{aptosConfig:e,block:t,options:r}=n;if(_optionalChain([r, 'optionalAccess', _84 => _84.withTransactions])){t.transactions=_nullishCoalesce(t.transactions, () => ([]));let i=t.transactions[t.transactions.length-1],o=BigInt(t.first_version),s=BigInt(t.last_version),a=_optionalChain([i, 'optionalAccess', _85 => _85.version]),c;if(a===void 0?c=o-1n:c=BigInt(a),c===s)return t;let d=[],m=100n;for(let p=c+1n;p<s;p+=BigInt(100))d.push(Wi({aptosConfig:e,options:{offset:p,limit:Math.min(Number(m),Number(s-p+1n))}}));let A=await Promise.all(d);for(let p of A)t.transactions.push(...p)}return t}function ga(n){return!!n.match(/^[_a-zA-Z0-9]+$/)}function ya(n){return!!n.match(/\s/)}function yd(n){return!!n.match(/^T[0-9]+$/)}function md(n){return!!n.match(/^&.+$/)}function fd(n){switch(n){case"signer":case"address":case"bool":case"u8":case"u16":case"u32":case"u64":case"u128":case"u256":case"i8":case"i16":case"i32":case"i64":case"i128":case"i256":return!0;default:return!1}}function Ad(n,e){let t=e;for(;t<n.length;t+=1){let r=n[t];if(!ya(r))break}return t}var hd=(b=>(b.InvalidTypeTag="unknown type",b.UnexpectedGenericType="unexpected generic type",b.UnexpectedTypeArgumentClose="unexpected '>'",b.UnexpectedWhitespaceCharacter="unexpected whitespace character",b.UnexpectedComma="unexpected ','",b.TypeArgumentCountMismatch="type argument count doesn't match expected amount",b.MissingTypeArgumentClose="no matching '>' for '<'",b.MissingTypeArgument="no type argument before ','",b.UnexpectedPrimitiveTypeArguments="primitive types not expected to have type arguments",b.UnexpectedVectorTypeArgumentCount="vector type expected to have exactly one type argument",b.UnexpectedStructFormat="unexpected struct format, must be of the form 0xaddress::module_name::struct_name",b.InvalidModuleNameCharacter="module name must only contain alphanumeric or '_' characters",b.InvalidStructNameCharacter="struct name must only contain alphanumeric or '_' characters",b.InvalidAddress="struct address must be valid",b))(hd||{}),X= exports.TypeTagParserError =class extends Error{constructor(e,t){super(`Failed to parse typeTag '${e}', ${t}`)}};function He(n,e){let t=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _86 => _86.allowGenerics]), () => (!1)),r=[],i=[],o=[],s=0,a="",c=1;for(;s<n.length;){let d=n[s];if(d==="<")r.push({savedExpectedTypes:c,savedStr:a,savedTypes:o}),a="",o=[],c=1;else if(d===">"){if(a!==""){let b=Qn(a,i,t);o.push(b)}let m=r.pop();if(m===void 0)throw new X(n,"unexpected '>'");if(c!==o.length)throw new X(n,"type argument count doesn't match expected amount");let{savedStr:A,savedTypes:p,savedExpectedTypes:g}=m;i=o,o=p,a=A,c=g}else if(d===","){if(r.length===0)throw new X(n,"unexpected ','");if(a.length===0)throw new X(n,"no type argument before ','");let m=Qn(a,i,t);i=[],o.push(m),a="",c+=1}else if(ya(d)){let m=!1;if(a.length!==0){let p=Qn(a,i,t);i=[],o.push(p),a="",m=!0}s=Ad(n,s);let A=n[s];if(s<n.length&&m&&A!==","&&A!==">")throw new X(n,"unexpected whitespace character");continue}else a+=d;s+=1}if(r.length>0)throw new X(n,"no matching '>' for '<'");switch(o.length){case 0:return Qn(a,i,t);case 1:if(a==="")return o[0];throw new X(n,"unexpected ','");default:throw new X(n,"unexpected whitespace character")}}function Qn(n,e,t){let r=n.trim(),i=r.toLowerCase();if(fd(i)&&e.length>0)throw new X(n,"primitive types not expected to have type arguments");switch(r.toLowerCase()){case"signer":return new Mt;case"bool":return new Q;case"address":return new G;case"u8":return new de;case"u16":return new st;case"u32":return new at;case"u64":return new te;case"u128":return new ct;case"u256":return new ut;case"i8":return new Nt;case"i16":return new Dt;case"i32":return new Ft;case"i64":return new Ot;case"i128":return new Bt;case"i256":return new Gt;case"vector":if(e.length!==1)throw new X(n,"vector type expected to have exactly one type argument");return new z(e[0]);default:if(md(r)){let a=r.substring(1);return new vr(Qn(a,e,t))}if(yd(r)){if(t)return new M(Number(r.split("T")[1]));throw new X(n,"unexpected generic type")}if(!r.match(/:/))throw new X(n,"unknown type");let o=r.split("::");if(o.length!==3)throw new X(n,"unexpected struct format, must be of the form 0xaddress::module_name::struct_name");let s;try{s=_chunkJQCMXTY7js.na.fromString(o[0])}catch (e4){throw new X(n,"struct address must be valid")}if(!ga(o[1]))throw new X(n,"module name must only contain alphanumeric or '_' characters");if(!ga(o[2]))throw new X(n,"struct name must only contain alphanumeric or '_' characters");return new h(new Xe(s,new k(o[1]),new k(o[2]),e))}}function ma(n){return typeof n=="boolean"}function mt(n){return typeof n=="string"}function bd(n){return typeof n=="number"}function jr(n){if(bd(n))return n;if(mt(n)&&n!=="")return Number.parseInt(n,10)}function Jr(n){return typeof n=="number"||typeof n=="bigint"||typeof n=="string"}function fa(n){return n==null}function Aa(n){return Qi(n)||Ji(n)||Xi(n)||Yi(n)||Zi(n)||eo(n)||to(n)||Xr(n)||ji(n)||Td(n)||n instanceof S||n instanceof ne}function Qi(n){return n instanceof F}function Xr(n){return n instanceof _chunkJQCMXTY7js.na}function ji(n){return n instanceof v}function Td(n){return n instanceof Re}function Ji(n){return n instanceof Z}function Xi(n){return n instanceof Ue}function Yi(n){return n instanceof ze}function Zi(n){return n instanceof $}function eo(n){return n instanceof ke}function to(n){return n instanceof Se}function ha(n){return"bytecode"in n}function N(n,e){throw new Error(`Type mismatch for argument ${e}, expected '${n}'`)}function ba(n){let e=n.params.findIndex(t=>t!=="signer"&&t!=="&signer");return e<0?n.params.length:e}var wd=new TextEncoder;function Yr(n){return _nullishCoalesce(_optionalChain([n, 'optionalAccess', _87 => _87.map, 'call', _88 => _88(e=>mt(e)?He(e):e)]), () => ([]))}async function Sd(n,e,t){return(await Zr({aptosConfig:t,accountAddress:n,moduleName:e})).abi}async function ro(n,e,t,r){let i=await Sd(n,e,r);if(!i)throw new Error(`Could not find module ABI for '${n}::${e}'`);return i.exposed_functions.find(o=>o.name===t)}async function IS(n,e,t,r){let i=await ro(n,e,t,r);if(!i)throw new Error(`Could not find function ABI for '${n}::${e}::${t}'`);let o=[];for(let s=0;s<i.params.length;s+=1)o.push(He(i.params[s],{allowGenerics:!0}));return{typeParameters:i.generic_type_params,parameters:o}}async function Ta(n,e,t,r){let i=await ro(n,e,t,r);if(!i)throw new Error(`Could not find entry function ABI for '${n}::${e}::${t}'`);if(!i.is_entry)throw new Error(`'${n}::${e}::${t}' is not an entry function`);let o=ba(i),s=[];for(let a=o;a<i.params.length;a+=1)s.push(He(i.params[a],{allowGenerics:!0}));return{signers:o,typeParameters:i.generic_type_params,parameters:s}}async function wa(n,e,t,r){let i=await ro(n,e,t,r);if(!i)throw new Error(`Could not find view function ABI for '${n}::${e}::${t}'`);if(!i.is_view)throw new Error(`'${n}::${e}::${t}' is not an view function`);let o=[];for(let a=0;a<i.params.length;a+=1)o.push(He(i.params[a],{allowGenerics:!0}));let s=[];for(let a=0;a<i.return.length;a+=1)s.push(He(i.return[a],{allowGenerics:!0}));return{typeParameters:i.generic_type_params,parameters:o,returnTypes:s}}function io(n,e,t,r,i,o){let s;if("exposed_functions"in e){let a=e.exposed_functions.find(c=>c.name===n);if(!a)throw new Error(`Could not find function ABI for '${e.address}::${e.name}::${n}'`);if(r>=a.params.length)throw new Error(`Too many arguments for '${n}', expected ${a.params.length}`);s=He(a.params[r],{allowGenerics:!0})}else{if(r>=e.parameters.length)throw new Error(`Too many arguments for '${n}', expected ${e.parameters.length}`);s=e.parameters[r]}return Jt(t,s,r,i,"exposed_functions"in e?e:void 0,o)}function Jt(n,e,t,r,i,o){return Aa(n)?(no(e,n,t),n):Pd(n,e,t,r,i,o)}function Pd(n,e,t,r,i,o){if(e.isBool()){if(ma(n))return new F(n);if(mt(n)){if(n==="true")return new F(!0);if(n==="false")return new F(!1)}N("boolean",t)}if(e.isAddress()){if(mt(n))return _chunkJQCMXTY7js.na.fromString(n);if(n&&typeof n=="object"&&"data"in n&&n.data instanceof Uint8Array)return new (0, _chunkJQCMXTY7js.na)(n.data);N("string | AccountAddress",t)}if(e.isU8()){let s=jr(n);if(s!==void 0)return new Z(s);N("number | string",t)}if(e.isU16()){let s=jr(n);if(s!==void 0)return new Ue(s);N("number | string",t)}if(e.isU32()){let s=jr(n);if(s!==void 0)return new ze(s);N("number | string",t)}if(e.isU64()){if(Jr(n))return new $(BigInt(n));N("bigint | number | string",t)}if(e.isU128()){if(Jr(n))return new ke(BigInt(n));N("bigint | number | string",t)}if(e.isU256()){if(Jr(n))return new Se(BigInt(n));N("bigint | number | string",t)}if(e.isGeneric()){let s=e.value;if(s<0||s>=r.length)throw new Error(`Generic argument ${e.toString()} is invalid for argument ${t}`);return Jt(n,r[s],t,r,i)}if(e.isVector()){if(e.value.isU8()){if(mt(n))return S.U8(wd.encode(n));if(n instanceof Uint8Array)return S.U8(n);if(n instanceof ArrayBuffer)return S.U8(new Uint8Array(n))}if(mt(n)&&n.startsWith("["))return Jt(JSON.parse(n),e,t,r);if(Array.isArray(n))return new S(n.map(s=>Jt(s,e.value,t,r,i)));throw new Error(`Type mismatch for argument ${t}, type '${e.toString()}'`)}if(e.isStruct()){if(e.isString()){if(mt(n))return new v(n);N("string",t)}if(e.isObject()){if(mt(n))return _chunkJQCMXTY7js.na.fromString(n);if(n&&typeof n=="object"&&"data"in n&&n.data instanceof Uint8Array)return new (0, _chunkJQCMXTY7js.na)(n.data);N("string | AccountAddress",t)}if(e.isDelegationKey()||e.isRateLimiter()){if(n instanceof Uint8Array)return new Re(n);N("Uint8Array",t)}if(e.isOption()){if(fa(n)){let a=e.value.typeArgs[0];return a instanceof Q?new ne(null):a instanceof G?new ne(null):a instanceof de?new ne(null):a instanceof st?new ne(null):a instanceof at?new ne(null):a instanceof te?new ne(null):a instanceof ct?new ne(null):a instanceof ut?new ne(null):new ne(null)}return new ne(Jt(n,e.value.typeArgs[0],t,r,i))}if(_optionalChain([i, 'optionalAccess', _89 => _89.structs, 'access', _90 => _90.find, 'call', _91 => _91(a=>a.name===e.value.name.identifier), 'optionalAccess', _92 => _92.fields, 'access', _93 => _93.length])===0&&n instanceof Uint8Array)return new Re(n);if(n instanceof Uint8Array&&_optionalChain([o, 'optionalAccess', _94 => _94.allowUnknownStructs]))return console.warn(`Unsupported struct input type for argument ${t}. Continuing since 'allowUnknownStructs' is enabled.`),new Re(n);throw new Error(`Unsupported struct input type for argument ${t}, type '${e.toString()}'`)}throw new Error(`Type mismatch for argument ${t}, type '${e.toString()}'`)}function no(n,e,t){if(n.isBool()){if(Qi(e))return;N("Bool",t)}if(n.isAddress()){if(Xr(e))return;N("AccountAddress",t)}if(n.isU8()){if(Ji(e))return;N("U8",t)}if(n.isU16()){if(Xi(e))return;N("U16",t)}if(n.isU32()){if(Yi(e))return;N("U32",t)}if(n.isU64()){if(Zi(e))return;N("U64",t)}if(n.isU128()){if(eo(e))return;N("U128",t)}if(n.isU256()){if(to(e))return;N("U256",t)}if(n.isVector()){if(e instanceof S){e.values.length>0&&no(n.value,e.values[0],t);return}N("MoveVector",t)}if(n instanceof h){if(n.isString()){if(ji(e))return;N("MoveString",t)}if(n.isObject()){if(Xr(e))return;N("AccountAddress",t)}if(n.isOption()){if(e instanceof ne){e.value!==void 0&&no(n.value.typeArgs[0],e.value,t);return}N("MoveOption",t)}}throw new Error(`Type mismatch for argument ${t}, expected '${n.toString()}'`)}async function ei(n){if(ha(n))return xd(n);let{moduleAddress:e,moduleName:t,functionName:r}=_chunkJQCMXTY7js.Ca.call(void 0, n.function),i=await _a({key:"entry-function",moduleAddress:e,moduleName:t,functionName:r,aptosConfig:n.aptosConfig,abi:n.abi,fetch:Ta});return _d({...n,abi:i})}function _d(n){let e=n.abi,{moduleAddress:t,moduleName:r,functionName:i}=_chunkJQCMXTY7js.Ca.call(void 0, n.function),o=Yr(n.typeArguments);if(o.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${o.length}`);let s=n.functionArguments.map((c,d)=>io(n.function,e,c,d,o));if(s.length!==e.parameters.length)throw new Error(`Too few arguments for '${t}::${r}::${i}', expected ${e.parameters.length} but got ${s.length}`);let a=dt.build(`${t}::${r}`,i,o,s);if("multisigAddress"in n){let c=_chunkJQCMXTY7js.na.from(n.multisigAddress);return new mn(new Mn(c,new Vn(a)))}return new yn(a)}async function Sa(n){let{moduleAddress:e,moduleName:t,functionName:r}=_chunkJQCMXTY7js.Ca.call(void 0, n.function),i=await _a({key:"view-function",moduleAddress:e,moduleName:t,functionName:r,aptosConfig:n.aptosConfig,abi:n.abi,fetch:wa});return Id({abi:i,...n})}function Id(n){let e=n.abi,{moduleAddress:t,moduleName:r,functionName:i}=_chunkJQCMXTY7js.Ca.call(void 0, n.function),o=Yr(n.typeArguments);if(o.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${o.length}`);let s=_nullishCoalesce(_optionalChain([n, 'optionalAccess', _95 => _95.functionArguments, 'optionalAccess', _96 => _96.map, 'call', _97 => _97((a,c)=>io(n.function,e,a,c,o))]), () => ([]));if(s.length!==e.parameters.length)throw new Error(`Too few arguments for '${t}::${r}::${i}', expected ${e.parameters.length} but got ${s.length}`);return dt.build(`${t}::${r}`,i,o,s)}function xd(n){return new gn(new fn(_chunkJQCMXTY7js.v.fromHexInput(n.bytecode).toUint8Array(),Yr(n.typeArguments),n.functionArguments))}async function vd(n){let{aptosConfig:e,sender:t,payload:r,options:i,feePayerAddress:o}=n;if(_optionalChain([i, 'optionalAccess', _98 => _98.replayProtectionNonce])!==void 0&&_optionalChain([i, 'optionalAccess', _99 => _99.accountSequenceNumber])!==void 0)throw new Error("Cannot specify both replayProtectionNonce and accountSequenceNumber in options.");let s=async()=>_i[e.network]?{chainId:_i[e.network]}:{chainId:(await Mr({aptosConfig:e})).chain_id},a=async()=>_optionalChain([i, 'optionalAccess', _100 => _100.gasUnitPrice])?{gasEstimate:i.gasUnitPrice}:{gasEstimate:(await Wr({aptosConfig:e})).gas_estimate},c=async()=>{let se=async()=>_optionalChain([i, 'optionalAccess', _101 => _101.accountSequenceNumber])!==void 0?i.accountSequenceNumber:_optionalChain([i, 'optionalAccess', _102 => _102.replayProtectionNonce])!==void 0?0xdeadbeefn:(await Lr({aptosConfig:e,accountAddress:t})).sequence_number;if(o&&_chunkJQCMXTY7js.na.from(o).equals(_chunkJQCMXTY7js.na.ZERO))try{return await se()}catch (e5){return 0}else return se()},[{chainId:d},{gasEstimate:m},A]=await Promise.all([s(),a(),c()]),{maxGasAmount:p,gasUnitPrice:g,expireTimestamp:b,replayProtectionNonce:D}={maxGasAmount:_optionalChain([i, 'optionalAccess', _103 => _103.maxGasAmount])?BigInt(i.maxGasAmount):BigInt(e.getDefaultMaxGasAmount()),gasUnitPrice:_nullishCoalesce(_optionalChain([i, 'optionalAccess', _104 => _104.gasUnitPrice]), () => (BigInt(m))),expireTimestamp:_nullishCoalesce(_optionalChain([i, 'optionalAccess', _105 => _105.expireTimestamp]), () => (BigInt(Math.floor(Date.now()/1e3)+e.getDefaultTxnExpirySecFromNow()))),replayProtectionNonce:_optionalChain([i, 'optionalAccess', _106 => _106.replayProtectionNonce])?BigInt(i.replayProtectionNonce):void 0},q=r;return D!==void 0&&(q=Cd(r,D)),new ve(_chunkJQCMXTY7js.na.from(t),BigInt(A),q,BigInt(p),BigInt(g),BigInt(b),new ln(d))}function Cd(n,e){if(n instanceof gn)return new Vt(new Hn(n.script),new Ht(void 0,e));if(n instanceof yn)return new Vt(new hn(n.entryFunction),new Ht(void 0,e));if(n instanceof mn){let t=n.multiSig.transaction_payload,r;if(t===void 0||_optionalChain([t, 'optionalAccess', _107 => _107.transaction_payload])===void 0)r=new Ln;else if(t.transaction_payload instanceof dt)r=new hn(t.transaction_payload);else throw new Error("Scripts are not supported in multi-sig transactions.");return new Vt(r,new Ht(n.multiSig.multisig_address,e))}else throw new Error(`Unsupported payload type: ${n}`)}async function oo(n){let{aptosConfig:e,sender:t,payload:r,options:i,feePayerAddress:o}=n,s=await vd({aptosConfig:e,sender:t,payload:r,options:i,feePayerAddress:o});if("secondarySignerAddresses"in n){let a=_nullishCoalesce(_optionalChain([n, 'access', _108 => _108.secondarySignerAddresses, 'optionalAccess', _109 => _109.map, 'call', _110 => _110(c=>_chunkJQCMXTY7js.na.from(c))]), () => ([]));return new kr(s,a,n.feePayerAddress?_chunkJQCMXTY7js.na.from(n.feePayerAddress):void 0)}return new zr(s,n.feePayerAddress?_chunkJQCMXTY7js.na.from(n.feePayerAddress):void 0)}function Pa(n){let{signerPublicKey:e,transaction:t,secondarySignersPublicKeys:r,feePayerPublicKey:i}=n,o=En(e);if(t.feePayerAddress){let a=new qt(t.rawTransaction,_nullishCoalesce(t.secondarySignerAddresses, () => ([])),t.feePayerAddress),c=[];t.secondarySignerAddresses&&(r?c=r.map(A=>En(A)):c=Array.from({length:t.secondarySignerAddresses.length},()=>En(void 0)));let d=En(i),m=new Qt(o,_nullishCoalesce(t.secondarySignerAddresses, () => ([])),c,{address:t.feePayerAddress,authenticator:d});return new lt(a.raw_txn,m).bcsToBytes()}if(t.secondarySignerAddresses){let a=new Lt(t.rawTransaction,t.secondarySignerAddresses),c=[];r?c=r.map(m=>En(m)):c=Array.from({length:t.secondarySignerAddresses.length},()=>En(void 0));let d=new Wt(o,t.secondarySignerAddresses,c);return new lt(a.raw_txn,d).bcsToBytes()}let s;if(o instanceof Ge)s=new $t(o.public_key,o.signature);else if(o instanceof ue||o instanceof Je)s=new It(o);else if(o instanceof pn)s=new It(o);else throw new Error("Invalid public key");return new lt(t.rawTransaction,s).bcsToBytes()}function En(n){if(!n)return new pn;let t=K.isInstance(n)||L.isInstance(n)||Fe.isInstance(n)?new I(n):n,r=new R(new Uint8Array(64));if(E.isInstance(t))return new Ge(t,r);if(I.isInstance(t))return K.isInstance(t.publicKey)?new ue(t,new B(ce.getSimulationSignature())):new ue(t,new B(r));if(W.isInstance(t))return new Je(t,new Ie({signatures:t.publicKeys.map(i=>K.isInstance(i.publicKey)||L.isInstance(i.publicKey)?new B(ce.getSimulationSignature()):new B(r)),bitmap:t.createBitmap({bits:Array(t.publicKeys.length).fill(0).map((i,o)=>o)})}));throw new Error("Unsupported PublicKey used for simulations")}function so(n){let{transaction:e,feePayerAuthenticator:t,additionalSignersAuthenticators:r}=n,i=Ts(ee,n.senderAuthenticator),o;if(e.feePayerAddress){if(!t)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");o=new Qt(i,_nullishCoalesce(e.secondarySignerAddresses, () => ([])),_nullishCoalesce(r, () => ([])),{address:e.feePayerAddress,authenticator:t})}else if(e.secondarySignerAddresses){if(!r)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");o=new Wt(i,e.secondarySignerAddresses,r)}else i instanceof Ge?o=new $t(i.public_key,i.signature):i instanceof ot?o=new bn(i.public_key,i.signature):o=new It(i);return new lt(e.rawTransaction,o).bcsToBytes()}function Ea(n){let e=_sha3.sha3_256.create();for(let t of n)e.update(t);return e.digest()}var Kd=Ea(["APTOS::Transaction"]);function ZS(n){let e=so(n);return new (0, _chunkJQCMXTY7js.v)(Ea([Kd,new Uint8Array([0]),e])).toString()}async function _a({key:n,moduleAddress:e,moduleName:t,functionName:r,aptosConfig:i,abi:o,fetch:s}){return o!==void 0?o:$e(async()=>s(e,t,r,i),`${n}-${i.network}-${e}-${t}-${r}`,1e3*60*5)()}async function T(n){let e=await Rd(n);return Ud(n,e)}async function Rd(n){let{aptosConfig:e,data:t}=n,r,i;return"bytecode"in t?i=await ei(t):"multisigAddress"in t?(r={aptosConfig:e,multisigAddress:t.multisigAddress,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},i=await ei(r)):(r={aptosConfig:e,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},i=await ei(r)),i}async function Ud(n,e){let{aptosConfig:t,sender:r,options:i}=n,o;if(zd(n)&&(o=_chunkJQCMXTY7js.na.ZERO.toString()),kd(n)){let{secondarySignerAddresses:s}=n;return oo({aptosConfig:t,sender:r,payload:e,options:i,secondarySignerAddresses:s,feePayerAddress:o})}return oo({aptosConfig:t,sender:r,payload:e,options:i,feePayerAddress:o})}function zd(n){return n.withFeePayer===!0}function kd(n){return"secondarySignerAddresses"in n}function Ia(n){let{transaction:e}=n;return Me(e)}function ti(n){let{signer:e,transaction:t}=n;return e.signTransactionWithAuthenticator(t)}function ni(n){let{signer:e,transaction:t}=n;if(!t.feePayerAddress)throw new Error(`Transaction ${t} is not a Fee Payer transaction`);return t.feePayerAddress=e.accountAddress,ti({signer:e,transaction:t})}async function ao(n){let{aptosConfig:e,transaction:t,signerPublicKey:r,secondarySignersPublicKeys:i,feePayerPublicKey:o,options:s}=n,a=Pa({transaction:t,signerPublicKey:r,secondarySignersPublicKeys:i,feePayerPublicKey:o,options:s}),{data:c}=await St({aptosConfig:e,body:a,path:"transactions/simulate",params:{estimate_gas_unit_price:_nullishCoalesce(_optionalChain([n, 'access', _111 => _111.options, 'optionalAccess', _112 => _112.estimateGasUnitPrice]), () => (!1)),estimate_max_gas_amount:_nullishCoalesce(_optionalChain([n, 'access', _113 => _113.options, 'optionalAccess', _114 => _114.estimateMaxGasAmount]), () => (!1)),estimate_prioritized_gas_unit_price:_nullishCoalesce(_optionalChain([n, 'access', _115 => _115.options, 'optionalAccess', _116 => _116.estimatePrioritizedGasUnitPrice]), () => (!1))},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return c}async function jn(n){let{aptosConfig:e,transactionSubmitter:t}=n,r=t===void 0?e.getTransactionSubmitter():t;if(r)return r.submitTransaction(n);let i=so({...n});try{let{data:o}=await St({aptosConfig:e,body:i,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return o}catch(o){let s=lt.deserialize(new C(i));throw s.authenticator.isSingleSender()&&s.authenticator.sender.isSingleKey()&&(s.authenticator.sender.public_key.publicKey instanceof K||s.authenticator.sender.public_key.publicKey instanceof L)&&await Te.fetchJWK({aptosConfig:e,publicKey:s.authenticator.sender.public_key.publicKey,kid:s.authenticator.sender.signature.signature.getJwkKid()}),o}}async function ri(n){let{aptosConfig:e,signer:t,feePayer:r,transaction:i,...o}=n;Fr(t)&&await t.checkKeylessAccountValidity(e),Fr(r)&&await r.checkKeylessAccountValidity(e);let s=n.feePayerAuthenticator||r&&ni({signer:r,transaction:i}),a=ti({signer:t,transaction:i});return jn({aptosConfig:e,transaction:i,senderAuthenticator:a,feePayerAuthenticator:s,...o})}async function xa(n){let{aptosConfig:e,senderAuthenticator:t,feePayer:r,transaction:i,...o}=n;Fr(r)&&await r.checkKeylessAccountValidity(e);let s=ni({signer:r,transaction:i});return jn({aptosConfig:e,transaction:i,senderAuthenticator:t,feePayerAuthenticator:s,...o})}var Nd={typeParameters:[],parameters:[z.u8(),new z(z.u8())]};async function va(n){let{aptosConfig:e,account:t,metadataBytes:r,moduleBytecode:i,options:o}=n,s=i.map(a=>S.U8(a));return T({aptosConfig:e,sender:_chunkJQCMXTY7js.na.from(t),data:{function:"0x1::code::publish_package_txn",functionArguments:[S.U8(r),new S(s)],abi:Nd},options:o})}async function _n(n){return Lr(n)}async function Ca(n){let{aptosConfig:e,accountAddress:t,options:r}=n;return vi({aptosConfig:e,originMethod:"getModules",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}/modules`,params:{ledger_version:_optionalChain([r, 'optionalAccess', _117 => _117.ledgerVersion]),limit:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _118 => _118.limit]), () => (1e3))}})}async function Ka(n){let{aptosConfig:e,accountAddress:t,options:r}=n,{response:i,cursor:o}=await Sr({aptosConfig:e,originMethod:"getModulesPage",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}/modules`,params:{ledger_version:_optionalChain([r, 'optionalAccess', _119 => _119.ledgerVersion]),cursor:_optionalChain([r, 'optionalAccess', _120 => _120.cursor]),limit:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _121 => _121.limit]), () => (100))}});return{modules:i.data,cursor:o}}async function Zr(n){return oa(n)}async function uo(n){let{aptosConfig:e,accountAddress:t,options:r}=n;return wr({aptosConfig:e,originMethod:"getTransactions",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}/transactions`,params:{start:_optionalChain([r, 'optionalAccess', _122 => _122.offset]),limit:_optionalChain([r, 'optionalAccess', _123 => _123.limit])}})}async function po(n){let{aptosConfig:e,accountAddress:t,options:r}=n;return vi({aptosConfig:e,originMethod:"getResources",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}/resources`,params:{ledger_version:_optionalChain([r, 'optionalAccess', _124 => _124.ledgerVersion]),limit:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _125 => _125.limit]), () => (999))}})}async function Ra(n){let{aptosConfig:e,accountAddress:t,options:r}=n,{response:i,cursor:o}=await Sr({aptosConfig:e,originMethod:"getResourcesPage",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}/resources`,params:{ledger_version:_optionalChain([r, 'optionalAccess', _126 => _126.ledgerVersion]),cursor:_optionalChain([r, 'optionalAccess', _127 => _127.cursor]),limit:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _128 => _128.limit]), () => (100))}});return{resources:i.data,cursor:o}}async function lo(n){let{aptosConfig:e,accountAddress:t,resourceType:r,options:i}=n,{data:o}=await H({aptosConfig:e,originMethod:"getResource",path:`accounts/${_chunkJQCMXTY7js.na.from(t).toString()}/resource/${r}`,params:{ledger_version:_optionalChain([i, 'optionalAccess', _129 => _129.ledgerVersion])}});return o.data}async function Jn(n){let{aptosConfig:e,authenticationKey:t,options:r}=n,i=await lo({aptosConfig:e,accountAddress:"0x1",resourceType:"0x1::account::OriginatingAddress",options:r}),{address_map:{handle:o}}=i,s=_chunkJQCMXTY7js.na.from(t);try{let a=await qr({aptosConfig:e,handle:o,data:{key:s.toString(),key_type:"address",value_type:"address"},options:r});return _chunkJQCMXTY7js.na.from(a)}catch(a){if(a instanceof Ee&&a.data.error_code==="table_item_not_found")return s;throw a}}async function Ua(n){let{aptosConfig:e,accountAddress:t}=n,i={owner_address:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()},amount:{_gt:0}},s=await w({aptosConfig:e,query:{query:Ls,variables:{where_condition:i}},originMethod:"getAccountTokensCount"});return s.current_token_ownerships_v2_aggregate.aggregate?s.current_token_ownerships_v2_aggregate.aggregate.count:0}async function za(n){let{aptosConfig:e,accountAddress:t,options:r}=n,o={owner_address:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()},amount:{_gt:0}};_optionalChain([r, 'optionalAccess', _130 => _130.tokenStandard])&&(o.token_standard={_eq:_optionalChain([r, 'optionalAccess', _131 => _131.tokenStandard])});let s={query:Vs,variables:{where_condition:o,offset:_optionalChain([r, 'optionalAccess', _132 => _132.offset]),limit:_optionalChain([r, 'optionalAccess', _133 => _133.limit]),order_by:_optionalChain([r, 'optionalAccess', _134 => _134.orderBy])}};return(await w({aptosConfig:e,query:s,originMethod:"getAccountOwnedTokens"})).current_token_ownerships_v2}async function ka(n){let{aptosConfig:e,accountAddress:t,collectionAddress:r,options:i}=n,o=_chunkJQCMXTY7js.na.from(t).toStringLong(),s=_chunkJQCMXTY7js.na.from(r).toStringLong(),a={owner_address:{_eq:o},current_token_data:{collection_id:{_eq:s}},amount:{_gt:0}};_optionalChain([i, 'optionalAccess', _135 => _135.tokenStandard])&&(a.token_standard={_eq:_optionalChain([i, 'optionalAccess', _136 => _136.tokenStandard])});let c={query:Hs,variables:{where_condition:a,offset:_optionalChain([i, 'optionalAccess', _137 => _137.offset]),limit:_optionalChain([i, 'optionalAccess', _138 => _138.limit]),order_by:_optionalChain([i, 'optionalAccess', _139 => _139.orderBy])}};return(await w({aptosConfig:e,query:c,originMethod:"getAccountOwnedTokensFromCollectionAddress"})).current_token_ownerships_v2}async function Na(n){let{aptosConfig:e,accountAddress:t,options:r}=n,o={owner_address:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()}};_optionalChain([r, 'optionalAccess', _140 => _140.tokenStandard])&&(o.current_collection={token_standard:{_eq:_optionalChain([r, 'optionalAccess', _141 => _141.tokenStandard])}});let s={query:Ms,variables:{where_condition:o,offset:_optionalChain([r, 'optionalAccess', _142 => _142.offset]),limit:_optionalChain([r, 'optionalAccess', _143 => _143.limit]),order_by:_optionalChain([r, 'optionalAccess', _144 => _144.orderBy])}};return(await w({aptosConfig:e,query:s,originMethod:"getAccountCollectionsWithOwnedTokens"})).current_collection_ownership_v2_view}async function Da(n){let{aptosConfig:e,accountAddress:t}=n,r=_chunkJQCMXTY7js.na.from(t).toStringLong(),o=await w({aptosConfig:e,query:{query:qs,variables:{address:r}},originMethod:"getAccountTransactionsCount"});return o.account_transactions_aggregate.aggregate?o.account_transactions_aggregate.aggregate.count:0}async function Fa(n){let{aptosConfig:e,accountAddress:t,options:r}=n,i=_chunkJQCMXTY7js.na.from(t).toStringLong(),o={..._optionalChain([r, 'optionalAccess', _145 => _145.where]),owner_address:{_eq:i}},s={query:Gs,variables:{where_condition:o,offset:_optionalChain([r, 'optionalAccess', _146 => _146.offset]),limit:_optionalChain([r, 'optionalAccess', _147 => _147.limit]),order_by:_optionalChain([r, 'optionalAccess', _148 => _148.orderBy])}};return(await w({aptosConfig:e,query:s,originMethod:"getAccountCoinsData"})).current_fungible_asset_balances}async function Oa(n){let{aptosConfig:e,accountAddress:t}=n,r=_chunkJQCMXTY7js.na.from(t).toStringLong(),o=await w({aptosConfig:e,query:{query:Bs,variables:{address:r}},originMethod:"getAccountCoinsCount"});if(!o.current_fungible_asset_balances_aggregate.aggregate)throw Error("Failed to get the count of account coins");return o.current_fungible_asset_balances_aggregate.aggregate.count}async function Ba(n){let{aptosConfig:e,accountAddress:t,asset:r}=n,i=await H({aptosConfig:e,originMethod:"getBalance",path:`accounts/${t}/balance/${r}`,params:{accountAddress:t.toString(),asset:r instanceof Uint8Array?_chunkJQCMXTY7js.na.from(r).toString():r.toString()}});return parseInt(i.data.toString(),10)}async function go(n){let{aptosConfig:e,accountAddress:t,options:r}=n,o={owner_address:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()}},s={query:Gr,variables:{where_condition:o,offset:_optionalChain([r, 'optionalAccess', _149 => _149.offset]),limit:_optionalChain([r, 'optionalAccess', _150 => _150.limit]),order_by:_optionalChain([r, 'optionalAccess', _151 => _151.orderBy])}};return(await w({aptosConfig:e,query:s,originMethod:"getAccountOwnedObjects"})).current_objects}async function Ga(n){let{aptosConfig:e,privateKey:t,options:r}=n,i=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _152 => _152.throwIfNoAccountFound]), () => (!1)),o=await ii({aptosConfig:e,privateKey:t});if(o.length===0){if(i)throw new Error("No existing account found for private key.");return gt.fromPrivateKey({privateKey:t})}return o[0]}async function Dd(n){let{aptosConfig:e,accountAddress:t,options:r}=n;try{let[i,o]=await Promise.all([po({aptosConfig:e,accountAddress:t}),go({aptosConfig:e,accountAddress:t,options:{limit:1}})]),s=i.find(c=>c.type==="0x1::account::Account");if(!s&&o.length===0)return!1;if(!_optionalChain([r, 'optionalAccess', _153 => _153.withAuthKey]))return!0;let a;return s?a=s.data.authentication_key:a=t.toStringLong(),a===r.withAuthKey.toString()}catch(i){throw new Error(`Error while checking if account exists at ${t.toString()}: ${i}`)}}var Fd={typeParameters:[],parameters:[new de,z.u8(),new de,z.u8(),z.u8(),z.u8()]};async function Ma(n){let{aptosConfig:e,fromAccount:t,options:r}=n;if("toNewPrivateKey"in n)return co({aptosConfig:e,fromAccount:t,toNewPrivateKey:n.toNewPrivateKey,options:r});if("toAccount"in n)return n.toAccount instanceof ie?co({aptosConfig:e,fromAccount:t,toNewPrivateKey:n.toAccount.privateKey,options:r}):co({aptosConfig:e,fromAccount:t,toAccount:n.toAccount,options:r});throw new Error("Invalid arguments")}async function co(n){let{aptosConfig:e,fromAccount:t,options:r}=n,i=await _n({aptosConfig:e,accountAddress:t.accountAddress}),o;"toNewPrivateKey"in n?o=gt.fromPrivateKey({privateKey:n.toNewPrivateKey,legacy:!0}):o=n.toAccount;let a=new Ur({sequenceNumber:BigInt(i.sequence_number),originator:t.accountAddress,currentAuthKey:_chunkJQCMXTY7js.na.from(i.authentication_key),newPublicKey:o.publicKey}).bcsToBytes(),c=t.sign(a),d=o.sign(a);return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new Z(t.signingScheme),S.U8(t.publicKey.toUint8Array()),new Z(o.signingScheme),S.U8(o.publicKey.toUint8Array()),S.U8(c.toUint8Array()),S.U8(d.toUint8Array())],abi:Fd},options:r})}var Od={typeParameters:[],parameters:[new de,z.u8()]};async function Va(n){let{aptosConfig:e,fromAccount:t,toNewPublicKey:r,options:i}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key_from_public_key",functionArguments:[new Z(Rs(r)),S.U8(Bi(r).toUint8Array())],abi:Od},options:i})}async function oi(n){let{aptosConfig:e,publicKey:t,options:r}=n,i=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _154 => _154.noMultiKey]), () => (!1));if(i&&t instanceof Oe)throw new Error("Multi-key accounts are not supported when noMultiKey is true.");let o=[t];t instanceof I&&t.publicKey instanceof E?o.push(t.publicKey):t instanceof E&&o.push(new I(t));let[s,a]=await Promise.all([Promise.all(o.map(async A=>{let p=await Hd({aptosConfig:e,publicKey:A});if(p)return{...p,publicKey:A}})),!(t instanceof Oe)&&!i?Gd({aptosConfig:e,publicKey:t,options:r}):Promise.resolve([])]),c=[];for(let A of s)A&&c.push(A);o.push(...a);let d=new Map(o.map(A=>[A.authKey().toString(),A])),m=await Md({aptosConfig:e,authKeys:o.map(A=>A.authKey()),options:r});for(let A of m){if(c.find(g=>g.accountAddress===A.accountAddress))continue;let p=d.get(A.authKey.toString());if(!p)throw new Error(`No publicKey found for authentication key ${A.authKey}. This should never happen.`);c.push({accountAddress:A.accountAddress,publicKey:p,lastTransactionVersion:A.lastTransactionVersion})}return c.sort((A,p)=>p.lastTransactionVersion-A.lastTransactionVersion)}async function yo(n){let{aptosConfig:e,signer:t,options:r}=n;if(t instanceof J||t instanceof rt)return ii({aptosConfig:e,privateKey:t,options:r});if(t instanceof ie||t instanceof pe)return ii({aptosConfig:e,privateKey:t.privateKey,options:r});if(t instanceof Ce||t instanceof Ve)return Bd({aptosConfig:e,keylessAccount:t,options:r});if(t instanceof yt&&t.signers.length===1)return yo({aptosConfig:e,signer:t.signers[0],options:r});if(t instanceof qn&&t.signers.length===1)return ii({aptosConfig:e,privateKey:t.signers[0],options:r});throw new Error("Unknown signer type")}async function Bd(n){let{aptosConfig:e,keylessAccount:t,options:r}=n,i=await oi({aptosConfig:e,publicKey:t.getAnyPublicKey(),options:r}),o={proof:t.proofOrPromise,jwt:t.jwt,ephemeralKeyPair:t.ephemeralKeyPair,pepper:t.pepper,verificationKeyHash:t.verificationKeyHash},s=[];for(let{accountAddress:a,publicKey:c}of i)if(c instanceof Oe){if(c.getSignaturesRequired()>1)continue;if(c instanceof re)throw new Error("Keyless authentication cannot be used for multi-ed25519 accounts. This should never happen.");c instanceof W&&s.push(new yt({multiKey:c,signers:[t],address:a}))}else t instanceof Ve?s.push(Ve.create({...o,address:a,jwkAddress:t.publicKey.jwkAddress})):s.push(Ce.create({...o,address:a}));return s}async function ii(n){let{aptosConfig:e,privateKey:t,options:r}=n,i=gt.fromPrivateKey({privateKey:t,legacy:!1}),o=await oi({aptosConfig:e,publicKey:new I(t.publicKey()),options:r}),s=[];for(let{accountAddress:a,publicKey:c}of o)if(c instanceof Oe){if(c.getSignaturesRequired()>1)continue;c instanceof re?s.push(new qn({publicKey:c,signers:[t],address:a})):c instanceof W&&s.push(new yt({multiKey:c,signers:[i],address:a}))}else{let d=c instanceof E;s.push(gt.fromPrivateKey({privateKey:t,address:a,legacy:d}))}return s}async function Gd(n){let{aptosConfig:e,publicKey:t,options:r}=n;if(t instanceof Oe)throw new Error("Public key is a multi-key.");let i=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _155 => _155.includeUnverified]), () => (!1)),o=t instanceof I?t:new I(t),s=o.publicKey,a=_chunkJQCMXTY7js.O.call(void 0, o.variant),c={public_key:{_eq:s.toString()},public_key_type:{_eq:a},account_public_key:{_is_null:!1},...i?{}:{is_public_key_used:{_eq:!0}}},d={query:$s,variables:{where_condition:c}},{public_key_auth_keys:m}=await w({aptosConfig:e,query:d,originMethod:"getMultiKeysForPublicKey"});return m.filter(p=>p.account_public_key!==null).map(p=>{switch(p.signature_type){case"multi_ed25519_signature":return re.deserializeWithoutLength(C.fromHex(p.account_public_key));case"multi_key_signature":return W.deserialize(C.fromHex(p.account_public_key));default:throw new Error(`Unknown multi-signature type: ${p.signature_type}`)}})}async function Md(n){let{aptosConfig:e,authKeys:t,options:r}=n,i=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _156 => _156.includeUnverified]), () => (!1));if(t.length===0)throw new Error("No authentication keys provided");let o={auth_key:{_in:t.map(c=>c.toString())},...i?{}:{is_auth_key_used:{_eq:!0}}},s={query:Os,variables:{where_condition:o,order_by:[{last_transaction_version:"desc"}]}},{auth_key_account_addresses:a}=await w({aptosConfig:e,query:s,originMethod:"getAccountAddressesForAuthKeys"});return a.map(c=>({authKey:new V({data:c.auth_key}),accountAddress:new (0, _chunkJQCMXTY7js.na)(_chunkJQCMXTY7js.v.hexInputToUint8Array(c.account_address)),lastTransactionVersion:Number(c.last_transaction_version)}))}async function Vd(n){let{aptosConfig:e,accountAddress:t}=n,r=await uo({aptosConfig:e,accountAddress:t,options:{limit:1}});return r.length===0?0:Number(r[0].version)}async function Hd(n){let{aptosConfig:e,publicKey:t}=n,r=t.authKey().derivedAddress(),[i,o]=await Promise.all([Vd({aptosConfig:e,accountAddress:r}),Dd({aptosConfig:e,accountAddress:r,options:{withAuthKey:t.authKey()}})]);if(o)return{accountAddress:r,lastTransactionVersion:i}}async function P(n){n.minimumLedgerVersion!==void 0&&await Qr({aptosConfig:n.config,minimumLedgerVersion:n.minimumLedgerVersion,processorType:n.processorType})}async function le(n){let{aptosConfig:e,payload:t,options:r}=n,i=await Sa({...t,aptosConfig:e}),o=new _chunkJQCMXTY7js.y;i.serialize(o);let s=o.toUint8Array(),{data:a}=await St({aptosConfig:e,path:"view",originMethod:"view",contentType:"application/x.aptos.view_function+bcs",params:{ledger_version:_optionalChain([r, 'optionalAccess', _157 => _157.ledgerVersion])},body:s});return a}async function Ha(n){let{aptosConfig:e,payload:t,options:r}=n,{data:i}=await St({aptosConfig:e,originMethod:"viewJson",path:"view",params:{ledger_version:_optionalChain([r, 'optionalAccess', _158 => _158.ledgerVersion])},body:{function:t.function,type_arguments:_nullishCoalesce(t.typeArguments, () => ([])),arguments:_nullishCoalesce(t.functionArguments, () => ([]))}});return i}async function La(n){let{aptosConfig:e,sender:t,authenticationFunction:r,options:i}=n,{moduleAddress:o,moduleName:s,functionName:a}=_chunkJQCMXTY7js.Ca.call(void 0, r);return T({aptosConfig:e,sender:t,data:{function:"0x1::account_abstraction::add_authentication_function",typeArguments:[],functionArguments:[o,s,a],abi:{typeParameters:[],parameters:[new G,new h(x()),new h(x())]}},options:i})}async function qa(n){let{aptosConfig:e,sender:t,authenticationFunction:r,options:i}=n,{moduleAddress:o,moduleName:s,functionName:a}=_chunkJQCMXTY7js.Ca.call(void 0, r);return T({aptosConfig:e,sender:t,data:{function:"0x1::account_abstraction::remove_authentication_function",typeArguments:[],functionArguments:[o,s,a],abi:{typeParameters:[],parameters:[new G,new h(x()),new h(x())]}},options:i})}async function $a(n){let{aptosConfig:e,sender:t,options:r}=n;return T({aptosConfig:e,sender:t,data:{function:"0x1::account_abstraction::remove_authenticator",typeArguments:[],functionArguments:[],abi:{typeParameters:[],parameters:[]}},options:r})}var Xt=class{constructor(e){this.config=e;this.isAccountAbstractionEnabled=async e=>{let t=await this.getAuthenticationFunction(e),{moduleAddress:r,moduleName:i,functionName:o}=_chunkJQCMXTY7js.Ca.call(void 0, e.authenticationFunction);return _nullishCoalesce(_optionalChain([t, 'optionalAccess', _159 => _159.some, 'call', _160 => _160(s=>_chunkJQCMXTY7js.na.fromString(r).equals(s.moduleAddress)&&i===s.moduleName&&o===s.functionName)]), () => (!1))};this.enableAccountAbstractionTransaction=this.addAuthenticationFunctionTransaction;this.disableAccountAbstractionTransaction=async e=>{let{accountAddress:t,authenticationFunction:r,options:i}=e;return r?this.removeAuthenticationFunctionTransaction({accountAddress:t,authenticationFunction:r,options:i}):this.removeDispatchableAuthenticatorTransaction({accountAddress:t,options:i})}}async addAuthenticationFunctionTransaction(e){let{accountAddress:t,authenticationFunction:r,options:i}=e;return La({aptosConfig:this.config,authenticationFunction:r,sender:t,options:i})}async removeAuthenticationFunctionTransaction(e){let{accountAddress:t,authenticationFunction:r,options:i}=e;return qa({aptosConfig:this.config,sender:t,authenticationFunction:r,options:i})}async removeDispatchableAuthenticatorTransaction(e){let{accountAddress:t,options:r}=e;return $a({aptosConfig:this.config,sender:t,options:r})}async getAuthenticationFunction(e){let{accountAddress:t}=e,[{vec:r}]=await le({aptosConfig:this.config,payload:{function:"0x1::account_abstraction::dispatchable_authenticator",functionArguments:[_chunkJQCMXTY7js.na.from(t)],abi:{typeParameters:[],parameters:[new G],returnTypes:[]}}});if(r.length!==0)return r[0].map(i=>({moduleAddress:_chunkJQCMXTY7js.na.fromString(i.module_address),moduleName:i.module_name,functionName:i.function_name}))}};var Xn=class{constructor(e){this.config=e;this.abstraction=new Xt(e)}async getAccountInfo(e){return _n({aptosConfig:this.config,...e})}async getAccountModules(e){return Ca({aptosConfig:this.config,...e})}async getAccountModulesPage(e){return Ka({aptosConfig:this.config,...e})}async getAccountModule(e){return Zr({aptosConfig:this.config,...e})}async getAccountTransactions(e){return uo({aptosConfig:this.config,...e})}async getAccountResources(e){return po({aptosConfig:this.config,...e})}async getAccountResourcesPage(e){return Ra({aptosConfig:this.config,...e})}async getAccountResource(e){return lo({aptosConfig:this.config,...e})}async lookupOriginalAccountAddress(e){return Jn({aptosConfig:this.config,...e})}async getAccountTokensCount(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_transactions_processor"}),Ua({aptosConfig:this.config,...e})}async getAccountOwnedTokens(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),za({aptosConfig:this.config,...e})}async getAccountOwnedTokensFromCollectionAddress(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),ka({aptosConfig:this.config,...e})}async getAccountCollectionsWithOwnedTokens(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Na({aptosConfig:this.config,...e})}async getAccountTransactionsCount(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_transactions_processor"}),Da({aptosConfig:this.config,...e})}async getAccountCoinsData(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Fa({aptosConfig:this.config,...e})}async getAccountCoinsCount(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Oa({aptosConfig:this.config,...e})}async getAccountAPTAmount(e){return this.getAccountCoinAmount({coinType:Rt,faMetadataAddress:fs,...e})}async getAccountCoinAmount(e){let{accountAddress:t,coinType:r,faMetadataAddress:i}=e,o=r;r===void 0&&i!==void 0&&(o=await $e(async()=>{try{let c=(await le({aptosConfig:this.config,payload:{function:"0x1::coin::paired_coin",functionArguments:[i]}}))[0];if(c.vec.length>0&&_chunkJQCMXTY7js.Ba.call(void 0, c.vec[0]))return _chunkJQCMXTY7js.Aa.call(void 0, c.vec[0])}catch (e6){}},`coin-mapping-${i.toString()}`,1e3*60*5)());let s;if(r!==void 0&&i!==void 0)s=_chunkJQCMXTY7js.na.from(i).toStringLong();else if(r!==void 0&&i===void 0)r===Rt?s=_chunkJQCMXTY7js.na.A.toStringLong():s=_chunkJQCMXTY7js.oa.call(void 0, _chunkJQCMXTY7js.na.A,r).toStringLong();else if(r===void 0&&i!==void 0){let c=_chunkJQCMXTY7js.na.from(i);s=c.toStringLong(),c===_chunkJQCMXTY7js.na.A&&(o=Rt)}else throw new Error("Either coinType, faMetadataAddress, or both must be provided");if(o!==void 0){let[c]=await le({aptosConfig:this.config,payload:{function:"0x1::coin::balance",typeArguments:[o],functionArguments:[t]}});return parseInt(c,10)}let[a]=await le({aptosConfig:this.config,payload:{function:"0x1::primary_fungible_store::balance",typeArguments:["0x1::object::ObjectCore"],functionArguments:[t,s]}});return parseInt(a,10)}async getBalance(e){return Ba({aptosConfig:this.config,...e})}async getAccountOwnedObjects(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),go({aptosConfig:this.config,...e})}async deriveAccountFromPrivateKey(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_restoration_processor"}),await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"objects_processor"}),Ga({aptosConfig:this.config,...e})}async deriveOwnedAccountsFromSigner(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_restoration_processor"}),await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"objects_processor"}),yo({aptosConfig:this.config,...e})}async getAccountsForPublicKey(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_restoration_processor"}),await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"objects_processor"}),oi({aptosConfig:this.config,...e})}};var _aptosclient = require('@aptos-labs/aptos-client'); var _aptosclient2 = _interopRequireDefault(_aptosclient);var si=class{constructor(e){if(_optionalChain([e, 'optionalAccess', _161 => _161.fullnode])||_optionalChain([e, 'optionalAccess', _162 => _162.indexer])||_optionalChain([e, 'optionalAccess', _163 => _163.faucet])||_optionalChain([e, 'optionalAccess', _164 => _164.pepper])||_optionalChain([e, 'optionalAccess', _165 => _165.prover])){if(_optionalChain([e, 'optionalAccess', _166 => _166.network])==="custom")console.info("Note: using CUSTOM network will require queries to lookup ChainId");else if(!_optionalChain([e, 'optionalAccess', _167 => _167.network]))throw new Error("Custom endpoints require a network to be specified")}this.network=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _168 => _168.network]), () => ("devnet")),this.fullnode=_optionalChain([e, 'optionalAccess', _169 => _169.fullnode]),this.faucet=_optionalChain([e, 'optionalAccess', _170 => _170.faucet]),this.pepper=_optionalChain([e, 'optionalAccess', _171 => _171.pepper]),this.prover=_optionalChain([e, 'optionalAccess', _172 => _172.prover]),this.indexer=_optionalChain([e, 'optionalAccess', _173 => _173.indexer]),this.client=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _174 => _174.client]), () => ({provider:_aptosclient2.default})),this.clientConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _175 => _175.clientConfig]), () => ({})),this.fullnodeConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _176 => _176.fullnodeConfig]), () => ({})),this.indexerConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _177 => _177.indexerConfig]), () => ({})),this.faucetConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _178 => _178.faucetConfig]), () => ({})),this.transactionGenerationConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _179 => _179.transactionGenerationConfig]), () => ({})),this.pluginConfig=_optionalChain([e, 'optionalAccess', _180 => _180.pluginSettings])?{...e.pluginSettings,IGNORE_TRANSACTION_SUBMITTER:!1}:void 0}getRequestUrl(e){switch(e){case"Fullnode":if(this.fullnode!==void 0)return this.fullnode;if(this.network==="custom")throw new Error("Please provide a custom full node url");return ls[this.network];case"Faucet":if(this.faucet!==void 0)return this.faucet;if(this.network==="testnet")throw new Error("There is no way to programmatically mint testnet APT, you must use the minting site at https://aptos.dev/network/faucet");if(this.network==="mainnet")throw new Error("There is no mainnet faucet");if(this.network==="custom")throw new Error("Please provide a custom faucet url");return gs[this.network];case"Indexer":if(this.indexer!==void 0)return this.indexer;if(this.network==="custom")throw new Error("Please provide a custom indexer url");return ps[this.network];case"Pepper":if(this.pepper!==void 0)return this.pepper;if(this.network==="custom")throw new Error("Please provide a custom pepper service url");return Si[this.network];case"Prover":if(this.prover!==void 0)return this.prover;if(this.network==="custom")throw new Error("Please provide a custom prover service url");return Pi[this.network];default:throw Error(`apiType ${e} is not supported`)}}isPepperServiceRequest(e){return Si[this.network]===e}isProverServiceRequest(e){return Pi[this.network]===e}getDefaultMaxGasAmount(){return _nullishCoalesce(_optionalChain([this, 'access', _181 => _181.transactionGenerationConfig, 'optionalAccess', _182 => _182.defaultMaxGasAmount]), () => (2e5))}getDefaultTxnExpirySecFromNow(){return _nullishCoalesce(_optionalChain([this, 'access', _183 => _183.transactionGenerationConfig, 'optionalAccess', _184 => _184.defaultTxnExpirySecFromNow]), () => (20))}setIgnoreTransactionSubmitter(e){this.pluginConfig&&(this.pluginConfig.IGNORE_TRANSACTION_SUBMITTER=e)}getTransactionSubmitter(){if(this.pluginConfig!==void 0&&this.pluginConfig.IGNORE_TRANSACTION_SUBMITTER!==!0)return this.pluginConfig.TRANSACTION_SUBMITTER}};var qd={typeParameters:[{constraints:[]}],parameters:[new G,new te]};async function Wa(n){let{aptosConfig:e,sender:t,recipient:r,amount:i,coinType:o,options:s}=n;return T({aptosConfig:e,sender:t,data:{function:"0x1::aptos_account::transfer_coins",typeArguments:[_nullishCoalesce(o, () => (Rt))],functionArguments:[r,i],abi:qd},options:s})}var Yn=class{constructor(e){this.config=e}async transferCoinTransaction(e){return Wa({aptosConfig:this.config,...e})}};var xt={BOOLEAN:"bool",U8:"u8",U16:"u16",U32:"u32",U64:"u64",U128:"u128",U256:"u256",ADDRESS:"address",STRING:"0x1::string::String",ARRAY:"vector<u8>"},Ke="0x4::token::Token";async function Qa(n){let{aptosConfig:e,digitalAssetAddress:t}=n,r={token_data_id:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()}};return(await w({aptosConfig:e,query:{query:na,variables:{where_condition:r}},originMethod:"getDigitalAssetData"})).current_token_datas_v2[0]}async function ja(n){let{aptosConfig:e,digitalAssetAddress:t}=n,r={token_data_id:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()},amount:{_gt:0}};return(await w({aptosConfig:e,query:{query:qi,variables:{where_condition:r}},originMethod:"getCurrentDigitalAssetOwnership"})).current_token_ownerships_v2[0]}async function Ja(n){let{aptosConfig:e,ownerAddress:t,options:r}=n,i={owner_address:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()},amount:{_gt:0}},o={query:qi,variables:{where_condition:i,offset:_optionalChain([r, 'optionalAccess', _185 => _185.offset]),limit:_optionalChain([r, 'optionalAccess', _186 => _186.limit]),order_by:_optionalChain([r, 'optionalAccess', _187 => _187.orderBy])}};return(await w({aptosConfig:e,query:o,originMethod:"getOwnedDigitalAssets"})).current_token_ownerships_v2}async function Xa(n){let{aptosConfig:e,digitalAssetAddress:t,options:r}=n,i={token_data_id:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()}},o={query:ta,variables:{where_condition:i,offset:_optionalChain([r, 'optionalAccess', _188 => _188.offset]),limit:_optionalChain([r, 'optionalAccess', _189 => _189.limit]),order_by:_optionalChain([r, 'optionalAccess', _190 => _190.orderBy])}};return(await w({aptosConfig:e,query:o,originMethod:"getDigitalAssetActivity"})).token_activities_v2}var $d={typeParameters:[],parameters:[new h(x()),new te,new h(x()),new h(x()),new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q,new te,new te]};async function Ya(n){let{aptosConfig:e,options:t,creator:r}=n;return T({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::create_collection",functionArguments:[new v(n.description),new $(_nullishCoalesce(n.maxSupply, () => (_chunkJQCMXTY7js.e))),new v(n.name),new v(n.uri),new F(_nullishCoalesce(n.mutableDescription, () => (!0))),new F(_nullishCoalesce(n.mutableRoyalty, () => (!0))),new F(_nullishCoalesce(n.mutableURI, () => (!0))),new F(_nullishCoalesce(n.mutableTokenDescription, () => (!0))),new F(_nullishCoalesce(n.mutableTokenName, () => (!0))),new F(_nullishCoalesce(n.mutableTokenProperties, () => (!0))),new F(_nullishCoalesce(n.mutableTokenURI, () => (!0))),new F(_nullishCoalesce(n.tokensBurnableByCreator, () => (!0))),new F(_nullishCoalesce(n.tokensFreezableByCreator, () => (!0))),new $(_nullishCoalesce(n.royaltyNumerator, () => (0))),new $(_nullishCoalesce(n.royaltyDenominator, () => (1)))],abi:$d},options:t})}async function In(n){let{aptosConfig:e,options:t}=n,r=_optionalChain([t, 'optionalAccess', _191 => _191.where]);_optionalChain([t, 'optionalAccess', _192 => _192.tokenStandard])&&(r.token_standard={_eq:_nullishCoalesce(_optionalChain([t, 'optionalAccess', _193 => _193.tokenStandard]), () => ("v2"))});let i={query:Qs,variables:{where_condition:r,offset:_optionalChain([t, 'optionalAccess', _194 => _194.offset]),limit:_optionalChain([t, 'optionalAccess', _195 => _195.limit])}};return(await w({aptosConfig:e,query:i,originMethod:"getCollectionData"})).current_collections_v2[0]}async function Za(n){let{aptosConfig:e,creatorAddress:t,collectionName:r,options:i}=n,o=_chunkJQCMXTY7js.na.from(t),s={collection_name:{_eq:r},creator_address:{_eq:o.toStringLong()}};return _optionalChain([i, 'optionalAccess', _196 => _196.tokenStandard])&&(s.token_standard={_eq:_nullishCoalesce(_optionalChain([i, 'optionalAccess', _197 => _197.tokenStandard]), () => ("v2"))}),In({aptosConfig:e,options:{...i,where:s}})}async function ec(n){let{aptosConfig:e,creatorAddress:t,options:r}=n,o={creator_address:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()}};return _optionalChain([r, 'optionalAccess', _198 => _198.tokenStandard])&&(o.token_standard={_eq:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _199 => _199.tokenStandard]), () => ("v2"))}),In({aptosConfig:e,options:{...r,where:o}})}async function tc(n){let{aptosConfig:e,collectionId:t,options:r}=n,o={collection_id:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()}};return _optionalChain([r, 'optionalAccess', _200 => _200.tokenStandard])&&(o.token_standard={_eq:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _201 => _201.tokenStandard]), () => ("v2"))}),In({aptosConfig:e,options:{...r,where:o}})}async function nc(n){let{creatorAddress:e,collectionName:t,options:r,aptosConfig:i}=n,o=_chunkJQCMXTY7js.na.from(e),s={collection_name:{_eq:t},creator_address:{_eq:o.toStringLong()}};return _optionalChain([r, 'optionalAccess', _202 => _202.tokenStandard])&&(s.token_standard={_eq:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _203 => _203.tokenStandard]), () => ("v2"))}),(await In({aptosConfig:i,options:{where:s}})).collection_id}var Wd={typeParameters:[],parameters:[new h(x()),new h(x()),new h(x()),new h(x()),new z(new h(x())),new z(new h(x())),new z(z.u8())]};async function rc(n){let{aptosConfig:e,options:t,creator:r,collection:i,description:o,name:s,uri:a,propertyKeys:c,propertyTypes:d,propertyValues:m}=n,A=_optionalChain([d, 'optionalAccess', _204 => _204.map, 'call', _205 => _205(p=>xt[p])]);return T({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::mint",functionArguments:[new v(i),new v(o),new v(s),new v(a),S.MoveString(_nullishCoalesce(c, () => ([]))),S.MoveString(_nullishCoalesce(A, () => ([]))),Ac(_nullishCoalesce(m, () => ([])),_nullishCoalesce(A, () => ([])))],abi:Wd},options:t})}var Qd={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0))),new G]};async function ic(n){let{aptosConfig:e,sender:t,digitalAssetAddress:r,recipient:i,digitalAssetType:o,options:s}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::object::transfer",typeArguments:[_nullishCoalesce(o, () => (Ke))],functionArguments:[_chunkJQCMXTY7js.na.from(r),_chunkJQCMXTY7js.na.from(i)],abi:Qd},options:s})}var jd={typeParameters:[],parameters:[new h(x()),new h(x()),new h(x()),new h(x()),new z(new h(x())),new z(new h(x())),new z(z.u8()),new G]};async function oc(n){let{aptosConfig:e,account:t,collection:r,description:i,name:o,uri:s,recipient:a,propertyKeys:c,propertyTypes:d,propertyValues:m,options:A}=n;if(_optionalChain([c, 'optionalAccess', _206 => _206.length])!==_optionalChain([m, 'optionalAccess', _207 => _207.length]))throw new Error("Property keys and property values counts do not match");if(_optionalChain([d, 'optionalAccess', _208 => _208.length])!==_optionalChain([m, 'optionalAccess', _209 => _209.length]))throw new Error("Property types and property values counts do not match");let p=_optionalChain([d, 'optionalAccess', _210 => _210.map, 'call', _211 => _211(g=>xt[g])]);return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::mint_soul_bound",functionArguments:[r,i,o,s,S.MoveString(_nullishCoalesce(c, () => ([]))),S.MoveString(_nullishCoalesce(p, () => ([]))),Ac(_nullishCoalesce(m, () => ([])),_nullishCoalesce(p, () => ([]))),a],abi:jd},options:A})}var Jd={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0)))]};async function sc(n){let{aptosConfig:e,creator:t,digitalAssetAddress:r,digitalAssetType:i,options:o}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::burn",typeArguments:[_nullishCoalesce(i, () => (Ke))],functionArguments:[_chunkJQCMXTY7js.na.from(r)],abi:Jd},options:o})}var Xd={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0)))]};async function ac(n){let{aptosConfig:e,creator:t,digitalAssetAddress:r,digitalAssetType:i,options:o}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::freeze_transfer",typeArguments:[_nullishCoalesce(i, () => (Ke))],functionArguments:[r],abi:Xd},options:o})}var Yd={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0)))]};async function cc(n){let{aptosConfig:e,creator:t,digitalAssetAddress:r,digitalAssetType:i,options:o}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::unfreeze_transfer",typeArguments:[_nullishCoalesce(i, () => (Ke))],functionArguments:[r],abi:Yd},options:o})}var Zd={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0))),new h(x())]};async function uc(n){let{aptosConfig:e,creator:t,description:r,digitalAssetAddress:i,digitalAssetType:o,options:s}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::set_description",typeArguments:[_nullishCoalesce(o, () => (Ke))],functionArguments:[_chunkJQCMXTY7js.na.from(i),new v(r)],abi:Zd},options:s})}var ep={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0))),new h(x())]};async function dc(n){let{aptosConfig:e,creator:t,name:r,digitalAssetAddress:i,digitalAssetType:o,options:s}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::set_name",typeArguments:[_nullishCoalesce(o, () => (Ke))],functionArguments:[_chunkJQCMXTY7js.na.from(i),new v(r)],abi:ep},options:s})}var tp={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0))),new h(x())]};async function pc(n){let{aptosConfig:e,creator:t,uri:r,digitalAssetAddress:i,digitalAssetType:o,options:s}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::set_uri",typeArguments:[_nullishCoalesce(o, () => (Ke))],functionArguments:[_chunkJQCMXTY7js.na.from(i),new v(r)],abi:tp},options:s})}var np={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0))),new h(x()),new h(x()),z.u8()]};async function lc(n){let{aptosConfig:e,creator:t,propertyKey:r,propertyType:i,propertyValue:o,digitalAssetAddress:s,digitalAssetType:a,options:c}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::add_property",typeArguments:[_nullishCoalesce(a, () => (Ke))],functionArguments:[_chunkJQCMXTY7js.na.from(s),new v(r),new v(xt[i]),S.U8(mo(o,xt[i]))],abi:np},options:c})}var rp={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0))),new h(x())]};async function gc(n){let{aptosConfig:e,creator:t,propertyKey:r,digitalAssetAddress:i,digitalAssetType:o,options:s}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::remove_property",typeArguments:[_nullishCoalesce(o, () => (Ke))],functionArguments:[_chunkJQCMXTY7js.na.from(i),new v(r)],abi:rp},options:s})}var ip={typeParameters:[{constraints:["key"]}],parameters:[new h(be(new M(0))),new h(x()),new h(x()),z.u8()]};async function yc(n){let{aptosConfig:e,creator:t,propertyKey:r,propertyType:i,propertyValue:o,digitalAssetAddress:s,digitalAssetType:a,options:c}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::update_property",typeArguments:[_nullishCoalesce(a, () => (Ke))],functionArguments:[_chunkJQCMXTY7js.na.from(s),new v(r),new v(xt[i]),mo(o,xt[i])],abi:ip},options:c})}var op={typeParameters:[{constraints:["key"]},{constraints:[]}],parameters:[new h(be(new M(0))),new h(x()),new M(1)]};async function mc(n){let{aptosConfig:e,creator:t,propertyKey:r,propertyType:i,propertyValue:o,digitalAssetAddress:s,digitalAssetType:a,options:c}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::add_typed_property",typeArguments:[_nullishCoalesce(a, () => (Ke)),xt[i]],functionArguments:[_chunkJQCMXTY7js.na.from(s),new v(r),o],abi:op},options:c})}var sp={typeParameters:[{constraints:["key"]},{constraints:[]}],parameters:[new h(be(new M(0))),new h(x()),new M(1)]};async function fc(n){let{aptosConfig:e,creator:t,propertyKey:r,propertyType:i,propertyValue:o,digitalAssetAddress:s,digitalAssetType:a,options:c}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x4::aptos_token::update_typed_property",typeArguments:[_nullishCoalesce(a, () => (Ke)),xt[i]],functionArguments:[_chunkJQCMXTY7js.na.from(s),new v(r),o],abi:sp},options:c})}function Ac(n,e){let t=new Array;return e.forEach((r,i)=>{t.push(mo(n[i],r))}),t}function mo(n,e){let t=He(e);return Jt(n,t,0,[]).bcsToBytes()}var Zn=class{constructor(e){this.config=e}async getCollectionData(e){await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"});let{creatorAddress:t,collectionName:r,options:i}=e,o=_chunkJQCMXTY7js.na.from(t),s={collection_name:{_eq:r},creator_address:{_eq:o.toStringLong()}};return _optionalChain([i, 'optionalAccess', _212 => _212.tokenStandard])&&(s.token_standard={_eq:_nullishCoalesce(_optionalChain([i, 'optionalAccess', _213 => _213.tokenStandard]), () => ("v2"))}),In({aptosConfig:this.config,options:{where:s}})}async getCollectionDataByCreatorAddressAndCollectionName(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Za({aptosConfig:this.config,...e})}async getCollectionDataByCreatorAddress(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),ec({aptosConfig:this.config,...e})}async getCollectionDataByCollectionId(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),tc({aptosConfig:this.config,...e})}async getCollectionId(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),nc({aptosConfig:this.config,...e})}async getDigitalAssetData(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Qa({aptosConfig:this.config,...e})}async getCurrentDigitalAssetOwnership(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),ja({aptosConfig:this.config,...e})}async getOwnedDigitalAssets(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Ja({aptosConfig:this.config,...e})}async getDigitalAssetActivity(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Xa({aptosConfig:this.config,...e})}async createCollectionTransaction(e){return Ya({aptosConfig:this.config,...e})}async mintDigitalAssetTransaction(e){return rc({aptosConfig:this.config,...e})}async transferDigitalAssetTransaction(e){return ic({aptosConfig:this.config,...e})}async mintSoulBoundTransaction(e){return oc({aptosConfig:this.config,...e})}async burnDigitalAssetTransaction(e){return sc({aptosConfig:this.config,...e})}async freezeDigitalAssetTransaferTransaction(e){return ac({aptosConfig:this.config,...e})}async unfreezeDigitalAssetTransaferTransaction(e){return cc({aptosConfig:this.config,...e})}async setDigitalAssetDescriptionTransaction(e){return uc({aptosConfig:this.config,...e})}async setDigitalAssetNameTransaction(e){return dc({aptosConfig:this.config,...e})}async setDigitalAssetURITransaction(e){return pc({aptosConfig:this.config,...e})}async addDigitalAssetPropertyTransaction(e){return lc({aptosConfig:this.config,...e})}async removeDigitalAssetPropertyTransaction(e){return gc({aptosConfig:this.config,...e})}async updateDigitalAssetPropertyTransaction(e){return yc({aptosConfig:this.config,...e})}async addDigitalAssetTypedPropertyTransaction(e){return mc({aptosConfig:this.config,...e})}async updateDigitalAssetTypedPropertyTransaction(e){return fc({aptosConfig:this.config,...e})}};async function hc(n){let{aptosConfig:e,accountAddress:t,amount:r,options:i}=n,o=_optionalChain([i, 'optionalAccess', _214 => _214.timeoutSecs])||20,{data:s}=await Ps({aptosConfig:e,path:"fund",body:{address:_chunkJQCMXTY7js.na.from(t).toString(),amount:r},originMethod:"fundAccount"}),a=s.txn_hashes[0],c=await Pn({aptosConfig:e,transactionHash:a,options:{timeoutSecs:o,checkSuccess:_optionalChain([i, 'optionalAccess', _215 => _215.checkSuccess])}});if(c.type==="user_transaction")return c;throw new Error(`Unexpected transaction received for fund account: ${c.type}`)}var er=class{constructor(e){this.config=e}async fundAccount(e){let t=await hc({aptosConfig:this.config,...e});return(_optionalChain([e, 'access', _216 => _216.options, 'optionalAccess', _217 => _217.waitForIndexer])===void 0||_optionalChain([e, 'access', _218 => _218.options, 'optionalAccess', _219 => _219.waitForIndexer]))&&await Qr({aptosConfig:this.config,minimumLedgerVersion:BigInt(t.version),processorType:"fungible_asset_processor"}),t}};async function ai(n){let{aptosConfig:e,options:t}=n,r={query:Ys,variables:{where_condition:_optionalChain([t, 'optionalAccess', _220 => _220.where]),limit:_optionalChain([t, 'optionalAccess', _221 => _221.limit]),offset:_optionalChain([t, 'optionalAccess', _222 => _222.offset])}};return(await w({aptosConfig:e,query:r,originMethod:"getFungibleAssetMetadata"})).fungible_asset_metadata}async function bc(n){let{aptosConfig:e,options:t}=n,r={query:Xs,variables:{where_condition:_optionalChain([t, 'optionalAccess', _223 => _223.where]),limit:_optionalChain([t, 'optionalAccess', _224 => _224.limit]),offset:_optionalChain([t, 'optionalAccess', _225 => _225.offset])}};return(await w({aptosConfig:e,query:r,originMethod:"getFungibleAssetActivities"})).fungible_asset_activities}async function Tc(n){let{aptosConfig:e,options:t}=n,r={query:js,variables:{where_condition:_optionalChain([t, 'optionalAccess', _226 => _226.where]),limit:_optionalChain([t, 'optionalAccess', _227 => _227.limit]),offset:_optionalChain([t, 'optionalAccess', _228 => _228.offset])}};return(await w({aptosConfig:e,query:r,originMethod:"getCurrentFungibleAssetBalances"})).current_fungible_asset_balances}var wc={typeParameters:[{constraints:[]}],parameters:[He("0x1::object::Object"),new G,new te]};async function Sc(n){let{aptosConfig:e,sender:t,fungibleAssetMetadataAddress:r,recipient:i,amount:o,options:s}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::primary_fungible_store::transfer",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[r,i,o],abi:wc},options:s})}async function Pc(n){let{aptosConfig:e,sender:t,fromStore:r,toStore:i,amount:o,options:s}=n;return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::dispatchable_fungible_asset::transfer",typeArguments:["0x1::fungible_asset::FungibleStore"],functionArguments:[r,i,o],abi:wc},options:s})}var tr=class{constructor(e){this.config=e}async getFungibleAssetMetadata(e){return await P({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _229 => _229.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),ai({aptosConfig:this.config,...e})}async getFungibleAssetMetadataByAssetType(e){return await P({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _230 => _230.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),(await ai({aptosConfig:this.config,options:{where:{asset_type:{_eq:e.assetType}}}}))[0]}async getFungibleAssetMetadataByCreatorAddress(e){return await P({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _231 => _231.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),await ai({aptosConfig:this.config,options:{where:{creator_address:{_eq:_chunkJQCMXTY7js.na.from(e.creatorAddress).toStringLong()}}}})}async getFungibleAssetActivities(e){return await P({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _232 => _232.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),bc({aptosConfig:this.config,...e})}async getCurrentFungibleAssetBalances(e){return await P({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _233 => _233.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),Tc({aptosConfig:this.config,...e})}async transferFungibleAsset(e){return Sc({aptosConfig:this.config,...e})}async transferFungibleAssetBetweenStores(e){return Pc({aptosConfig:this.config,...e})}};var nr=class{constructor(e){this.config=e}async getLedgerInfo(){return Mr({aptosConfig:this.config})}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getBlockByVersion(e){return da({aptosConfig:this.config,...e})}async getBlockByHeight(e){return pa({aptosConfig:this.config,...e})}async view(e){return le({aptosConfig:this.config,...e})}async viewJson(e){return Ha({aptosConfig:this.config,...e})}async getChainTopUserTransactions(e){return ra({aptosConfig:this.config,...e})}async queryIndexer(e){return w({aptosConfig:this.config,...e})}async getIndexerLastSuccessVersion(){return Vr({aptosConfig:this.config})}async getProcessorStatus(e){return Hr({aptosConfig:this.config,processorType:e})}};var Ec=["A name must be between 3 and 63 characters long,","and can only contain lowercase a-z, 0-9, and hyphens.","A name may not start or end with a hyphen."].join(" ");function _c(n){return!(!n||n.length<3||n.length>63||!/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/.test(n))}function vt(n){let[e,t,...r]=n.replace(/\.apt$/,"").split(".");if(r.length>0)throw new Error(`${n} is invalid. A name can only have two parts, a domain and a subdomain separated by a "."`);if(!_c(e))throw new Error(`${e} is not valid. ${Ec}`);if(t&&!_c(t))throw new Error(`${t} is not valid. ${Ec}`);return{domainName:t||e,subdomainName:t?e:void 0}}function Ic(n){if(!n)return!1;let e=new Date(n.domain_expiration_timestamp).getTime()<Date.now(),t=new Date(n.expiration_timestamp).getTime()<Date.now();return n.subdomain&&e?!1:n.subdomain&&n.subdomain_expiration_policy===1?!0:!t}var ap="0x585fc9f0f0c54183b039ffc770ca282ebd87307916c215a3e692f2f8e4305e82",cp={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c",local:ap,custom:null,devnet:null,shelbynet:null,netna:null};function ft(n){let e=cp[n.network];if(!e)throw new Error(`The ANS contract is not deployed to ${n.network}`);return e}var ci=n=>{if(n&&typeof n=="object"&&"vec"in n&&Array.isArray(n.vec))return n.vec[0]};async function xc(n){let{aptosConfig:e,name:t}=n,r=ft(e),{domainName:i,subdomainName:o}=vt(t),s=await le({aptosConfig:e,payload:{function:`${r}::router::get_owner_addr`,functionArguments:[i,o]}}),a=ci(s[0]);return a?_chunkJQCMXTY7js.na.from(a):void 0}async function vc(n){let{aptosConfig:e,expiration:t,name:r,sender:i,targetAddress:o,toAddress:s,options:a,transferable:c}=n,d=ft(e),{domainName:m,subdomainName:A}=vt(r),p=t.policy==="subdomain:independent"||t.policy==="subdomain:follow-domain";if(A&&!p)throw new Error("Subdomains must have an expiration policy of either 'subdomain:independent' or 'subdomain:follow-domain'");if(p&&!A)throw new Error(`Policy is set to ${t.policy} but no subdomain was provided`);if(t.policy==="domain"){let q=_nullishCoalesce(t.years, () => (1));if(q!==1)throw new Error("For now, names can only be registered for 1 year at a time");let Ye=q*31536e3;return await T({aptosConfig:e,sender:i.accountAddress.toString(),data:{function:`${d}::router::register_domain`,functionArguments:[m,Ye,o,s]},options:a})}if(!A)throw new Error(`${t.policy} requires a subdomain to be provided.`);let g=await fo({aptosConfig:e,name:m});if(!g)throw new Error("The domain does not exist");let b=t.policy==="subdomain:independent"?t.expirationDate:g;if(b>g)throw new Error("The subdomain expiration time cannot be greater than the domain expiration time");return await T({aptosConfig:e,sender:i.accountAddress.toString(),data:{function:`${d}::router::register_subdomain`,functionArguments:[m,A,Math.round(b/1e3),t.policy==="subdomain:follow-domain"?1:0,!!c,o,s]},options:a})}async function fo(n){let{aptosConfig:e,name:t}=n,r=ft(e),{domainName:i,subdomainName:o}=vt(t);try{let s=await le({aptosConfig:e,payload:{function:`${r}::router::get_expiration`,functionArguments:[i,o]}});return Number(s[0])*1e3}catch (e7){return}}async function Cc(n){let{aptosConfig:e,address:t}=n,r=ft(e),i=await le({aptosConfig:e,payload:{function:`${r}::router::get_primary_name`,functionArguments:[_chunkJQCMXTY7js.na.from(t).toString()]}}),o=ci(i[1]),s=ci(i[0]);if(o)return[s,o].filter(Boolean).join(".")}async function Kc(n){let{aptosConfig:e,sender:t,name:r,options:i}=n,o=ft(e);if(!r)return await T({aptosConfig:e,sender:t.accountAddress.toString(),data:{function:`${o}::router::clear_primary_name`,functionArguments:[]},options:i});let{domainName:s,subdomainName:a}=vt(r);return await T({aptosConfig:e,sender:t.accountAddress.toString(),data:{function:`${o}::router::set_primary_name`,functionArguments:[s,a]},options:i})}async function Rc(n){let{aptosConfig:e,name:t}=n,r=ft(e),{domainName:i,subdomainName:o}=vt(t),s=await le({aptosConfig:e,payload:{function:`${r}::router::get_target_addr`,functionArguments:[i,o]}}),a=ci(s[0]);return a?_chunkJQCMXTY7js.na.from(a):void 0}async function Uc(n){let{aptosConfig:e,sender:t,name:r,address:i,options:o}=n,s=ft(e),{domainName:a,subdomainName:c}=vt(r);return await T({aptosConfig:e,sender:t.accountAddress.toString(),data:{function:`${s}::router::set_target_addr`,functionArguments:[a,c,i]},options:o})}async function zc(n){let{aptosConfig:e,name:t}=n,{domainName:r,subdomainName:i=""}=vt(t),a=(await w({aptosConfig:e,query:{query:Sn,variables:{where_condition:{domain:{_eq:r},subdomain:{_eq:i}},limit:1}},originMethod:"getName"})).current_aptos_names[0];return a&&(a=rr(a)),Ic(a)?a:void 0}async function kc(n){let{aptosConfig:e,options:t,accountAddress:r}=n,i=await Ao({aptosConfig:e});return(await w({aptosConfig:e,originMethod:"getAccountNames",query:{query:Sn,variables:{limit:_optionalChain([t, 'optionalAccess', _234 => _234.limit]),offset:_optionalChain([t, 'optionalAccess', _235 => _235.offset]),order_by:_optionalChain([t, 'optionalAccess', _236 => _236.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([n, 'access', _237 => _237.options, 'optionalAccess', _238 => _238.where]), () => ({})),owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:i}}}}})).current_aptos_names.map(rr)}async function Nc(n){let{aptosConfig:e,options:t,accountAddress:r}=n,i=await Ao({aptosConfig:e});return(await w({aptosConfig:e,originMethod:"getAccountDomains",query:{query:Sn,variables:{limit:_optionalChain([t, 'optionalAccess', _239 => _239.limit]),offset:_optionalChain([t, 'optionalAccess', _240 => _240.offset]),order_by:_optionalChain([t, 'optionalAccess', _241 => _241.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([n, 'access', _242 => _242.options, 'optionalAccess', _243 => _243.where]), () => ({})),owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:i},subdomain:{_eq:""}}}}})).current_aptos_names.map(rr)}async function Dc(n){let{aptosConfig:e,options:t,accountAddress:r}=n,i=await Ao({aptosConfig:e});return(await w({aptosConfig:e,originMethod:"getAccountSubdomains",query:{query:Sn,variables:{limit:_optionalChain([t, 'optionalAccess', _244 => _244.limit]),offset:_optionalChain([t, 'optionalAccess', _245 => _245.offset]),order_by:_optionalChain([t, 'optionalAccess', _246 => _246.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([n, 'access', _247 => _247.options, 'optionalAccess', _248 => _248.where]), () => ({})),owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:i},subdomain:{_neq:""}}}}})).current_aptos_names.map(rr)}async function Fc(n){let{aptosConfig:e,options:t,domain:r}=n;return(await w({aptosConfig:e,originMethod:"getDomainSubdomains",query:{query:Sn,variables:{limit:_optionalChain([t, 'optionalAccess', _249 => _249.limit]),offset:_optionalChain([t, 'optionalAccess', _250 => _250.offset]),order_by:_optionalChain([t, 'optionalAccess', _251 => _251.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([n, 'access', _252 => _252.options, 'optionalAccess', _253 => _253.where]), () => ({})),domain:{_eq:r},subdomain:{_neq:""}}}}})).current_aptos_names.map(rr).filter(Ic)}async function Ao(n){let{aptosConfig:e}=n,t=ft(e),[r]=await le({aptosConfig:e,payload:{function:`${t}::config::reregistration_grace_sec`,functionArguments:[]}}),i=r/60/60/24,o=()=>new Date;return new Date(o().setDate(o().getDate()-i)).toISOString()}async function Oc(n){let{aptosConfig:e,sender:t,name:r,years:i=1,options:o}=n,s=ft(e),a=i*31536e3,{domainName:c,subdomainName:d}=vt(r);if(d)throw new Error("Subdomains cannot be renewed");if(i!==1)throw new Error("Currently, only 1 year renewals are supported");return await T({aptosConfig:e,sender:t.accountAddress.toString(),data:{function:`${s}::router::renew_domain`,functionArguments:[c,a]},options:o})}function rr(n){return{...n,expiration_timestamp:new Date(n.expiration_timestamp).getTime()}}var ir=class{constructor(e){this.config=e}async getOwnerAddress(e){return xc({aptosConfig:this.config,...e})}async getExpiration(e){return fo({aptosConfig:this.config,...e})}async getTargetAddress(e){return Rc({aptosConfig:this.config,...e})}async setTargetAddress(e){return Uc({aptosConfig:this.config,...e})}async getPrimaryName(e){return Cc({aptosConfig:this.config,...e})}async setPrimaryName(e){return Kc({aptosConfig:this.config,...e})}async registerName(e){return vc({aptosConfig:this.config,...e})}async renewDomain(e){return Oc({aptosConfig:this.config,...e})}async getName(e){return zc({aptosConfig:this.config,...e})}async getAccountNames(e){return kc({aptosConfig:this.config,...e})}async getAccountDomains(e){return Nc({aptosConfig:this.config,...e})}async getAccountSubdomains(e){return Dc({aptosConfig:this.config,...e})}async getDomainSubdomains(e){return Fc({aptosConfig:this.config,...e})}};async function Bc(n){let{aptosConfig:e,poolAddress:t}=n,r=_chunkJQCMXTY7js.na.from(t).toStringLong(),o=await w({aptosConfig:e,query:{query:Hi,variables:{where_condition:{pool_address:{_eq:r}}}}});return o.num_active_delegator_per_pool[0]?o.num_active_delegator_per_pool[0].num_active_delegator:0}async function Gc(n){let{aptosConfig:e,options:t}=n,r={query:Hi,variables:{order_by:_optionalChain([t, 'optionalAccess', _254 => _254.orderBy])}};return(await w({aptosConfig:e,query:r})).num_active_delegator_per_pool}async function Mc(n){let{aptosConfig:e,delegatorAddress:t,poolAddress:r}=n,i={query:Js,variables:{delegatorAddress:_chunkJQCMXTY7js.na.from(t).toStringLong(),poolAddress:_chunkJQCMXTY7js.na.from(r).toStringLong()}};return(await w({aptosConfig:e,query:i})).delegated_staking_activities}var or=class{constructor(e){this.config=e}async getNumberOfDelegators(e){return await P({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _255 => _255.minimumLedgerVersion]),processorType:"stake_processor"}),Bc({aptosConfig:this.config,...e})}async getNumberOfDelegatorsForAllPools(e){return await P({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _256 => _256.minimumLedgerVersion]),processorType:"stake_processor"}),Gc({aptosConfig:this.config,...e})}async getDelegatedStakingActivities(e){return await P({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _257 => _257.minimumLedgerVersion]),processorType:"stake_processor"}),Mc({aptosConfig:this.config,...e})}};var ui=class{constructor(e){this.config=e}async simple(e){return T({aptosConfig:this.config,...e})}async multiAgent(e){return T({aptosConfig:this.config,...e})}};function ho(n,e){if(!(n.getTransactionSubmitter()!==void 0||e.transactionSubmitter!==void 0)&&e.transaction.feePayerAddress&&!e.feePayerAuthenticator)throw new Error("You are submitting a Fee Payer transaction but missing the feePayerAuthenticator")}function bo(n,e,t){let r=t.value;return t.value=async function(...i){return r.apply(this,i)},t}var xn=class{constructor(e){this.config=e}async simple(e){return ao({aptosConfig:this.config,...e})}async multiAgent(e){return ao({aptosConfig:this.config,...e})}};_chunkJQCMXTY7js.a.call(void 0, [bo],xn.prototype,"simple",1),_chunkJQCMXTY7js.a.call(void 0, [bo],xn.prototype,"multiAgent",1);var di=class{constructor(e){this.config=e}async simple(e){return ho(this.config,e),jn({aptosConfig:this.config,...e})}async multiAgent(e){return ho(this.config,e),jn({aptosConfig:this.config,...e})}};var pi=class{constructor(e,t,r,i,o){this.lastUncommintedNumber=null;this.currentNumber=null;this.lock=!1;this.aptosConfig=e,this.account=t,this.maxWaitTime=r,this.maximumInFlight=i,this.sleepTime=o}async nextSequenceNumber(){for(;this.lock;)await _chunkJQCMXTY7js.sa.call(void 0, this.sleepTime);this.lock=!0;let e=BigInt(0);try{if((this.lastUncommintedNumber===null||this.currentNumber===null)&&await this.initialize(),this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight){await this.update();let t=_chunkJQCMXTY7js.ua.call(void 0, );for(;this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight;)await _chunkJQCMXTY7js.sa.call(void 0, this.sleepTime),_chunkJQCMXTY7js.ua.call(void 0, )-t>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, re-syncing ${this.account.accountAddress.toString()}`),await this.initialize()):await this.update()}e=this.currentNumber,this.currentNumber+=BigInt(1)}catch(t){console.error("error in getting next sequence number for this account",t)}finally{this.lock=!1}return e}async initialize(){let{sequence_number:e}=await _n({aptosConfig:this.aptosConfig,accountAddress:this.account.accountAddress});this.currentNumber=BigInt(e),this.lastUncommintedNumber=BigInt(e)}async update(){let{sequence_number:e}=await _n({aptosConfig:this.aptosConfig,accountAddress:this.account.accountAddress});return this.lastUncommintedNumber=BigInt(e),this.lastUncommintedNumber}async synchronize(){if(this.lastUncommintedNumber!==this.currentNumber){for(;this.lock;)await _chunkJQCMXTY7js.sa.call(void 0, this.sleepTime);this.lock=!0;try{await this.update();let e=_chunkJQCMXTY7js.ua.call(void 0, );for(;this.lastUncommintedNumber!==this.currentNumber;)_chunkJQCMXTY7js.ua.call(void 0, )-e>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, re-syncing ${this.account.accountAddress.toString()}`),await this.initialize()):(await _chunkJQCMXTY7js.sa.call(void 0, this.sleepTime),await this.update())}catch(e){console.error("error in synchronizing this account sequence number with the one on chain",e)}finally{this.lock=!1}}}};var vn=class{constructor(){this.queue=[];this.pendingDequeue=[];this.cancelled=!1}enqueue(e){if(this.cancelled=!1,this.pendingDequeue.length>0){_optionalChain([this, 'access', _258 => _258.pendingDequeue, 'access', _259 => _259.shift, 'call', _260 => _260(), 'optionalAccess', _261 => _261.resolve, 'call', _262 => _262(e)]);return}this.queue.push(e)}async dequeue(){return this.queue.length>0?Promise.resolve(this.queue.shift()):new Promise((e,t)=>{this.pendingDequeue.push({resolve:e,reject:t})})}isEmpty(){return this.queue.length===0}cancel(){this.cancelled=!0,this.pendingDequeue.forEach(async({reject:e})=>{e(new Cn("Task cancelled"))}),this.pendingDequeue=[],this.queue.length=0}isCancelled(){return this.cancelled}pendingDequeueLength(){return this.pendingDequeue.length}},Cn=class extends Error{};var Vc="fulfilled",Hc= exports.TransactionWorkerEventsEnum =(o=>(o.TransactionSent="transactionSent",o.TransactionSendFailed="transactionSendFailed",o.TransactionExecuted="transactionExecuted",o.TransactionExecutionFailed="transactionExecutionFailed",o.ExecutionFinish="executionFinish",o))(Hc||{}),li= exports.TransactionWorker =class extends _eventemitter32.default{constructor(t,r,i=30,o=100,s=10){super();this.taskQueue=new vn;this.transactionsQueue=new vn;this.outstandingTransactions=new vn;this.sentTransactions=[];this.executedTransactions=[];this.aptosConfig=t,this.account=r,this.started=!1,this.accountSequnceNumber=new pi(t,r,i,o,s)}async submitNextTransaction(){try{for(;;){let t=await this.accountSequnceNumber.nextSequenceNumber();if(t===null)return;let r=await this.generateNextTransaction(this.account,t);if(!r)return;let i=ri({aptosConfig:this.aptosConfig,transaction:r,signer:this.account});await this.outstandingTransactions.enqueue([i,t])}}catch(t){if(t instanceof Cn)return;throw new Error(`Submit transaction failed for ${this.account.accountAddress.toString()} with error ${t}`)}}async processTransactions(){try{for(;;){let t=[],r=[],[i,o]=await this.outstandingTransactions.dequeue();for(t.push(i),r.push(o);!this.outstandingTransactions.isEmpty();)[i,o]=await this.outstandingTransactions.dequeue(),t.push(i),r.push(o);let s=await Promise.allSettled(t);for(let a=0;a<s.length&&a<r.length;a+=1){let c=s[a];o=r[a],c.status===Vc?(this.sentTransactions.push([c.value.hash,o,null]),this.emit("transactionSent",{message:`transaction hash ${c.value.hash} has been committed to chain`,transactionHash:c.value.hash}),await this.checkTransaction(c,o)):(this.sentTransactions.push([c.status,o,c.reason]),this.emit("transactionSendFailed",{message:`failed to commit transaction ${this.sentTransactions.length} with error ${c.reason}`,error:c.reason}))}this.emit("executionFinish",{message:`execute ${s.length} transactions finished`})}}catch(t){if(t instanceof Cn)return;throw new Error(`Process execution failed for ${this.account.accountAddress.toString()} with error ${t}`)}}async checkTransaction(t,r){try{let i=[];i.push(Pn({aptosConfig:this.aptosConfig,transactionHash:t.value.hash}));let o=await Promise.allSettled(i);for(let s=0;s<o.length;s+=1){let a=o[s];a.status===Vc?(this.executedTransactions.push([a.value.hash,r,null]),this.emit("transactionExecuted",{message:`transaction hash ${a.value.hash} has been executed on chain`,transactionHash:t.value.hash})):(this.executedTransactions.push([a.status,r,a.reason]),this.emit("transactionExecutionFailed",{message:`failed to execute transaction ${this.executedTransactions.length} with error ${a.reason}`,error:a.reason}))}}catch(i){throw new Error(`Check transaction failed for ${this.account.accountAddress.toString()} with error ${i}`)}}async push(t,r){this.transactionsQueue.enqueue([t,r])}async generateNextTransaction(t,r){if(this.transactionsQueue.isEmpty())return;let[i,o]=await this.transactionsQueue.dequeue();return T({aptosConfig:this.aptosConfig,sender:t.accountAddress,data:i,options:{...o,accountSequenceNumber:r,replayProtectionNonce:void 0}})}async run(){try{for(;!this.taskQueue.isCancelled();)await(await this.taskQueue.dequeue())()}catch(t){throw new Error(`Unable to start transaction batching: ${t}`)}}start(){if(this.started)throw new Error("worker has already started");this.started=!0,this.taskQueue.enqueue(()=>this.submitNextTransaction()),this.taskQueue.enqueue(()=>this.processTransactions()),this.run()}stop(){if(this.taskQueue.isCancelled())throw new Error("worker has already stopped");this.started=!1,this.taskQueue.cancel()}};var gi=class extends _eventemitter32.default{constructor(e){super(),this.config=e}start(e){let{sender:t}=e;this.account=t,this.transactionWorker=new li(this.config,t),this.transactionWorker.start(),this.registerToEvents()}push(e){let{data:t,options:r}=e;for(let i of t)this.transactionWorker.push(i,r)}registerToEvents(){this.transactionWorker.on("transactionSent",async e=>{this.emit("transactionSent",e)}),this.transactionWorker.on("transactionSendFailed",async e=>{this.emit("transactionSendFailed",e)}),this.transactionWorker.on("transactionExecuted",async e=>{this.emit("transactionExecuted",e)}),this.transactionWorker.on("transactionExecutionFailed",async e=>{this.emit("transactionExecutionFailed",e)}),this.transactionWorker.on("executionFinish",async e=>{this.emit("executionFinish",e)})}forSingleAccount(e){try{let{sender:t,data:r,options:i}=e;this.start({sender:t}),this.push({data:r,options:i})}catch(t){throw new Error(`failed to submit transactions with error: ${t}`)}}};var sr=class{constructor(e){this.config=e,this.build=new ui(this.config),this.simulate=new xn(this.config),this.submit=new di(this.config),this.batch=new gi(this.config)}async getTransactions(e){return Wi({aptosConfig:this.config,...e})}async getTransactionByVersion(e){return ca({aptosConfig:this.config,...e})}async getTransactionByHash(e){return Wn({aptosConfig:this.config,...e})}async isPendingTransaction(e){return ua({aptosConfig:this.config,...e})}async waitForTransaction(e){return Pn({aptosConfig:this.config,...e})}async getGasPriceEstimation(){return Wr({aptosConfig:this.config})}getSigningMessage(e){return Ia(e)}async publishPackageTransaction(e){return va({aptosConfig:this.config,...e})}async rotateAuthKey(e){return Ma({aptosConfig:this.config,...e})}async rotateAuthKeyUnverified(e){return Va({aptosConfig:this.config,...e})}sign(e){return ti({...e})}signAsFeePayer(e){return ni({...e})}async batchTransactionsForSingleAccount(e){try{let{sender:t,data:r,options:i}=e;this.batch.forSingleAccount({sender:t,data:r,options:i})}catch(t){throw new Error(`failed to submit transactions with error: ${t}`)}}async signAndSubmitTransaction(e){return ri({aptosConfig:this.config,...e})}async signAndSubmitAsFeePayer(e){return xa({aptosConfig:this.config,...e})}};var ar=class{constructor(e){this.config=e}async getTableItem(e){return qr({aptosConfig:this.config,...e})}async getTableItemsData(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),sa({aptosConfig:this.config,...e})}async getTableItemsMetadata(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),aa({aptosConfig:this.config,...e})}};async function yi(n){let{aptosConfig:e,jwt:t,ephemeralKeyPair:r,uidKey:i="sub",derivationPath:o}=n,s={jwt_b64:t,epk:r.getPublicKey().bcsToHex().toStringWithoutPrefix(),exp_date_secs:r.expiryDateSecs,epk_blinder:_chunkJQCMXTY7js.v.fromHexInput(r.blinder).toStringWithoutPrefix(),uid_key:i,derivation_path:o},{data:a}=await Es({aptosConfig:e,path:"fetch",body:s,originMethod:"getPepper",overrides:{WITH_CREDENTIALS:!1}});return _chunkJQCMXTY7js.v.fromHexInput(a.pepper).toUint8Array()}async function To(n){let{aptosConfig:e,jwt:t,ephemeralKeyPair:r,pepper:i=await yi(n),uidKey:o="sub",maxExpHorizonSecs:s=(await rn({aptosConfig:e})).maxExpHorizonSecs}=n;if(_chunkJQCMXTY7js.v.fromHexInput(i).toUint8Array().length!==Ce.PEPPER_LENGTH)throw new Error(`Pepper needs to be ${Ce.PEPPER_LENGTH} bytes`);let a=_jwtdecode.jwtDecode.call(void 0, t);if(typeof a.iat!="number")throw new Error("iat was not found");if(s<r.expiryDateSecs-a.iat)throw Error(`The EphemeralKeyPair is too long lived.  It's lifespan must be less than ${s}`);let c={jwt_b64:t,epk:r.getPublicKey().bcsToHex().toStringWithoutPrefix(),epk_blinder:_chunkJQCMXTY7js.v.fromHexInput(r.blinder).toStringWithoutPrefix(),exp_date_secs:r.expiryDateSecs,exp_horizon_secs:s,pepper:_chunkJQCMXTY7js.v.fromHexInput(i).toStringWithoutPrefix(),uid_key:o},{data:d}=await _s({aptosConfig:e,path:"prove",body:c,originMethod:"getProof",overrides:{WITH_CREDENTIALS:!1}}),m=d.proof,A=new Pt({a:m.a,b:m.b,c:m.c});return new me({proof:new nn(A,0),trainingWheelsSignature:Le.fromHex(d.training_wheels_signature),expHorizonSecs:s})}async function Lc(n){let{aptosConfig:e,jwt:t,jwkAddress:r,uidKey:i,proofFetchCallback:o,pepper:s=await yi(n)}=n,{verificationKey:a,maxExpHorizonSecs:c}=await rn({aptosConfig:e}),d=To({...n,pepper:s,maxExpHorizonSecs:c}),m=o?d:await d;if(r!==void 0){let g=L.fromJwtAndPepper({jwt:t,pepper:s,jwkAddress:r,uidKey:i}),b=await Jn({aptosConfig:e,authenticationKey:g.authKey().derivedAddress()});return Ve.create({...n,address:b,proof:m,pepper:s,proofFetchCallback:o,jwkAddress:r,verificationKey:a})}let A=K.fromJwtAndPepper({jwt:t,pepper:s,uidKey:i}),p=await Jn({aptosConfig:e,authenticationKey:A.authKey().derivedAddress()});return Ce.create({...n,address:p,proof:m,pepper:s,proofFetchCallback:o,verificationKey:a})}async function qc(n){let{aptosConfig:e,sender:t,iss:r,options:i}=n,{jwksUrl:o}=n;o===void 0&&(bs.test(r)?o="https://www.googleapis.com/service_accounts/v1/jwk/securetoken@system.gserviceaccount.com":o=r.endsWith("/")?`${r}.well-known/jwks.json`:`${r}/.well-known/jwks.json`);let s;try{if(s=await fetch(o),!s.ok)throw new Error(`${s.status} ${s.statusText}`)}catch(c){let d;throw c instanceof Error?d=`${c.message}`:d=`error unknown - ${c}`,_.fromErrorType({type:14,details:`Failed to fetch JWKS at ${o}: ${d}`})}let a=await s.json();return T({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::jwks::update_federated_jwk_set",functionArguments:[r,S.MoveString(a.keys.map(c=>c.kid)),S.MoveString(a.keys.map(c=>c.alg)),S.MoveString(a.keys.map(c=>c.e)),S.MoveString(a.keys.map(c=>c.n))]},options:i})}var cr=class{constructor(e){this.config=e}async getPepper(e){return yi({aptosConfig:this.config,...e})}async getProof(e){return To({aptosConfig:this.config,...e})}async deriveKeylessAccount(e){return Lc({aptosConfig:this.config,...e})}async updateFederatedKeylessJwkSetTransaction(e){return qc({aptosConfig:this.config,...e})}};async function lp(n){let{aptosConfig:e,options:t}=n,r={query:Gr,variables:{where_condition:_optionalChain([t, 'optionalAccess', _263 => _263.where]),offset:_optionalChain([t, 'optionalAccess', _264 => _264.offset]),limit:_optionalChain([t, 'optionalAccess', _265 => _265.limit]),order_by:_optionalChain([t, 'optionalAccess', _266 => _266.orderBy])}};return(await w({aptosConfig:e,query:r,originMethod:"getObjectData"})).current_objects}async function $c(n){let{aptosConfig:e,objectAddress:t,options:r}=n,o={object_address:{_eq:_chunkJQCMXTY7js.na.from(t).toStringLong()}};return(await lp({aptosConfig:e,options:{...r,where:o}}))[0]}var ur=class{constructor(e){this.config=e}async getObjectDataByObjectAddress(e){return await P({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"objects_processor"}),$c({aptosConfig:this.config,...e})}};var oe=class{constructor(e){this.config=_nullishCoalesce(e, () => (new si)),this.account=new Xn(this.config),this.abstraction=new Xt(this.config),this.ans=new ir(this.config),this.coin=new Yn(this.config),this.digitalAsset=new Zn(this.config),this.faucet=new er(this.config),this.fungibleAsset=new tr(this.config),this.general=new nr(this.config),this.staking=new or(this.config),this.transaction=new sr(this.config),this.table=new ar(this.config),this.keyless=new cr(this.config),this.object=new ur(this.config)}setIgnoreTransactionSubmitter(e){this.config.setIgnoreTransactionSubmitter(e)}};function we(n,e,t){Object.getOwnPropertyNames(e.prototype).forEach(r=>{let i=Object.getOwnPropertyDescriptor(e.prototype,r);i&&Object.defineProperty(n.prototype,r,{value:function(...o){return this[t][r](...o)},writable:i.writable,configurable:i.configurable,enumerable:i.enumerable})})}we(oe,Xn,"account");we(oe,Xt,"abstraction");we(oe,ir,"ans");we(oe,Yn,"coin");we(oe,Zn,"digitalAsset");we(oe,er,"faucet");we(oe,tr,"fungibleAsset");we(oe,nr,"general");we(oe,or,"staking");we(oe,sr,"transaction");we(oe,ar,"table");we(oe,cr,"keyless");we(oe,ur,"object");exports.ACCOUNT_ABSTRACTION_SIGNING_DATA_SALT = hs; exports.APTOS_BIP44_REGEX = cu; exports.APTOS_COIN = Rt; exports.APTOS_FA = fs; exports.APTOS_HARDENED_REGEX = au; exports.AbstractKeylessAccount = Te; exports.AbstractMultiKey = Oe; exports.AbstractPublicKey = yr; exports.AbstractSignature = Un; exports.AbstractedAccount = Or; exports.Account = gt; exports.AccountAbstractionMessage = xr; exports.AccountAddress = _chunkJQCMXTY7js.na; exports.AccountAuthenticator = ee; exports.AccountAuthenticatorAbstraction = kt; exports.AccountAuthenticatorEd25519 = Ge; exports.AccountAuthenticatorMultiEd25519 = ot; exports.AccountAuthenticatorMultiKey = Je; exports.AccountAuthenticatorNoAccountAuthenticator = pn; exports.AccountAuthenticatorSingleKey = ue; exports.AccountAuthenticatorVariant = _chunkJQCMXTY7js.L; exports.AccountPublicKey = ae; exports.AccountSequenceNumber = pi; exports.AccountUtils = Ns; exports.AddressInvalidReason = _chunkJQCMXTY7js.ma; exports.AnyPublicKey = I; exports.AnyPublicKeyVariant = _chunkJQCMXTY7js.N; exports.AnySignature = B; exports.AnySignatureVariant = _chunkJQCMXTY7js.P; exports.Aptos = oe; exports.AptosApiError = Ee; exports.AptosApiType = en; exports.AptosConfig = si; exports.AuthenticationKey = V; exports.Bool = F; exports.CKDPriv = ss; exports.ChainId = ln; exports.DEFAULT_MAX_GAS_AMOUNT = ys; exports.DEFAULT_TXN_EXP_SEC_FROM_NOW = ms; exports.DEFAULT_TXN_TIMEOUT_SEC = Ar; exports.DerivableAbstractedAccount = Fs; exports.DeriveScheme = _chunkJQCMXTY7js.la; exports.Deserializer = C; exports.EPK_HORIZON_SECS = Mu; exports.Ed25519Account = ie; exports.Ed25519PrivateKey = J; exports.Ed25519PublicKey = E; exports.Ed25519Signature = R; exports.EntryFunction = dt; exports.EntryFunctionBytes = gr; exports.EphemeralCertificate = tn; exports.EphemeralCertificateVariant = _chunkJQCMXTY7js.S; exports.EphemeralKeyPair = jt; exports.EphemeralPublicKey = Tt; exports.EphemeralPublicKeyVariant = _chunkJQCMXTY7js.Q; exports.EphemeralSignature = Le; exports.EphemeralSignatureVariant = _chunkJQCMXTY7js.R; exports.FIREBASE_AUTH_ISS_PATTERN = bs; exports.FederatedKeylessAccount = Ve; exports.FederatedKeylessPublicKey = L; exports.FeePayerRawTransaction = qt; exports.FixedBytes = Re; exports.Groth16ProofAndStatement = Ui; exports.Groth16VerificationKey = ki; exports.Groth16Zkp = Pt; exports.HARDENED_OFFSET = rs; exports.Hex = _chunkJQCMXTY7js.v; exports.HexInvalidReason = _chunkJQCMXTY7js.u; exports.I128 = es; exports.I16 = Xo; exports.I256 = ts; exports.I32 = Yo; exports.I64 = Zo; exports.I8 = Jo; exports.Identifier = k; exports.KeyType = uu; exports.KeylessAccount = Ce; exports.KeylessConfiguration = zi; exports.KeylessError = _; exports.KeylessErrorCategory = zu; exports.KeylessErrorResolutionTip = ku; exports.KeylessErrorType = hr; exports.KeylessPublicKey = K; exports.KeylessSignature = ce; exports.MAX_AUD_VAL_BYTES = Ki; exports.MAX_COMMITED_EPK_BYTES = Wu; exports.MAX_EXTRA_FIELD_BYTES = qu; exports.MAX_ISS_VAL_BYTES = Lu; exports.MAX_JWT_HEADER_B64_BYTES = $u; exports.MAX_UID_KEY_BYTES = Vu; exports.MAX_UID_VAL_BYTES = Hu; exports.MimeType = _chunkJQCMXTY7js.C; exports.ModuleId = Gn; exports.MoveAbility = _chunkJQCMXTY7js.ha; exports.MoveFunctionVisibility = _chunkJQCMXTY7js.ga; exports.MoveJWK = Ni; exports.MoveOption = ne; exports.MoveString = v; exports.MoveVector = S; exports.MultiAgentRawTransaction = Lt; exports.MultiAgentTransaction = kr; exports.MultiEd25519Account = qn; exports.MultiEd25519PublicKey = re; exports.MultiEd25519Signature = Be; exports.MultiKey = W; exports.MultiKeyAccount = yt; exports.MultiKeySignature = Ie; exports.MultiSig = Mn; exports.MultiSigTransactionPayload = Vn; exports.Network = Ei; exports.NetworkToChainId = _i; exports.NetworkToFaucetAPI = gs; exports.NetworkToIndexerAPI = ps; exports.NetworkToNetworkName = lg; exports.NetworkToNodeAPI = ls; exports.NetworkToPepperAPI = Si; exports.NetworkToProverAPI = Pi; exports.ParsingError = _chunkJQCMXTY7js.t; exports.PrivateKey = Pe; exports.PrivateKeyVariants = _chunkJQCMXTY7js.M; exports.ProcessorType = wt; exports.PublicKey = et; exports.RAW_TRANSACTION_SALT = As; exports.RAW_TRANSACTION_WITH_DATA_SALT = Ii; exports.RawTransaction = ve; exports.RawTransactionWithData = Rr; exports.RoleType = _chunkJQCMXTY7js.ia; exports.RotationProofChallenge = Ur; exports.Script = fn; exports.ScriptTransactionArgumentVariants = _chunkJQCMXTY7js.E; exports.Secp256k1PrivateKey = rt; exports.Secp256k1PublicKey = Fe; exports.Secp256k1Signature = it; exports.Secp256r1PrivateKey = Cs; exports.Secp256r1PublicKey = un; exports.Secp256r1Signature = Oi; exports.Serializable = _chunkJQCMXTY7js.x; exports.Serialized = Rn; exports.Serializer = _chunkJQCMXTY7js.y; exports.Signature = O; exports.SignedTransaction = lt; exports.SigningScheme = _chunkJQCMXTY7js.ja; exports.SigningSchemeInput = _chunkJQCMXTY7js.ka; exports.SimpleTransaction = zr; exports.SingleKeyAccount = pe; exports.StructTag = Xe; exports.TransactionAndProof = Dr; exports.TransactionAuthenticator = pt; exports.TransactionAuthenticatorEd25519 = $t; exports.TransactionAuthenticatorFeePayer = Qt; exports.TransactionAuthenticatorMultiAgent = Wt; exports.TransactionAuthenticatorMultiEd25519 = bn; exports.TransactionAuthenticatorSingleSender = It; exports.TransactionAuthenticatorVariant = _chunkJQCMXTY7js.K; exports.TransactionExecutable = An; exports.TransactionExecutableEmpty = Ln; exports.TransactionExecutableEntryFunction = hn; exports.TransactionExecutableScript = Hn; exports.TransactionExecutableVariants = _chunkJQCMXTY7js.H; exports.TransactionExtraConfig = Kr; exports.TransactionExtraConfigV1 = Ht; exports.TransactionExtraConfigVariants = _chunkJQCMXTY7js.I; exports.TransactionInnerPayload = Cr; exports.TransactionInnerPayloadV1 = Vt; exports.TransactionInnerPayloadVariants = _chunkJQCMXTY7js.G; exports.TransactionPayload = _t; exports.TransactionPayloadEntryFunction = yn; exports.TransactionPayloadMultiSig = mn; exports.TransactionPayloadScript = gn; exports.TransactionPayloadVariants = _chunkJQCMXTY7js.F; exports.TransactionResponseType = _chunkJQCMXTY7js.U; exports.TransactionVariants = _chunkJQCMXTY7js.J; exports.TransactionWorker = li; exports.TransactionWorkerEventsEnum = Hc; exports.TypeTag = U; exports.TypeTagAddress = G; exports.TypeTagBool = Q; exports.TypeTagGeneric = M; exports.TypeTagI128 = Bt; exports.TypeTagI16 = Dt; exports.TypeTagI256 = Gt; exports.TypeTagI32 = Ft; exports.TypeTagI64 = Ot; exports.TypeTagI8 = Nt; exports.TypeTagParserError = X; exports.TypeTagParserErrorType = hd; exports.TypeTagReference = vr; exports.TypeTagSigner = Mt; exports.TypeTagStruct = h; exports.TypeTagU128 = ct; exports.TypeTagU16 = st; exports.TypeTagU256 = ut; exports.TypeTagU32 = at; exports.TypeTagU64 = te; exports.TypeTagU8 = de; exports.TypeTagVariants = _chunkJQCMXTY7js.D; exports.TypeTagVector = z; exports.U128 = ke; exports.U16 = Ue; exports.U256 = Se; exports.U32 = ze; exports.U64 = $; exports.U8 = Z; exports.WebAuthnSignature = Bn; exports.ZeroKnowledgeSig = me; exports.ZkProof = nn; exports.ZkpVariant = _chunkJQCMXTY7js.T; exports.anyPublicKeyVariantToString = _chunkJQCMXTY7js.O; exports.aptosCoinStructTag = KA; exports.aptosRequest = br; exports.base64UrlDecode = _chunkJQCMXTY7js.wa; exports.base64UrlToBytes = _chunkJQCMXTY7js.xa; exports.bigIntToBytesLE = wi; exports.buildTransaction = oo; exports.bytesToBigIntLE = Ct; exports.checkOrConvertArgument = Jt; exports.convertAmountFromHumanReadableToOnChain = _chunkJQCMXTY7js.ya; exports.convertAmountFromOnChainToHumanReadable = _chunkJQCMXTY7js.za; exports.convertArgument = io; exports.convertNumber = jr; exports.convertPayloadToInnerPayload = Cd; exports.createObjectAddress = _chunkJQCMXTY7js.oa; exports.createResourceAddress = _chunkJQCMXTY7js.pa; exports.createTokenAddress = _chunkJQCMXTY7js.ra; exports.createUserDerivedObjectAddress = _chunkJQCMXTY7js.qa; exports.deriveKey = bi; exports.deriveTransactionType = Nr; exports.deserializeFromScriptArgument = rd; exports.deserializePublicKey = Kf; exports.deserializeSignature = Rf; exports.ensureBoolean = _chunkJQCMXTY7js.z; exports.fetchEntryFunctionAbi = Ta; exports.fetchFunctionAbi = ro; exports.fetchJWK = Fi; exports.fetchModuleAbi = Sd; exports.fetchMoveFunctionAbi = IS; exports.fetchViewFunctionAbi = wa; exports.findFirstNonSignerArg = ba; exports.floorToWholeHour = _chunkJQCMXTY7js.va; exports.generateRawTransaction = vd; exports.generateSignedTransaction = so; exports.generateSignedTransactionForSimulation = Pa; exports.generateSigningMessage = Qe; exports.generateSigningMessageForSerializable = Lh; exports.generateSigningMessageForTransaction = Me; exports.generateTransactionPayload = ei; exports.generateTransactionPayloadWithABI = _d; exports.generateUserTransactionHash = ZS; exports.generateViewFunctionPayload = Sa; exports.generateViewFunctionPayloadWithABI = Id; exports.get = Tr; exports.getAptosFullNode = H; exports.getAptosPepperService = Bg; exports.getAuthenticatorForSimulation = En; exports.getErrorMessage = _chunkJQCMXTY7js.ta; exports.getFunctionParts = _chunkJQCMXTY7js.Ca; exports.getIssAudAndUidVal = nt; exports.getKeylessConfig = rn; exports.getKeylessJWKs = Xu; exports.getPageWithObfuscatedCursor = Sr; exports.hashStrToField = qe; exports.hashValues = Ea; exports.hexToAsciiString = _chunkJQCMXTY7js.w; exports.isBcsAddress = Xr; exports.isBcsBool = Qi; exports.isBcsFixedBytes = Td; exports.isBcsString = ji; exports.isBcsU128 = eo; exports.isBcsU16 = Xi; exports.isBcsU256 = to; exports.isBcsU32 = Yi; exports.isBcsU64 = Zi; exports.isBcsU8 = Ji; exports.isBlockEpilogueTransactionResponse = _chunkJQCMXTY7js.$; exports.isBlockMetadataTransactionResponse = _chunkJQCMXTY7js.Y; exports.isBool = ma; exports.isCanonicalEd25519Signature = nd; exports.isEd25519Signature = _chunkJQCMXTY7js.aa; exports.isEmptyOption = fa; exports.isEncodedEntryFunctionArgument = Aa; exports.isEncodedStruct = _chunkJQCMXTY7js.Ba; exports.isFeePayerSignature = _chunkJQCMXTY7js.da; exports.isGenesisTransactionResponse = _chunkJQCMXTY7js.X; exports.isKeylessSigner = Fr; exports.isLargeNumber = Jr; exports.isMultiAgentSignature = _chunkJQCMXTY7js.ca; exports.isMultiEd25519Signature = _chunkJQCMXTY7js.ea; exports.isNumber = bd; exports.isPendingTransactionResponse = _chunkJQCMXTY7js.V; exports.isScriptDataInput = ha; exports.isSecp256k1Signature = _chunkJQCMXTY7js.ba; exports.isSingleKeySigner = Mi; exports.isSingleSenderSignature = _chunkJQCMXTY7js.fa; exports.isStateCheckpointTransactionResponse = _chunkJQCMXTY7js.Z; exports.isString = mt; exports.isUserTransactionResponse = _chunkJQCMXTY7js.W; exports.isValidBIP44Path = is; exports.isValidFunctionInfo = _chunkJQCMXTY7js.Da; exports.isValidHardenedPath = os; exports.isValidatorTransactionResponse = _chunkJQCMXTY7js._; exports.mnemonicToSeed = mr; exports.normalizeBundle = Ts; exports.nowInSeconds = _chunkJQCMXTY7js.ua; exports.objectStructTag = be; exports.optionStructTag = RA; exports.outOfRangeErrorMessage = _chunkJQCMXTY7js.A; exports.padAndPackBytesWithLen = kn; exports.paginateWithCursor = wr; exports.paginateWithObfuscatedCursor = vi; exports.pairedFaMetadataAddress = _chunkJQCMXTY7js.Fa; exports.parseEncodedStruct = _chunkJQCMXTY7js.Aa; exports.parseJwtHeader = Zu; exports.parseTypeTag = He; exports.poseidonHash = Kt; exports.post = Nn; exports.postAptosFaucet = Ps; exports.postAptosFullNode = St; exports.postAptosIndexer = Ss; exports.postAptosPepperService = Es; exports.postAptosProvingService = _s; exports.promiseFulfilledStatus = Vc; exports.request = Fu; exports.sleep = _chunkJQCMXTY7js.sa; exports.splitPath = as; exports.standardizeTypeTags = Yr; exports.stringStructTag = x; exports.throwTypeMismatch = N; exports.truncateAddress = _chunkJQCMXTY7js.Ea; exports.validateNumberInRange = _chunkJQCMXTY7js.B; exports.verifyKeylessSignature = Di; exports.verifyKeylessSignatureWithJwkAndConfig = Pr;
//# sourceMappingURL=index.js.map